(self.webpackChunkdurians=self.webpackChunkdurians||[]).push([[625],{87391:function(en,ae,r){"use strict";r.r(ae),r.d(ae,{FormPro:function(){return ve},LoginPro:function(){return Xe},ModalPro:function(){return de},TablePro:function(){return ze}});var ge=r(15009),I=r.n(ge),xe=r(99289),W=r.n(xe),Fe=r(97857),t=r.n(Fe),je=r(19632),U=r.n(je),Pe=r(48689),ye=r(24969),Ce=r(61534),Se=r(86738),G=r(45360),$e=r(96074),oe=r(60940),le=r(42075),q=r(14726),N=r(67294),Ae=r(64599),se=r.n(Ae),Te=r(11238),Q=function(n,c,s){var u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,m="";return u&&(m="api"),Te.ZP.post(m+n,{data:c}).then(function(l){l.code==0?s(l):G.ZP.error(l.msg)}).catch(function(l){console.log(l)})},Ze=function(n,c){var s=se()(n),u;try{var m=function(){var g=u.value,v=g.proConfig;g.request||g.valueType==="select"&&(g.request=function(){var S=W()(I()().mark(function R(x,B){var j;return I()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return j=[],console.log(33333,x),i.next=4,c(v.url,t()(t()({},x),typeof v.params=="function"?v.params(x,B):v.params),function(a){console.log(2222,a),j=v.setData(a)});case 4:return i.abrupt("return",j);case 5:case"end":return i.stop()}},R)}));return function(R,x){return S.apply(this,arguments)}}())};for(s.s();!(u=s.n()).done;)m()}catch(l){s.e(l)}finally{s.f()}return n},ie=r(89451),Re=r(5574),_=r.n(Re),Be=r(59847),Ie=r(54673),e=r(85893),Oe=function(n){var c=n.ajax,s=c===void 0?Q:c,u=n.fieldProps,m=u.fieldNames,l=u.params,g=l===void 0?function(a){return{}}:l,v=u.url,S=u.setData,R=(0,N.useState)([]),x=_()(R,2),B=x[0],j=x[1];(0,N.useEffect)(function(){i({},t()({},g({})))},[]);function O(a,P,M){var d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"value",D=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"children",y=(0,Ie.Z)(a),$=se()(y),f;try{for($.s();!(f=$.n()).done;){var C=f.value;C[d]===P?C.children=M:C.children&&(C.children=O(C.children,P,M,d,D))}}catch(A){$.e(A)}finally{$.f()}return y}var i=function(P){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return s(v,t()({},g(P)),function(d){var D=S(d);m&&(D=D.map(function(y){return y.label=y[m.label],y.value=y[m.value],y})),j(function(y){return P.value?O(y,P.value,D):D})})};return(0,e.jsx)(Be.Z,t()(t()({},n==null?void 0:n.fieldProps),{},{treeDataSimpleMode:!0,style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:"\u8BF7\u9009\u62E9",loadData:i,treeData:B}))},De=Oe,Le=function(n){var c=n.children,s=(0,N.useContext)(ie.L_);return(0,e.jsx)(ie.L_.Provider,{value:t()(t()({},s),{},{valueTypeMap:{treeSelectPro:{renderFormItem:function(m,l){return(0,e.jsx)(De,t()({},l))}}}}),children:c})},ue=Le,Me=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:"\u6807\u9898",dataIndex:"title",copyable:!0,ellipsis:!0,tooltip:"\u6807\u9898\u8FC7\u957F\u4F1A\u81EA\u52A8\u6536\u7F29",formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}}],Ee=function(n){var c=n.ajax,s=c===void 0?Q:c,u=n.url,m=u===void 0?"https://proapi.azurewebsites.net/github/issues":u,l=n.addUrl,g=n.editUrl,v=n.deleteUrl,S=n.deleteField,R=S===void 0?"idList":S,x=n.addFormProFieldProps,B=x===void 0?{}:x,j=n.actionWidth,O=j===void 0?100:j,i=n.fieldProps,a=i===void 0?{search:{},columns:Me}:i,P=n.setData,M=P===void 0?function(h){return h.data.records}:P,d=n.setTotal,D=d===void 0?function(h){return h.data.total}:d,y=n.setMsg,$=y===void 0?function(h){return h.msg}:y,f=n.actionBar,C=f===void 0?[]:f,A=n.paginationAlias,b=A===void 0?{pageIndex:"pageIndex",pageSize:"pageSize"}:A,K=n.tableAlertOptionRenderPro,H=K===void 0?[]:K,w=(0,N.useRef)(),Y=a.rowKey||"id",k=[].concat(U()(v?[function(h){var o=h.record;return(0,e.jsx)(he,{record:o,children:(0,e.jsx)("a",{children:"\u7F16\u8F91"})})}]:[]),U()(C),U()(v?[function(h){var o=h.record;return(0,e.jsx)(Se.Z,{title:"\u5220\u9664",description:"\u786E\u5B9A\u5220\u9664\u8FD9\u6761\u6570\u636E\u5417\uFF1F",onConfirm:function(){pe([o[Y]])},okText:"\u662F",cancelText:"\u5426",children:(0,e.jsx)("a",{style:{color:"red"},children:"\u5220\u9664"})})}]:[])),he=function(o){var F=o.children,p=o.record;return(0,e.jsx)(ve,{fieldProps:t()({initialValues:p,columns:a.columns.map(function(T){return t()(t()({},T),{},{width:"md"})}),onFinish:function(){var T=W()(I()().mark(function L(me){var E,V,re;return I()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return E=!1,V=l,re=me,p!=null&&p[Y]&&g&&(re[Y]=p==null?void 0:p[Y],V=g),J.next=6,s(V,re,function(_e){var te;(te=w.current)===null||te===void 0||te.reload(),G.ZP.success($(_e)),E=!0});case 6:return J.abrupt("return",E);case 7:case"end":return J.stop()}},L)}));function Z(L){return T.apply(this,arguments)}return Z}()},B),children:F})},qe=function(o,F){return(0,e.jsx)("div",{className:"durians_table_pro_action",children:k.map(function(p,T){return(0,e.jsxs)(N.Fragment,{children:[(0,e.jsx)(p,{record:F}),k.length>1&&T<k.length-1?(0,e.jsx)($e.Z,{type:"vertical"}):null]},T)})})},pe=function(o){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},p={};p[R]=o,s(v,p,function(T){var Z;G.ZP.success($(T)),(Z=w.current)===null||Z===void 0||Z.reload(),w.current.clearSelected(),F()})};return(0,e.jsx)(ue,{children:(0,e.jsx)(Ce.Z,t()(t()({defaultSize:"small",scroll:{x:"100%"},rowSelection:{selections:[oe.Z.SELECTION_ALL,oe.Z.SELECTION_INVERT]},tableAlertRender:function(o){var F=o.selectedRowKeys,p=o.selectedRows,T=o.onCleanSelected;return console.log(F,p),(0,e.jsx)(le.Z,{size:24,children:(0,e.jsxs)("span",{children:["\u5DF2\u9009 ",F.length," \u9879",(0,e.jsx)("a",{style:{marginInlineStart:8},onClick:T,children:"\u53D6\u6D88\u9009\u62E9"})]})})},tableAlertOptionRender:function(o){var F=o.selectedRowKeys,p=o.selectedRows,T=o.onCleanSelected;return(0,e.jsxs)(le.Z,{size:16,children:[v?(0,e.jsx)(de,{title:"\u662F\u5426\u786E\u5B9A\u5220\u9664\uFF1F",Content:function(){return"\u786E\u5B9A\u5220\u9664\uFF1F"},handleOk:function(L){pe(F,function(){L()})},children:(0,e.jsx)(q.ZP,{size:"small",icon:(0,e.jsx)(Pe.Z,{}),danger:!0,children:"\u6279\u91CF\u5220\u9664"},"danger")}):null,H.map(function(Z,L){return(0,e.jsx)(Z,{selectedRowKeys:F,selectedRows:p,onCleanSelected:T},L)})]})},actionRef:w,request:function(){var h=W()(I()().mark(function o(F,p,T){var Z,L;return I()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(Z=a.dataSource,L={},L[b.pageIndex]=F.current,L[b.pageSize]=F.pageSize,console.log(777,p,F,T,L),!m){E.next=8;break}return E.next=8,s(m,t()(t()({},L),F),function(V){console.log(V),Z=V});case 8:return E.abrupt("return",Promise.resolve({data:M(Z),success:!0,total:D(Z)}));case 9:case"end":return E.stop()}},o)}));return function(o,F,p){return h.apply(this,arguments)}}(),editable:{type:"multiple"},columnsState:{persistenceKey:"pro-table-singe-demos",persistenceType:"localStorage",defaultValue:{option:{fixed:"right",disable:!0}},onChange:function(o){console.log("value: ",o)}},rowKey:"id",options:{setting:{listsHeight:400}},form:{syncToUrl:!1},pagination:{pageSize:10,onChange:function(o){return console.log(o)}},dateFormatter:"string"},a),{},{columns:[].concat(U()(Ze(a.columns,s)),U()(k.length?[{title:"\u64CD\u4F5C",dataIndex:"actionTablePro",fixed:"right",actionWidth:O,render:qe}]:[])),search:a.search?t()({labelWidth:"auto",span:4,defaultCollapsed:!1},a.search||{}):{labelWidth:"auto"},toolBarRender:function(){return[].concat(U()(l?[(0,e.jsx)(he,{children:(0,e.jsx)(q.ZP,{icon:(0,e.jsx)(ye.Z,{}),type:"primary",children:"\u65B0\u5EFA"},"button")})]:[]),U()(a.toolBarRender||[]))}}))})},ze=Ee,He=r(85576),Ne=function(n){var c=n.title,s=c===void 0?"\u57FA\u7840":c,u=n.handleOk,m=u===void 0?function(d){d()}:u,l=n.Content,g=l===void 0?function(){return(0,e.jsx)("div",{children:"\u793A\u4F8B"})}:l,v=n.children,S=v===void 0?(0,e.jsx)("div",{children:"\u70B9\u51FB"}):v,R=n.fieldProps,x=R===void 0?{}:R,B=(0,N.useState)(!1),j=_()(B,2),O=j[0],i=j[1],a=function(){i(!0)},P=function(){m(function(){i(!1)})},M=function(){i(!1)};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{onClick:a,children:S}),(0,e.jsx)(He.Z,t()(t()({title:s,open:O,onOk:P,onCancel:M},x),{},{children:(0,e.jsx)(g,{isModalOpen:O,setIsModalOpen:i})}))]})},de=Ne,be=r(87547),ce=r(94149),Ue=r(24454),Ke=r(68262),ee=r(5966),We=r(16434),we=r(63434),Ve=r(9361),ne=r(56140),Ge=r(81354),X=r.n(Ge),fe=r(99191),Je=(0,fe.df)([{id:"SHA256",fun:function(n){return X().SHA256(n).toString(X().enc.Base64)}},{id:"MD5",fun:function(n){return X().MD5(n).toString(X().enc.Hex)}}]),Qe=function(n){var c=n.ajax,s=c===void 0?Q:c,u=n.url,m=n.captchaUrl,l=n.loginFormFieldProps,g=n.hasSmsLogin,v=g===void 0?!1:g,S=n.hasAccountLogin,R=S===void 0?!0:S,x=n.phoneField,B=x===void 0?"mobile":x,j=n.encryption,O=j===void 0?"SHA256":j,i=Ve.Z.useToken(),a=i.token,P=(0,N.useState)("account"),M=_()(P,2),d=M[0],D=M[1],y=(0,N.useRef)();return(0,e.jsx)("div",{style:{backgroundColor:a.colorBgContainer},className:"crm_login_body",children:(0,e.jsxs)(Ke.U,t()(t()({formRef:y,title:"\u767B\u5F55",subTitle:"\u6B22\u8FCE\u767B\u5F55\u7CFB\u7EDF",initialValues:{username:"",password:""},onFinish:function(){var $=W()(I()().mark(function f(C){var A,b;return I()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.next=2,y.current.validateFields();case 2:return A=H.sent,A&&(b=t()({},C),b.password=Je.get(O).fun(C.password),s(u,b,function(w){(0,fe.ok)("token",w.data)},!1)),H.abrupt("return",!0);case 5:case"end":return H.stop()}},f)}));return function(f){return $.apply(this,arguments)}}()},l),{},{children:[(0,e.jsxs)(ne.Z,{centered:!0,activeKey:d,onChange:function(f){return D(f)},children:[(0,e.jsx)(ne.Z.TabPane,{tab:"\u8D26\u53F7\u5BC6\u7801\u767B\u5F55",disabled:!R},"account"),(0,e.jsx)(ne.Z.TabPane,{tab:"\u624B\u673A\u53F7\u767B\u5F55",disabled:!v},"phone")]}),d==="account"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(ee.Z,{name:"username",fieldProps:{size:"large",prefix:(0,e.jsx)(be.Z,{className:"prefixIcon"})},placeholder:"\u7528\u6237\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"}]}),(0,e.jsx)(ee.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,e.jsx)(ce.Z,{className:"prefixIcon"}),strengthText:"\u5BC6\u7801\u5E94\u5305\u542B\u6570\u5B57\u3001\u5B57\u6BCD\u548C\u7279\u6B8A\u5B57\u7B26\uFF0C\u957F\u5EA6\u81F3\u5C11\u4E3A8\u4E2A\u5B57\u7B26",statusRender:function(f){var C=function(){return f&&f.length>12?"ok":f&&f.length>6?"pass":"poor"},A=C();return A==="pass"?(0,e.jsx)("div",{style:{color:a.colorWarning},children:"\u5F3A\u5EA6\uFF1A\u4E2D"}):A==="ok"?(0,e.jsx)("div",{style:{color:a.colorSuccess},children:"\u5F3A\u5EA6\uFF1A\u5F3A"}):(0,e.jsx)("div",{style:{color:a.colorError},children:"\u5F3A\u5EA6\uFF1A\u5F31"})}},placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"}]})]}),d==="phone"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(ee.Z,{fieldProps:{size:"large",prefix:(0,e.jsx)(Ue.Z,{className:"prefixIcon"})},name:B,placeholder:"\u624B\u673A\u53F7",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\uFF01"},{pattern:/^1\d{10}$/,message:"\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF\uFF01"}]}),(0,e.jsx)(We.Z,{fieldProps:{size:"large",prefix:(0,e.jsx)(ce.Z,{className:"prefixIcon"})},captchaProps:{size:"large"},placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",captchaTextRender:function(f,C){return f?"".concat(C," ","\u83B7\u53D6\u9A8C\u8BC1\u7801"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"},phoneName:B,name:"captcha",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01"}],onGetCaptcha:function(){var $=W()(I()().mark(function f(C){var A;return I()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:A={},A[B]=C,s(m,t()({},A),function(H){G.ZP.success("\u9A8C\u8BC1\u7801\u5DF2\u53D1\u9001\uFF0C\u8BF7\u67E5\u770B\u624B\u673A\u77ED\u4FE1")});case 3:case"end":return K.stop()}},f)}));return function(f){return $.apply(this,arguments)}}()})]}),(0,e.jsxs)("div",{style:{marginBlockEnd:24},children:[(0,e.jsx)(we.Z,{noStyle:!0,name:"autoLogin",children:"\u81EA\u52A8\u767B\u5F55"}),(0,e.jsx)("a",{style:{float:"right"},children:"\u5FD8\u8BB0\u5BC6\u7801"})]})]}))})},Xe=Qe,Ye=r(77646),ke=function(n){var c=n.layoutType,s=c===void 0?"ModalForm":c,u=n.fieldProps,m=u===void 0?{}:u,l=n.url,g=n.ajax,v=g===void 0?Q:g,S=n.finishFun,R=S===void 0?function(){}:S,x=n.setMsg,B=x===void 0?function(i){return i.msg}:x,j=n.children,O=j===void 0?(0,e.jsx)(q.ZP,{children:"\u70B9\u51FB\u6211"}):j;return(0,e.jsx)(ue,{children:(0,e.jsx)(Ye.Z,t()(t()({trigger:O,layoutType:"ModalForm",onFinish:function(){var i=W()(I()().mark(function a(P){return I()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return console.log(P),d.next=3,v(l,P,function(D){G.ZP.success(B(D)),R()});case 3:case"end":return d.stop()}},a)}));return function(a){return i.apply(this,arguments)}}()},s==="ModalForm"?{modalProps:{destroyOnClose:!0}}:{drawerProps:{destroyOnClose:!0}}),{},{columns:[{title:"\u6807\u9898",dataIndex:"title",formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]},width:"md"}]},m))})},ve=ke},42480:function(){},24654:function(){}}]);
