(self.webpackChunkdurians=self.webpackChunkdurians||[]).push([[387],{36274:function(hr,he,t){"use strict";t.r(he),t.d(he,{FormPro:function(){return ve},LoginPro:function(){return ir},ModalPro:function(){return Se},TablePro:function(){return qe},TreePro:function(){return Te}});var De=t(52677),Ze=t.n(De),Be=t(15009),K=t.n(Be),Le=t(99289),_=t.n(Le),Ee=t(97857),n=t.n(Ee),be=t(19632),k=t.n(be),Ne=t(48689),ge=t(24969),Oe=t(61534),Me=t(86738),Ue=t(96074),oe=t(45360),xe=t(60940),Fe=t(42075),ie=t(14726),O=t(67294),ze=t(64599),je=t.n(ze),Ke=t(11238),He=t(81354),W=t.n(He),ee=function(e,l,a){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,c="";return s&&(c="api"),Ke.ZP.post(c+e,{data:l}).then(function(o){o.code==0?a(o):oe.ZP.error(o.msg)}).catch(function(o){console.log(o)})},ye=function(e,l){var a=je()(e),s;try{var c=function(){var f=s.value,d=f.proConfig;f.request||(f.valueType==="select"||f.valueType==="treeSelect")&&(f.request=function(){var j=_()(K()().mark(function C(y,I){var F;return K()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return console.log(22122,y,d.params),F=[],v.next=4,l(d.url,n()(n()({},y),typeof d.params=="function"?d.params(y,I):d.params||{}),function(D){F=d.setData(D)});case 4:return v.abrupt("return",F);case 5:case"end":return v.stop()}},C)}));return function(C,y){return j.apply(this,arguments)}}())};for(a.s();!(s=a.n()).done;)c()}catch(o){a.e(o)}finally{a.f()}return e},We=function(e,l,a){var s=W().enc.Utf8.parse(l),c=W().enc.Utf8.parse(a);return W().AES.encrypt(e,s,{mode:W().mode.ECB,padding:W().pad.Pkcs7}).toString()},gr=function(e,l,a){var s=CryptoJS.enc.Utf8.parse(l),c=CryptoJS.enc.Utf8.parse(a);return CryptoJS.AES.decrypt(e,s,{mode:CryptoJS.mode.ECB,padding:CryptoJS.pad.Pkcs7})},Pe=t(89451),Je=t(5574),le=t.n(Je),Ve=t(59847),we=t(54673),r=t(85893);function de(L,e,l){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"value",s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"children",c=(0,we.Z)(L),o=je()(c),f;try{for(o.s();!(f=o.n()).done;){var d=f.value;d[a]===e?d.children=l:d.children&&(d.children=de(d.children,e,l,a,s))}}catch(j){o.e(j)}finally{o.f()}return c}var Ge=function(e){var l=e.ajax,a=l===void 0?ee:l,s=e.fieldProps,c=s.fieldNames,o=s.params,f=o===void 0?function(v){return{}}:o,d=s.url,j=s.setData,C=(0,O.useState)([]),y=le()(C,2),I=y[0],F=y[1];(0,O.useEffect)(function(){b({},n()({},f({})))},[]);var b=function(D){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return a(d,n()(n()({},f(D)),T),function(E){var p=j(E);c&&(p=p.map(function(Z){return Z.label=Z[c.label],Z.value=Z[c.value],Z})),F(function(Z){return D.value?de(Z,D.value,p):p})})};return(0,r.jsx)(Ve.Z,n()(n()({},e==null?void 0:e.fieldProps),{},{treeDataSimpleMode:!0,style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:"\u8BF7\u9009\u62E9",loadData:b,treeData:I}))},ke=Ge,Qe=function(e){var l=e.children,a=(0,O.useContext)(Pe.L_);return(0,r.jsx)(Pe.L_.Provider,{value:n()(n()({},a),{},{valueTypeMap:{treeSelectPro:{renderFormItem:function(c,o){return(0,r.jsx)(ke,n()({},o))}}}}),children:l})},$e=Qe,Xe=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:"\u6807\u9898",dataIndex:"title",copyable:!0,ellipsis:!0,tooltip:"\u6807\u9898\u8FC7\u957F\u4F1A\u81EA\u52A8\u6536\u7F29",formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}}],Ye=function(e){var l=e.ajax,a=l===void 0?ee:l,s=e.url,c=s===void 0?"https://proapi.azurewebsites.net/github/issues":s,o=e.addUrl,f=e.editUrl,d=e.deleteUrl,j=e.deleteFields,C=j===void 0?"idList":j,y=e.deleteField,I=y===void 0?null:y,F=e.deleteFieldIsArr,b=F===void 0?!1:F,v=e.deleteParams,D=v===void 0?{}:v,T=e.addFormProFieldProps,E=T===void 0?{}:T,p=e.actionWidth,Z=p===void 0?100:p,M=e.fieldProps,B=M===void 0?{search:{},columns:Xe,rowKey:"id"}:M,N=e.setData,H=N===void 0?function(g){return g.data.records}:N,G=e.setTotal,q=G===void 0?function(g){return g.data.total}:G,J=e.setMsg,te=J===void 0?function(g){return g.msg}:J,Q=e.actionBar,X=Q===void 0?[]:Q,A=e.paginationAlias,u=A===void 0?{pageIndex:"pageIndex",pageSize:"pageSize"}:A,h=e.tableAlertOptionRenderPro,P=h===void 0?[]:h,V=e.treeFieldProps,$=V===void 0?null:V,z=e.paramsFun,mr=z===void 0?function(g){return g}:z,ne=(0,O.useRef)(),me=(0,O.useRef)(),Ae=B.rowKey||"id",se=[].concat(k()(f?[function(g){var i=g.record;return(0,r.jsx)(Re,{title:"\u7F16\u8F91",id:Ae,record:i,children:(0,r.jsx)("a",{children:"\u7F16\u8F91"})})}]:[]),k()(X),k()(d?[function(g){var i=g.record;return(0,r.jsx)(Me.Z,{title:"\u5220\u9664",description:"\u786E\u5B9A\u5220\u9664\u8FD9\u6761\u6570\u636E\u5417\uFF1F",onConfirm:function(){Ie([i[Ae]],function(){},!1)},okText:"\u662F",cancelText:"\u5426",children:(0,r.jsx)("a",{style:{color:"red"},children:"\u5220\u9664"})})}]:[])),Re=function(i){var x=i.children,m=i.record,S=i.id,R=i.title,U=R===void 0?"\u65B0\u589E":R;console.log(5555,m,S);var Y=o,w={};return S&&m!==null&&m!==void 0&&m[S]&&(w[S]=m==null?void 0:m[S],f&&(Y=f)),(0,r.jsx)(ve,n()(n()({ajax:a},E),{},{url:Y,finishFun:function(){var pe;(pe=ne.current)===null||pe===void 0||pe.reload()},params:n()(n()({},w),E.params),fieldProps:n()({initialValues:m,columns:B.columns.map(function(ae){return n()(n()({},ae),{},{width:null})}),title:U},E.fieldProps),children:x}))},pr=function(i,x){return(0,r.jsx)("div",{className:"durians_table_pro_action",children:se.map(function(m,S){return(0,r.jsxs)(O.Fragment,{children:[(0,r.jsx)(m,{record:x}),se.length>1&&S<se.length-1?(0,r.jsx)(Ue.Z,{type:"vertical"}):null]},S)})})},Ie=function(i){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,S=i;!b&&!m&&(S=i[0]);var R=n()({},D);m?R[C]=S:I?R[I]=S:R[B.rowKey||"id"]=S,a(d,R,function(U){var Y;oe.ZP.success(te(U)),(Y=ne.current)===null||Y===void 0||Y.reload(),ne.current.clearSelected(),x()})};return(0,r.jsx)($e,{children:(0,r.jsxs)("div",{className:"durians_table_body",children:[$?(0,r.jsx)("div",{className:"durians_table_body_l",style:{width:300},children:(0,r.jsx)(Te,n()({ajax:a},$))}):null,(0,r.jsx)("div",{className:"durians_table_body_r",children:(0,r.jsx)(Oe.Z,n()(n()({formRef:me,defaultSize:"small",scroll:{x:"100%"},rowSelection:{selections:[xe.Z.SELECTION_ALL,xe.Z.SELECTION_INVERT]},tableAlertRender:function(i){var x=i.selectedRowKeys,m=i.selectedRows,S=i.onCleanSelected;return console.log(x,m),(0,r.jsx)(Fe.Z,{size:24,children:(0,r.jsxs)("span",{children:["\u5DF2\u9009 ",x.length," \u9879",(0,r.jsx)("a",{style:{marginInlineStart:8},onClick:S,children:"\u53D6\u6D88\u9009\u62E9"})]})})},tableAlertOptionRender:function(i){var x=i.selectedRowKeys,m=i.selectedRows,S=i.onCleanSelected;return(0,r.jsxs)(Fe.Z,{size:16,children:[d?(0,r.jsx)(Se,{title:"\u662F\u5426\u786E\u5B9A\u5220\u9664\uFF1F",Content:function(){return"\u786E\u5B9A\u5220\u9664\uFF1F"},handleOk:function(U){Ie(x,function(){U()})},children:(0,r.jsx)(ie.ZP,{size:"small",icon:(0,r.jsx)(Ne.Z,{}),danger:!0,children:"\u6279\u91CF\u5220\u9664"},"danger")}):null,P.map(function(R,U){return(0,r.jsx)(R,{selectedRowKeys:x,selectedRows:m,onCleanSelected:S,formRef:me,actionRef:ne},U)})]})},actionRef:ne,request:function(){var g=_()(K()().mark(function i(x,m,S){var R,U;return K()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(R=B.dataSource,U={},U[u.pageIndex]=x.current,U[u.pageSize]=x.pageSize,!c){w.next=7;break}return w.next=7,a(c,mr(n()(n()({},U),x)),function(ae){console.log(ae),R=ae});case 7:return w.abrupt("return",Promise.resolve({data:H(R),success:!0,total:q(R)}));case 8:case"end":return w.stop()}},i)}));return function(i,x,m){return g.apply(this,arguments)}}(),editable:{type:"multiple"},columnsState:{persistenceKey:"pro-table-singe-demos",persistenceType:"localStorage",defaultValue:{option:{fixed:"right",disable:!0}},onChange:function(i){console.log("value: ",i)}},rowKey:"id",options:{setting:{listsHeight:400}},form:{syncToUrl:!1},pagination:{pageSize:10,onChange:function(i){return console.log(i)}},dateFormatter:"string"},B),{},{columns:[].concat(k()(ye(B.columns,a)),k()(se.length?[{title:"\u64CD\u4F5C",dataIndex:"actionTablePro",fixed:"right",hideInSearch:!0,actionWidth:Z,render:pr}]:[])),search:B.search?n()({labelWidth:"auto",span:4,defaultCollapsed:!1},B.search||{}):{labelWidth:"auto"},toolBarRender:function(i){var x;return console.log(6666,B.toolBarRender),[].concat(k()(o?[(0,r.jsx)(Re,{children:(0,r.jsx)(ie.ZP,{icon:(0,r.jsx)(ge.Z,{}),type:"primary",children:"\u65B0\u5EFA"},"button")})]:[]),k()(((x=B.toolBarRender)===null||x===void 0?void 0:x.map(function(m){return console.log(7656,Ze()(m)),typeof m=="function"?(0,r.jsx)(m,{action:i,formRef:me}):m}))||[]))}}))})]})})},qe=Ye,_e=t(85576),er=function(e){var l=e.title,a=l===void 0?"\u57FA\u7840":l,s=e.handleOk,c=s===void 0?function(p){p()}:s,o=e.Content,f=o===void 0?function(){return(0,r.jsx)("div",{children:"\u793A\u4F8B"})}:o,d=e.children,j=d===void 0?(0,r.jsx)("div",{children:"\u70B9\u51FB"}):d,C=e.fieldProps,y=C===void 0?{}:C,I=(0,O.useState)(!1),F=le()(I,2),b=F[0],v=F[1],D=function(){v(!0)},T=function(){c(function(){v(!1)})},E=function(){v(!1)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{onClick:D,children:j}),(0,r.jsx)(_e.Z,n()(n()({title:a,open:b,onOk:T,onCancel:E},y),{},{children:(0,r.jsx)(f,{isModalOpen:b,setIsModalOpen:v})}))]})},Se=er,rr=t(87547),Ce=t(94149),tr=t(24454),nr=t(68262),ue=t(5966),ar=t(16434),or=t(63434),lr=t(9361),ce=t(56140),re=t(99191),xr=(0,re.df)([{id:"SHA256",fun:function(e){return W().SHA256(e).toString(W().enc.Base64)}},{id:"MD5",fun:function(e){return W().MD5(e).toString(W().enc.Hex)}}]),fe="autoLogin",sr=function(e){var l=e.ajax,a=l===void 0?ee:l,s=e.url,c=e.captchaUrl,o=e.loginFormFieldProps,f=e.hasSmsLogin,d=f===void 0?!1:f,j=e.hasAccountLogin,C=j===void 0?!0:j,y=e.phoneField,I=y===void 0?"mobile":y,F=e.extraPasswordText,b=F===void 0?"":F,v=e.secretKey,D=v===void 0?"":v,T=e.setData,E=T===void 0?function(A){return A.data}:T,p=e.tokenField,Z=p===void 0?"token":p,M=e.callback,B=M===void 0?function(){}:M,N=lr.Z.useToken(),H=N.token,G=(0,O.useState)("account"),q=le()(G,2),J=q[0],te=q[1],Q=(0,O.useRef)();(0,O.useEffect)(function(){var A=(0,re.pv)(fe);A&&X((0,re.pv)(fe))},[]);var X=function(u){var h=n()({},u);h.password=We(h.password+b,D,D),a(s,h,function(P){(0,re.KN)(Z,E(P.data)),u.autoLogin&&(0,re.ok)(fe,u),B(P)},!1)};return(0,r.jsx)("div",{style:{backgroundColor:H.colorBgContainer},className:"crm_login_body",children:(0,r.jsxs)(nr.U,n()(n()({formRef:Q,title:"\u767B\u5F55",subTitle:"\u6B22\u8FCE\u767B\u5F55\u7CFB\u7EDF",initialValues:{username:"",password:""},onFinish:function(){var A=_()(K()().mark(function u(h){var P;return K()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,Q.current.validateFields();case 2:return P=$.sent,P&&X(h),$.abrupt("return",!0);case 5:case"end":return $.stop()}},u)}));return function(u){return A.apply(this,arguments)}}()},o),{},{children:[(0,r.jsxs)(ce.Z,{centered:!0,activeKey:J,onChange:function(u){return te(u)},children:[(0,r.jsx)(ce.Z.TabPane,{tab:"\u8D26\u53F7\u5BC6\u7801\u767B\u5F55",disabled:!C},"account"),(0,r.jsx)(ce.Z.TabPane,{tab:"\u624B\u673A\u53F7\u767B\u5F55",disabled:!d},"phone")]}),J==="account"&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ue.Z,{name:"username",fieldProps:{size:"large",prefix:(0,r.jsx)(rr.Z,{className:"prefixIcon"})},placeholder:"\u7528\u6237\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"}]}),(0,r.jsx)(ue.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,r.jsx)(Ce.Z,{className:"prefixIcon"}),strengthText:"\u5BC6\u7801\u5E94\u5305\u542B\u6570\u5B57\u3001\u5B57\u6BCD\u548C\u7279\u6B8A\u5B57\u7B26\uFF0C\u957F\u5EA6\u81F3\u5C11\u4E3A8\u4E2A\u5B57\u7B26",statusRender:function(u){var h=function(){return u&&u.length>12?"ok":u&&u.length>6?"pass":"poor"},P=h();return P==="pass"?(0,r.jsx)("div",{style:{color:H.colorWarning},children:"\u5F3A\u5EA6\uFF1A\u4E2D"}):P==="ok"?(0,r.jsx)("div",{style:{color:H.colorSuccess},children:"\u5F3A\u5EA6\uFF1A\u5F3A"}):(0,r.jsx)("div",{style:{color:H.colorError},children:"\u5F3A\u5EA6\uFF1A\u5F31"})}},placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"}]})]}),J==="phone"&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ue.Z,{fieldProps:{size:"large",prefix:(0,r.jsx)(tr.Z,{className:"prefixIcon"})},name:I,placeholder:"\u624B\u673A\u53F7",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\uFF01"},{pattern:/^1\d{10}$/,message:"\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF\uFF01"}]}),(0,r.jsx)(ar.Z,{fieldProps:{size:"large",prefix:(0,r.jsx)(Ce.Z,{className:"prefixIcon"})},captchaProps:{size:"large"},placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",captchaTextRender:function(u,h){return u?"".concat(h," ","\u83B7\u53D6\u9A8C\u8BC1\u7801"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"},phoneName:I,name:"captcha",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01"}],onGetCaptcha:function(){var A=_()(K()().mark(function u(h){var P;return K()().wrap(function($){for(;;)switch($.prev=$.next){case 0:P={},P[I]=h,a(c,n()({},P),function(z){oe.ZP.success("\u9A8C\u8BC1\u7801\u5DF2\u53D1\u9001\uFF0C\u8BF7\u67E5\u770B\u624B\u673A\u77ED\u4FE1")});case 3:case"end":return $.stop()}},u)}));return function(u){return A.apply(this,arguments)}}()})]}),(0,r.jsxs)("div",{style:{marginBlockEnd:24},children:[(0,r.jsx)(or.Z,{noStyle:!0,name:"autoLogin",children:"\u81EA\u52A8\u767B\u5F55"}),(0,r.jsx)("a",{style:{float:"right"},children:"\u5FD8\u8BB0\u5BC6\u7801"})]})]}))})},ir=sr,dr=t(77646),ur=function(e){var l=e.params,a=l===void 0?{}:l,s=e.layoutType,c=s===void 0?"ModalForm":s,o=e.fieldProps,f=o===void 0?{}:o,d=e.url,j=e.ajax,C=j===void 0?ee:j,y=e.finishFun,I=y===void 0?function(){}:y,F=e.setMsg,b=F===void 0?function(T){return T.msg}:F,v=e.children,D=v===void 0?(0,r.jsx)(ie.ZP,{children:"\u70B9\u51FB\u6211"}):v;return(0,r.jsx)($e,{children:(0,r.jsx)(dr.Z,n()(n()(n()({trigger:D,layoutType:"ModalForm",onFinish:_()(K()().mark(function T(){var E,p,Z,M=arguments;return K()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return E=M.length>0&&M[0]!==void 0?M[0]:{},p=!1,Z=n()(n()({},a),E),console.log(E),N.next=6,C(d,Z,function(H){oe.ZP.success(b(H)),I(),p=!0});case 6:return N.abrupt("return",p);case 7:case"end":return N.stop()}},T)}))},c==="ModalForm"?{modalProps:{destroyOnClose:!0}}:{drawerProps:{destroyOnClose:!0}}),f),{},{columns:ye(f.columns,C)}))})},ve=ur,cr=t(17960),fr=t(89705),Fr=[{title:"Expand to load",key:"0"},{title:"Expand to load",key:"1"},{title:"Tree Node",key:"2",isLeaf:!0}],vr=function(e){var l=e.title,a=l===void 0?"\u9009\u62E9":l,s=e.ajax,c=s===void 0?ee:s,o=e.url,f=o===void 0?"https://proapi.azurewebsites.net/github/issues":o,d=e.params,j=d===void 0?function(u){return{}}:d,C=e.addUrl,y=e.editUrl,I=e.deleteUrl,F=e.deleteFields,b=F===void 0?"idList":F,v=e.deleteField,D=v===void 0?null:v,T=e.deleteFieldIsArr,E=T===void 0?!1:T,p=e.deleteParams,Z=p===void 0?{}:p,M=e.addFormProFieldProps,B=M===void 0?{}:M,N=e.setData,H=N===void 0?function(u){return u.data}:N,G=e.fieldNames,q=(0,O.useState)([]),J=le()(q,2),te=J[0],Q=J[1];(0,O.useEffect)(function(){X({},n()({},j({})))},[]);var X=function(h){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return c(f,n()(n()({},j(h)),P),function(V){var $=H(V);G&&($=$.map(function(z){return z.label=z[G.label],z.value=z[G.value],z})),Q(function(z){return h.value?de(z,h.value,$):$})})},A=function(h){var P=h.children;return(0,r.jsx)(ve,n()(n()({url:C},B),{},{fieldProps:{columns:[{title:"\u6807\u9898",dataIndex:"title",formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}}]},children:P}))};return(0,r.jsxs)("div",{className:"durians_tree_body",children:[(0,r.jsxs)("div",{className:"durians_tree_body_title",children:[(0,r.jsx)("div",{className:"durians_tree_body_title_l",children:a}),(0,r.jsx)("div",{className:"durians_tree_body_title_r",children:(0,r.jsx)(A,{children:(0,r.jsx)(ge.Z,{})})})]}),(0,r.jsx)("div",{className:"durians_tree_body_tree",children:(0,r.jsx)(cr.Z,{loadData:X,treeData:te,titleRender:function(h){return(0,r.jsxs)("div",{className:"durians_tree_body_title_node",children:[(0,r.jsx)("div",{className:"durians_tree_body_title_node_l",children:h.title}),(0,r.jsx)("div",{className:"durians_tree_body_title_node_r",onClick:function(V){V.stopPropagation(),console.log(2222)},children:(0,r.jsx)(fr.Z,{})})]})}})})]})},Te=vr},42480:function(){},24654:function(){}}]);
