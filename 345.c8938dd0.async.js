(self.webpackChunkdurians=self.webpackChunkdurians||[]).push([[345],{51660:function(Ue,q,n){"use strict";n.r(q),n.d(q,{LoginPro:function(){return ze},ModalPro:function(){return ae},TablePro:function(){return Pe}});var ue=n(15009),A=n.n(ue),de=n(99289),H=n.n(de),ce=n(97857),i=n.n(ce),he=n(19632),$=n.n(he),fe=n(48689),ve=n(24969),ge=n(22530),pe=n(79050),me=n(86738),V=n(45360),xe=n(96074),_=n(62120),ee=n(42075),ne=n(14726),N=n(67294),je=n(11238),te=function(t,p,v){var j=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,S="";return j&&(S="api"),je.ZP.post(S+t,{data:p}).then(function(u){u.code==0?v(u):V.ZP.error(u.msg)}).catch(function(u){console.log(u)})},e=n(85893),Fe=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:"\u6807\u9898",dataIndex:"title",copyable:!0,ellipsis:!0,tooltip:"\u6807\u9898\u8FC7\u957F\u4F1A\u81EA\u52A8\u6536\u7F29",formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}}],ye=function(t){var p=t.ajax,v=p===void 0?te:p,j=t.url,S=j===void 0?"https://proapi.azurewebsites.net/github/issues":j,u=t.addUrl,B=t.editUrl,F=t.deleteUrl,O=t.deleteField,D=O===void 0?"idList":O,E=t.addFieldProps,L=E===void 0?{}:E,I=t.actionWidth,y=I===void 0?100:I,P=t.fieldProps,h=P===void 0?{search:{},columns:Fe}:P,T=t.setData,K=T===void 0?function(a){return a.data.records}:T,m=t.setTotal,Z=m===void 0?function(a){return a.data.total}:m,s=t.setMsg,g=s===void 0?function(a){return a.msg}:s,f=t.actionBar,z=f===void 0?[]:f,M=t.paginationAlias,x=M===void 0?{page_number:"pageIndex",page_size:"pageSize"}:M,U=(0,N.useRef)(),G=h.rowKey||"id",J=[].concat($()(F?[function(a){var r=a.record;return(0,e.jsx)(le,{record:r,children:(0,e.jsx)("a",{children:"\u7F16\u8F91"})})}]:[]),$()(z),$()(F?[function(a){var r=a.record;return(0,e.jsx)(me.Z,{title:"\u5220\u9664",description:"\u786E\u5B9A\u5220\u9664\u8FD9\u6761\u6570\u636E\u5417\uFF1F",onConfirm:function(){ie([r[G]])},okText:"\u662F",cancelText:"\u5426",children:(0,e.jsx)("a",{style:{color:"red"},children:"\u5220\u9664"})})}]:[])),le=function(r){var l=r.children,o=r.record;return(0,e.jsx)(ge.Z,i()({initialValues:o,columns:h.columns.map(function(d){return i()(i()({},d),{},{width:"md"})}),trigger:l,onFinish:function(){var d=H()(A()().mark(function c(R){var Q,C,b;return A()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return Q=!1,C=u,b=R,o!=null&&o[G]&&B&&(b[G]=o==null?void 0:o[G],C=B),W.next=6,v(C,b,function(De){var k;(k=U.current)===null||k===void 0||k.reload(),V.ZP.success(g(De)),Q=!0});case 6:return W.abrupt("return",Q);case 7:case"end":return W.stop()}},c)}));return function(c){return d.apply(this,arguments)}}(),layoutType:"ModalForm",rowProps:{gutter:[16,16]},colProps:{span:12},grid:!0},L))},Me=function(r,l){return(0,e.jsx)("div",{className:"durians_table_pro_action",children:J.map(function(o,d){return(0,e.jsxs)(N.Fragment,{children:[(0,e.jsx)(o,{record:l}),J.length>1&&d<J.length-1?(0,e.jsx)(xe.Z,{type:"vertical"}):null]},d)})})},ie=function(r){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},o={};o[D]=r,v(F,o,function(d){var c;V.ZP.success(g(d)),(c=U.current)===null||c===void 0||c.reload(),U.current.clearSelected(),l()})};return(0,e.jsx)(pe.Z,i()(i()({defaultSize:"small",scroll:{x:"100%"},rowSelection:{selections:[_.Z.SELECTION_ALL,_.Z.SELECTION_INVERT]},tableAlertRender:function(r){var l=r.selectedRowKeys,o=r.selectedRows,d=r.onCleanSelected;return console.log(l,o),(0,e.jsx)(ee.Z,{size:24,children:(0,e.jsxs)("span",{children:["\u5DF2\u9009 ",l.length," \u9879",(0,e.jsx)("a",{style:{marginInlineStart:8},onClick:d,children:"\u53D6\u6D88\u9009\u62E9"})]})})},tableAlertOptionRender:function(r){var l=r.selectedRowKeys,o=r.selectedRows,d=r.onCleanSelected;return(0,e.jsx)(ee.Z,{size:16,children:F?(0,e.jsx)(ae,{title:"\u662F\u5426\u786E\u5B9A\u5220\u9664\uFF1F",Content:function(){return"\u786E\u5B9A\u5220\u9664\uFF1F"},handleOk:function(R){ie(l,function(){R()})},children:(0,e.jsx)(ne.ZP,{size:"small",icon:(0,e.jsx)(fe.Z,{}),danger:!0,children:"\u6279\u91CF\u5220\u9664"},"danger")}):null})},actionRef:U,request:function(){var a=H()(A()().mark(function r(l,o,d){var c,R;return A()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return console.log(777,v,o,l,d),c=null,R={},R[x.pageIndex]=l.current,R[x.pageSize]=l.pageSize,C.next=7,v(S,i()(i()({},R),l),function(b){console.log(b),c=b});case 7:return C.abrupt("return",Promise.resolve({data:K(c),success:!0,total:Z(c)}));case 8:case"end":return C.stop()}},r)}));return function(r,l,o){return a.apply(this,arguments)}}(),editable:{type:"multiple"},columnsState:{persistenceKey:"pro-table-singe-demos",persistenceType:"localStorage",defaultValue:{option:{fixed:"right",disable:!0}},onChange:function(r){console.log("value: ",r)}},rowKey:"id",options:{setting:{listsHeight:400}},form:{syncToUrl:!1},pagination:{pageSize:10,onChange:function(r){return console.log(r)}},dateFormatter:"string"},h),{},{columns:[].concat($()(h.columns),$()(J.length?[{title:"\u64CD\u4F5C",dataIndex:"actionTablePro",fixed:"right",actionWidth:y,render:Me}]:[])),search:h.search?i()({labelWidth:"auto",span:4,defaultCollapsed:!1},h.search||{}):{labelWidth:"auto"},toolBarRender:function(){return[].concat($()(u?[(0,e.jsx)(le,{children:(0,e.jsx)(ne.ZP,{icon:(0,e.jsx)(ve.Z,{}),type:"primary",children:"\u65B0\u5EFA"},"button")})]:[]),$()(h.toolBarRender||[]))}}))},Pe=ye,Ce=n(5574),re=n.n(Ce),Ae=n(85576),Se=function(t){var p=t.title,v=p===void 0?"\u57FA\u7840":p,j=t.handleOk,S=j===void 0?function(m){m()}:j,u=t.Content,B=u===void 0?function(){return(0,e.jsx)("div",{children:"\u793A\u4F8B"})}:u,F=t.children,O=F===void 0?(0,e.jsx)("div",{children:"\u70B9\u51FB"}):F,D=t.fieldProps,E=D===void 0?{}:D,L=(0,N.useState)(!1),I=re()(L,2),y=I[0],P=I[1],h=function(){P(!0)},T=function(){S(function(){P(!1)})},K=function(){P(!1)};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{onClick:h,children:O}),(0,e.jsx)(Ae.Z,i()(i()({title:v,open:y,onOk:T,onCancel:K},E),{},{children:(0,e.jsx)(B,{isModalOpen:y,setIsModalOpen:P})}))]})},ae=Se,Te=n(87547),oe=n(94149),Ze=n(24454),Re=n(68262),X=n(5966),$e=n(16434),Be=n(63434),Oe=n(9361),Y=n(56140),Ee=n(81354),se=n.n(Ee),Le=n(62291),Ie=function(t){var p=t.ajax,v=p===void 0?te:p,j=t.url,S=t.captchaUrl,u=t.loginFormFieldProps,B=t.hasSmsLogin,F=B===void 0?!1:B,O=t.hasAccountLogin,D=O===void 0?!0:O,E=t.phoneField,L=E===void 0?"mobile":E,I=Oe.Z.useToken(),y=I.token,P=(0,N.useState)("account"),h=re()(P,2),T=h[0],K=h[1],m=(0,N.useRef)();return(0,e.jsx)("div",{style:{backgroundColor:y.colorBgContainer},className:"crm_login_body",children:(0,e.jsxs)(Re.U,i()(i()({formRef:m,title:"\u767B\u5F55",subTitle:"\u6B22\u8FCE\u767B\u5F55\u7CFB\u7EDF",initialValues:{username:"",password:""},onFinish:function(){var Z=H()(A()().mark(function s(g){var f,z;return A()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,m.current.validateFields();case 2:return f=x.sent,f&&(z=i()({},g),z.password=se().SHA256(g.password).toString(se().enc.Base64),v(j,z,function(U){(0,Le.ok)("token",U.data)},!1)),x.abrupt("return",!0);case 5:case"end":return x.stop()}},s)}));return function(s){return Z.apply(this,arguments)}}()},u),{},{children:[(0,e.jsxs)(Y.Z,{centered:!0,activeKey:T,onChange:function(s){return K(s)},children:[(0,e.jsx)(Y.Z.TabPane,{tab:"\u8D26\u53F7\u5BC6\u7801\u767B\u5F55",disabled:!D},"account"),(0,e.jsx)(Y.Z.TabPane,{tab:"\u624B\u673A\u53F7\u767B\u5F55",disabled:!F},"phone")]}),T==="account"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(X.Z,{name:"username",fieldProps:{size:"large",prefix:(0,e.jsx)(Te.Z,{className:"prefixIcon"})},placeholder:"\u7528\u6237\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"}]}),(0,e.jsx)(X.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,e.jsx)(oe.Z,{className:"prefixIcon"}),strengthText:"\u5BC6\u7801\u5E94\u5305\u542B\u6570\u5B57\u3001\u5B57\u6BCD\u548C\u7279\u6B8A\u5B57\u7B26\uFF0C\u957F\u5EA6\u81F3\u5C11\u4E3A8\u4E2A\u5B57\u7B26",statusRender:function(s){var g=function(){return s&&s.length>12?"ok":s&&s.length>6?"pass":"poor"},f=g();return f==="pass"?(0,e.jsx)("div",{style:{color:y.colorWarning},children:"\u5F3A\u5EA6\uFF1A\u4E2D"}):f==="ok"?(0,e.jsx)("div",{style:{color:y.colorSuccess},children:"\u5F3A\u5EA6\uFF1A\u5F3A"}):(0,e.jsx)("div",{style:{color:y.colorError},children:"\u5F3A\u5EA6\uFF1A\u5F31"})}},placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"}]})]}),T==="phone"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(X.Z,{fieldProps:{size:"large",prefix:(0,e.jsx)(Ze.Z,{className:"prefixIcon"})},name:L,placeholder:"\u624B\u673A\u53F7",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\uFF01"},{pattern:/^1\d{10}$/,message:"\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF\uFF01"}]}),(0,e.jsx)($e.Z,{fieldProps:{size:"large",prefix:(0,e.jsx)(oe.Z,{className:"prefixIcon"})},captchaProps:{size:"large"},placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",captchaTextRender:function(s,g){return s?"".concat(g," ","\u83B7\u53D6\u9A8C\u8BC1\u7801"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"},phoneName:L,name:"captcha",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01"}],onGetCaptcha:function(){var Z=H()(A()().mark(function s(g){var f;return A()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:f={},f[L]=g,v(S,i()({},f),function(x){V.ZP.success("\u9A8C\u8BC1\u7801\u5DF2\u53D1\u9001\uFF0C\u8BF7\u67E5\u770B\u624B\u673A\u77ED\u4FE1")});case 3:case"end":return M.stop()}},s)}));return function(s){return Z.apply(this,arguments)}}()})]}),(0,e.jsxs)("div",{style:{marginBlockEnd:24},children:[(0,e.jsx)(Be.Z,{noStyle:!0,name:"autoLogin",children:"\u81EA\u52A8\u767B\u5F55"}),(0,e.jsx)("a",{style:{float:"right"},children:"\u5FD8\u8BB0\u5BC6\u7801"})]})]}))})},ze=Ie},42480:function(){},24654:function(){}}]);
