---
title: æ¶æ„è®¾è®¡
order: 1
nav:
  title: æ¶æ„è®¾è®¡
  order: 1
---

# æ¶æ„è®¾è®¡ä¸å¼€å‘æŒ‡å—

## ğŸ—ï¸ äº§å“æ¶æ„

### é¡¹ç›®å®šä½

Durians æ˜¯ä¸€ä¸ªåŸºäº Ant Design Pro çš„ä¼ä¸šçº§ä½ä»£ç ç»„ä»¶åº“ï¼Œæ—¨åœ¨ä¸ºä¼ä¸šçº§åº”ç”¨æä¾›å¼€ç®±å³ç”¨çš„é«˜çº§ç»„ä»¶ï¼Œå‡å°‘é‡å¤å¼€å‘ï¼Œæå‡å¼€å‘æ•ˆç‡ã€‚

### æ ¸å¿ƒä»·å€¼

- **å¼€ç®±å³ç”¨**ï¼šæä¾›å®Œæ•´çš„ CRUD åŠŸèƒ½ç»„ä»¶ï¼Œæ— éœ€é‡å¤å¼€å‘
- **ä¼ä¸šçº§**ï¼šåŸºäº Ant Design Proï¼Œæ»¡è¶³ä¼ä¸šçº§åº”ç”¨éœ€æ±‚
- **ä½ä»£ç **ï¼šé€šè¿‡é…ç½®åŒ–çš„æ–¹å¼å¿«é€Ÿæ„å»ºå¤æ‚åŠŸèƒ½
- **ç±»å‹å®‰å…¨**ï¼šå®Œæ•´çš„ TypeScript æ”¯æŒï¼Œæä¾›ç±»å‹å®‰å…¨ä¿éšœ
- **å¯æ‰©å±•**ï¼šçµæ´»çš„é…ç½®é€‰é¡¹ï¼Œæ”¯æŒè‡ªå®šä¹‰æ‰©å±•

### ç»„ä»¶ä½“ç³»

#### æ ¸å¿ƒç»„ä»¶åŠŸèƒ½çŸ©é˜µ

| ç»„ä»¶ | ä¸»è¦åŠŸèƒ½ | é€‚ç”¨åœºæ™¯ | æ ¸å¿ƒç‰¹æ€§ |
|------|----------|----------|----------|
| TablePro | æ•°æ®è¡¨æ ¼å±•ç¤ºä¸æ“ä½œ | æ•°æ®ç®¡ç†é¡µé¢ | CRUDã€åˆ†é¡µã€æœç´¢ã€æ’åº |
| FormPro | è¡¨å•æ•°æ®å½•å…¥ | æ–°å¢/ç¼–è¾‘æ•°æ® | æ¨¡æ€æ¡†/æŠ½å±‰ã€éªŒè¯ã€è”åŠ¨ |
| ModalPro | å¼¹çª—äº¤äº’ | ç¡®è®¤æ“ä½œã€ä¿¡æ¯å±•ç¤º | è‡ªå®šä¹‰å†…å®¹ã€å›è°ƒæ§åˆ¶ |
| LoginPro | ç”¨æˆ·è®¤è¯ | ç™»å½•é¡µé¢ | å¤šç§ç™»å½•æ–¹å¼ã€åŠ å¯† |
| TreePro | æ ‘å½¢æ•°æ®å±•ç¤º | ç»„ç»‡æ¶æ„ã€åˆ†ç±»ç®¡ç† | æ‡’åŠ è½½ã€CRUDã€é€‰æ‹© |

## ğŸ”§ æŠ€æœ¯æ¶æ„

### æŠ€æœ¯æ ˆé€‰æ‹©

#### æ ¸å¿ƒæŠ€æœ¯æ ˆ

- **React 18**: ç°ä»£åŒ–çš„å‰ç«¯æ¡†æ¶ï¼Œæ”¯æŒå¹¶å‘ç‰¹æ€§
- **TypeScript**: ç±»å‹å®‰å…¨ï¼Œæå‡å¼€å‘ä½“éªŒå’Œä»£ç è´¨é‡
- **Ant Design 5.x**: ä¼ä¸šçº§ UI è®¾è®¡è¯­è¨€å’Œç»„ä»¶åº“
- **Ant Design Pro Components**: é«˜çº§ä¸šåŠ¡ç»„ä»¶

#### æ„å»ºå·¥å…·é“¾

- **Father 4.x**: åŸºäº Rollup çš„ç»„ä»¶åº“æ„å»ºå·¥å…·
- **Dumi 2.x**: ç»„ä»¶åº“æ–‡æ¡£ç”Ÿæˆå·¥å…·
- **Jest**: å•å…ƒæµ‹è¯•æ¡†æ¶
- **ESLint + Prettier**: ä»£ç è´¨é‡å’Œæ ¼å¼åŒ–å·¥å…·

### è®¾è®¡åŸåˆ™

#### 1. å•ä¸€èŒè´£åŸåˆ™
æ¯ä¸ªç»„ä»¶åªè´Ÿè´£ä¸€ä¸ªç‰¹å®šçš„åŠŸèƒ½é¢†åŸŸï¼Œä¿æŒç»„ä»¶çš„ç®€æ´å’Œä¸“æ³¨ã€‚

#### 2. å¼€æ”¾å°é—­åŸåˆ™
ç»„ä»¶å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å°é—­ã€‚é€šè¿‡ props é…ç½®å®ç°åŠŸèƒ½æ‰©å±•ã€‚

#### 3. ä¾èµ–å€’ç½®åŸåˆ™
é«˜å±‚æ¨¡å—ä¸ä¾èµ–ä½å±‚æ¨¡å—ï¼Œéƒ½ä¾èµ–äºæŠ½è±¡ã€‚é€šè¿‡æ¥å£å’Œç±»å‹å®šä¹‰å®ç°è§£è€¦ã€‚

#### 4. æœ€å°æƒŠè®¶åŸåˆ™
ç»„ä»¶çš„è¡Œä¸ºåº”è¯¥ç¬¦åˆç”¨æˆ·çš„ç›´è§‰å’Œé¢„æœŸï¼ŒAPI è®¾è®¡ç®€æ´æ˜äº†ã€‚

#### 5. æ¸è¿›å¼å¢å¼º
æä¾›åˆç†çš„é»˜è®¤å€¼ï¼Œæ”¯æŒé€æ­¥é…ç½®å’Œå®šåˆ¶ã€‚

### æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

#### 1. ç»„ä»¶çº§ä¼˜åŒ–
- ä½¿ç”¨ `React.memo` é¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“
- åˆç†ä½¿ç”¨ `useCallback` å’Œ `useMemo`
- é¿å…åœ¨æ¸²æŸ“å‡½æ•°ä¸­åˆ›å»ºå¯¹è±¡

#### 2. æ•°æ®å¤„ç†ä¼˜åŒ–
- å®ç°é˜²æŠ–å’ŒèŠ‚æµæœºåˆ¶
- æ”¯æŒè™šæ‹Ÿæ»šåŠ¨ï¼ˆå¤§æ•°æ®é‡åœºæ™¯ï¼‰
- æ™ºèƒ½åˆ†é¡µå’Œæ‡’åŠ è½½

#### 3. ç½‘ç»œè¯·æ±‚ä¼˜åŒ–
- è¯·æ±‚å»é‡å’Œç¼“å­˜
- é”™è¯¯é‡è¯•æœºåˆ¶
- è¯·æ±‚å–æ¶ˆæ”¯æŒ

### å¯æ‰©å±•æ€§è®¾è®¡

#### 1. æ’ä»¶åŒ–æ¶æ„
æ”¯æŒé€šè¿‡æ’ä»¶æ‰©å±•ç»„ä»¶åŠŸèƒ½ï¼Œä¸ä¿®æ”¹æ ¸å¿ƒä»£ç ã€‚

#### 2. ä¸»é¢˜ç³»ç»Ÿ
æ”¯æŒä¸»é¢˜å®šåˆ¶å’ŒåŠ¨æ€åˆ‡æ¢ã€‚

#### 3. å›½é™…åŒ–æ”¯æŒ
å†…ç½®å›½é™…åŒ–æœºåˆ¶ï¼Œæ”¯æŒå¤šè¯­è¨€ã€‚

#### 4. è‡ªå®šä¹‰æ¸²æŸ“
æ”¯æŒè‡ªå®šä¹‰æ¸²æŸ“å‡½æ•°ï¼Œæ»¡è¶³ç‰¹æ®Šéœ€æ±‚ã€‚

## ğŸ“Š è´¨é‡ä¿éšœ

### ä»£ç è´¨é‡
- TypeScript ç±»å‹æ£€æŸ¥
- ESLint ä»£ç è§„èŒƒæ£€æŸ¥
- Prettier ä»£ç æ ¼å¼åŒ–
- Husky Git Hooks

### æµ‹è¯•ç­–ç•¥
- å•å…ƒæµ‹è¯•ï¼šJest + React Testing Library
- é›†æˆæµ‹è¯•ï¼šç»„ä»¶é—´äº¤äº’æµ‹è¯•
- E2E æµ‹è¯•ï¼šç”¨æˆ·åœºæ™¯æµ‹è¯•
- è§†è§‰å›å½’æµ‹è¯•ï¼šUI ä¸€è‡´æ€§æµ‹è¯•

### æ–‡æ¡£ä½“ç³»
- API æ–‡æ¡£ï¼šè‡ªåŠ¨ç”Ÿæˆçš„æ¥å£æ–‡æ¡£
- ä½¿ç”¨æŒ‡å—ï¼šè¯¦ç»†çš„ä½¿ç”¨è¯´æ˜
- æœ€ä½³å®è·µï¼šå¼€å‘å»ºè®®å’Œè§„èŒƒ
- å˜æ›´æ—¥å¿—ï¼šç‰ˆæœ¬æ›´æ–°è®°å½•

## ğŸš€ æœªæ¥è§„åˆ’

### çŸ­æœŸç›®æ ‡ï¼ˆ3ä¸ªæœˆï¼‰
- å®Œå–„ç°æœ‰ç»„ä»¶åŠŸèƒ½
- æå‡æµ‹è¯•è¦†ç›–ç‡
- ä¼˜åŒ–æ€§èƒ½å’Œä½“éªŒ

### ä¸­æœŸç›®æ ‡ï¼ˆ6ä¸ªæœˆï¼‰
- æ‰©å±•ç»„ä»¶åº“è§„æ¨¡
- æ”¯æŒæ›´å¤šä¸šåŠ¡åœºæ™¯
- å»ºç«‹è®¾è®¡ç³»ç»Ÿ

### é•¿æœŸç›®æ ‡ï¼ˆ1å¹´ï¼‰
- æ„å»ºå®Œæ•´çš„ä½ä»£ç å¹³å°
- æ”¯æŒå¯è§†åŒ–é…ç½®
- å»ºç«‹ç”Ÿæ€ç³»ç»Ÿ

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### ç¯å¢ƒå‡†å¤‡

ç¡®ä¿ä½ çš„å¼€å‘ç¯å¢ƒæ»¡è¶³ä»¥ä¸‹è¦æ±‚ï¼š

- **Node.js**: >= 16.0.0
- **npm**: >= 7.0.0 æˆ– **yarn**: >= 1.22.0
- **Git**: æœ€æ–°ç‰ˆæœ¬

### é¡¹ç›®åˆå§‹åŒ–

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/aiyuekuang/durians.git
cd durians

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

### å¼€å‘æµç¨‹

#### 1. åˆ›å»ºæ–°ç»„ä»¶

```bash
# åˆ›å»ºç»„ä»¶ç›®å½•
mkdir src/components/YourComponent
cd src/components/YourComponent

# åˆ›å»ºå¿…è¦æ–‡ä»¶
touch index.tsx index.md index.less
```

#### 2. ç»„ä»¶å¼€å‘è§„èŒƒ

```typescript
// src/components/YourComponent/index.tsx
import React, { memo, useCallback, useMemo } from 'react';
import type { YourComponentProps } from '../../types';

const YourComponent: React.FC<YourComponentProps> = memo(({
  // props è§£æ„
}) => {
  // ä½¿ç”¨ useCallback ä¼˜åŒ–å›è°ƒå‡½æ•°
  const handleClick = useCallback(() => {
    // å¤„ç†é€»è¾‘
  }, []);

  // ä½¿ç”¨ useMemo ä¼˜åŒ–è®¡ç®—
  const computedValue = useMemo(() => {
    // è®¡ç®—é€»è¾‘
  }, []);

  return (
    <div className="durians-your-component">
      {/* ç»„ä»¶ JSX */}
    </div>
  );
});

YourComponent.displayName = 'YourComponent';

export default YourComponent;
```

#### 3. ç±»å‹å®šä¹‰

```typescript
// src/types/index.ts
export interface YourComponentProps {
  /** ç»„ä»¶å±æ€§æè¿° */
  prop1?: string;
  /** å›è°ƒå‡½æ•° */
  onCallback?: (value: any) => void;
}
```

### æœ€ä½³å®è·µ

#### 1. æ€§èƒ½ä¼˜åŒ–

```typescript
// âœ… æ¨èï¼šä½¿ç”¨ memo é¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“
const Component = memo<ComponentProps>(({ data, onCallback }) => {
  // ç¼“å­˜å›è°ƒå‡½æ•°
  const handleClick = useCallback(() => {
    onCallback?.();
  }, [onCallback]);

  // ç¼“å­˜è®¡ç®—ç»“æœ
  const processedData = useMemo(() => {
    return data.map(item => ({ ...item, processed: true }));
  }, [data]);

  return <div>{/* ç»„ä»¶å†…å®¹ */}</div>;
});
```

#### 2. é”™è¯¯å¤„ç†

```typescript
// ç»Ÿä¸€é”™è¯¯å¤„ç†
import { useErrorHandler } from '../hooks/useErrorHandler';

const Component = () => {
  const { error, handleError, clearError } = useErrorHandler();

  const handleSubmit = async (data: any) => {
    try {
      await submitData(data);
    } catch (err) {
      handleError(err, 'æäº¤å¤±è´¥');
    }
  };

  return (
    <div>
      {error && (
        <Alert
          message={error}
          type="error"
          closable
          onClose={clearError}
        />
      )}
      {/* ç»„ä»¶å†…å®¹ */}
    </div>
  );
};
```

#### 3. ç±»å‹å®‰å…¨

```typescript
// ä¸¥æ ¼çš„ç±»å‹å®šä¹‰
interface StrictComponentProps<T = any> {
  data: T[];
  columns: ColumnConfig<T>[];
  onRowClick?: (record: T, index: number) => void;
}

// æ³›å‹ç»„ä»¶
const TableComponent = <T extends Record<string, any>>(
  props: StrictComponentProps<T>
) => {
  // ç»„ä»¶å®ç°
};
```

### ä»£ç è§„èŒƒ

#### 1. å‘½åè§„èŒƒ

- **ç»„ä»¶å**: ä½¿ç”¨ PascalCaseï¼Œå¦‚ `TablePro`
- **æ–‡ä»¶å**: ç»„ä»¶æ–‡ä»¶ä½¿ç”¨ `index.tsx`
- **ç±»å‹å**: ç»„ä»¶ Props ä½¿ç”¨ `ComponentNameProps`
- **æ ·å¼ç±»**: ä½¿ç”¨ BEM å‘½åè§„èŒƒ

#### 2. æ–‡ä»¶ç»„ç»‡

```
src/components/YourComponent/
â”œâ”€â”€ index.tsx              # ä¸»ç»„ä»¶æ–‡ä»¶
â”œâ”€â”€ index.md               # ç»„ä»¶æ–‡æ¡£
â”œâ”€â”€ index.less             # ç»„ä»¶æ ·å¼
â”œâ”€â”€ hooks/                 # è‡ªå®šä¹‰ Hooks
â”œâ”€â”€ components/            # å­ç»„ä»¶
â”œâ”€â”€ types.ts               # ç±»å‹å®šä¹‰
â”œâ”€â”€ constants.ts           # å¸¸é‡å®šä¹‰
â”œâ”€â”€ utils.ts               # å·¥å…·å‡½æ•°
â””â”€â”€ __tests__/             # æµ‹è¯•æ–‡ä»¶
```

#### 3. æäº¤è§„èŒƒ

```bash
# Commit Message æ ¼å¼
<type>[optional scope]: <description>

# ç±»å‹è¯´æ˜
feat: æ–°åŠŸèƒ½
fix: ä¿®å¤ bug
docs: æ–‡æ¡£æ›´æ–°
style: ä»£ç æ ¼å¼è°ƒæ•´
refactor: ä»£ç é‡æ„
test: æµ‹è¯•ç›¸å…³
chore: æ„å»ºå·¥å…·æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨

# ç¤ºä¾‹
git commit -m "feat(TablePro): æ·»åŠ è™šæ‹Ÿæ»šåŠ¨åŠŸèƒ½"
git commit -m "fix(FormPro): ä¿®å¤è¡¨å•éªŒè¯é—®é¢˜"
```

### æµ‹è¯•æŒ‡å—

#### 1. å•å…ƒæµ‹è¯•

```typescript
import React from 'react';
import { render, screen, fireEvent } from '@testing-library/react';
import userEvent from '@testing-library/user-event';
import Component from '../index';

describe('Component', () => {
  it('should render correctly', () => {
    render(<Component />);
    expect(screen.getByRole('button')).toBeInTheDocument();
  });

  it('should handle click events', async () => {
    const handleClick = jest.fn();
    render(<Component onClick={handleClick} />);

    await userEvent.click(screen.getByRole('button'));
    expect(handleClick).toHaveBeenCalledTimes(1);
  });
});
```

#### 2. è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm run test

# ç›‘å¬æ¨¡å¼
npm run test:watch

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
npm run test:coverage
```

### æ„å»ºå’Œå‘å¸ƒ

```bash
# æ„å»ºç»„ä»¶åº“
npm run build

# æ„å»ºæ–‡æ¡£
npm run docs:build

# å‘å¸ƒåˆ° npm
npm publish
```

## ğŸ”§ å·¥å…·é…ç½®

### ESLint é…ç½®

é¡¹ç›®ä½¿ç”¨ ESLint è¿›è¡Œä»£ç è´¨é‡æ£€æŸ¥ï¼š

```bash
# æ£€æŸ¥ä»£ç 
npm run lint

# è‡ªåŠ¨ä¿®å¤
npm run lint:fix
```

### TypeScript é…ç½®

```json
{
  "compilerOptions": {
    "target": "ES2020",
    "module": "ESNext",
    "moduleResolution": "node",
    "strict": true,
    "jsx": "react-jsx",
    "declaration": true,
    "outDir": "dist"
  }
}
```

### ä¾èµ–ç®¡ç†

#### å‡çº§ç­–ç•¥

1. **å®‰å…¨å‡çº§**ï¼šæ— ç ´åæ€§å˜æ›´çš„ç‰ˆæœ¬
2. **åŠŸèƒ½å‡çº§**ï¼šæ–°å¢åŠŸèƒ½çš„ç‰ˆæœ¬
3. **ä¸»è¦å‡çº§**ï¼šå¯èƒ½æœ‰ç ´åæ€§å˜æ›´çš„ç‰ˆæœ¬

#### å…¼å®¹æ€§æ£€æŸ¥

```bash
# æ£€æŸ¥è¿‡æ—¶çš„ä¾èµ–
npm outdated

# æ›´æ–°ä¾èµ–
npm update

# æ£€æŸ¥å®‰å…¨æ¼æ´
npm audit
```

## ğŸ“š å­¦ä¹ èµ„æº

### å®˜æ–¹æ–‡æ¡£

- [React å®˜æ–¹æ–‡æ¡£](https://react.dev/)
- [TypeScript å®˜æ–¹æ–‡æ¡£](https://www.typescriptlang.org/)
- [Ant Design å®˜æ–¹æ–‡æ¡£](https://ant.design/)
- [Ant Design Pro å®˜æ–¹æ–‡æ¡£](https://pro.ant.design/)

### æ¨èé˜…è¯»

- [React æ€§èƒ½ä¼˜åŒ–](https://react.dev/learn/render-and-commit)
- [TypeScript æœ€ä½³å®è·µ](https://www.typescriptlang.org/docs/handbook/declaration-files/do-s-and-don-ts.html)
- [ç»„ä»¶åº“è®¾è®¡åŸåˆ™](https://ant.design/docs/spec/introduce)

## ğŸ¤ è´¡çŒ®æŒ‡å—

### è´¡çŒ®æµç¨‹

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. æäº¤ä»£ç 
4. åˆ›å»º Pull Request
5. ä»£ç å®¡æŸ¥
6. åˆå¹¶ä»£ç 

### ä»£ç å®¡æŸ¥æ ‡å‡†

- ä»£ç è´¨é‡å’Œè§„èŒƒ
- æµ‹è¯•è¦†ç›–ç‡
- æ–‡æ¡£å®Œæ•´æ€§
- æ€§èƒ½å½±å“
- å‘åå…¼å®¹æ€§

æ¬¢è¿æ‰€æœ‰å½¢å¼çš„è´¡çŒ®ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼š
- æ–°åŠŸèƒ½å¼€å‘
- Bug ä¿®å¤
- æ–‡æ¡£æ”¹è¿›
- æµ‹è¯•ç”¨ä¾‹
- æ€§èƒ½ä¼˜åŒ–
