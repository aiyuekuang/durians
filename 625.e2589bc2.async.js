(self.webpackChunkdurians=self.webpackChunkdurians||[]).push([[625],{87391:function(_e,re,r){"use strict";r.r(re),r.d(re,{FormPro:function(){return ce},LoginPro:function(){return Je},ModalPro:function(){return ie},TablePro:function(){return Ee}});var pe=r(15009),O=r.n(pe),me=r(99289),K=r.n(me),ge=r(97857),a=r.n(ge),xe=r(19632),b=r.n(xe),Fe=r(48689),je=r(24969),Pe=r(61534),ye=r(86738),W=r(45360),Ce=r(96074),te=r(60940),ae=r(42075),Y=r(14726),N=r(67294),Se=r(64599),oe=r.n(Se),$e=r(11238),V=function(n,c,i){var d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,m="";return d&&(m="api"),$e.ZP.post(m+n,{data:c}).then(function(l){l.code==0?i(l):W.ZP.error(l.msg)}).catch(function(l){console.log(l)})},Te=function(n,c){var i=oe()(n),d;try{var m=function(){var g=d.value,v=g.proConfig;g.request||g.valueType==="select"&&(g.request=function(){var T=K()(O()().mark(function R(x,B){var y;return O()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return y=[],console.log(33333,x),u.next=4,c(v.url,a()(a()({},x),typeof v.params=="function"?v.params(x,B):v.params),function(s){console.log(2222,s),y=v.setData(s)});case 4:return u.abrupt("return",y);case 5:case"end":return u.stop()}},R)}));return function(R,x){return T.apply(this,arguments)}}())};for(i.s();!(d=i.n()).done;)m()}catch(l){i.e(l)}finally{i.f()}return n},le=r(89451),Ae=r(5574),k=r.n(Ae),Ze=r(59847),Re=r(54673),e=r(85893),Be=function(n){var c=n.ajax,i=c===void 0?V:c,d=n.fieldProps,m=d.fieldNames,l=d.params,g=l===void 0?function(s){return{}}:l,v=d.url,T=d.setData,R=(0,N.useState)([]),x=k()(R,2),B=x[0],y=x[1];(0,N.useEffect)(function(){u({},a()({},g({})))},[]);function S(s,F,D){var f=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"value",P=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"children",t=(0,Re.Z)(s),C=oe()(t),$;try{for(C.s();!($=C.n()).done;){var I=$.value;I[f]===F?I.children=D:I.children&&(I.children=S(I.children,F,D,f,P))}}catch(z){C.e(z)}finally{C.f()}return t}var u=function(F){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return i(v,a()({},g(F)),function(f){var P=T(f);m&&(P=P.map(function(t){return t.label=t[m.label],t.value=t[m.value],t})),y(function(t){return F.value?S(t,F.value,P):P})})};return(0,e.jsx)(Ze.Z,a()(a()({},n==null?void 0:n.fieldProps),{},{treeDataSimpleMode:!0,style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:"\u8BF7\u9009\u62E9",loadData:u,treeData:B}))},Ie=Be,Oe=function(n){var c=n.children,i=(0,N.useContext)(le.L_);return(0,e.jsx)(le.L_.Provider,{value:a()(a()({},i),{},{valueTypeMap:{treeSelectPro:{renderFormItem:function(m,l){return(0,e.jsx)(Ie,a()({},l))}}}}),children:c})},se=Oe,Le=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:"\u6807\u9898",dataIndex:"title",copyable:!0,ellipsis:!0,tooltip:"\u6807\u9898\u8FC7\u957F\u4F1A\u81EA\u52A8\u6536\u7F29",formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}}],De=function(n){var c=n.ajax,i=c===void 0?V:c,d=n.url,m=d===void 0?"https://proapi.azurewebsites.net/github/issues":d,l=n.addUrl,g=n.editUrl,v=n.deleteUrl,T=n.deleteField,R=T===void 0?"idList":T,x=n.addFormProFieldProps,B=x===void 0?{}:x,y=n.actionWidth,S=y===void 0?100:y,u=n.fieldProps,s=u===void 0?{search:{},columns:Le}:u,F=n.setData,D=F===void 0?function(h){return h.data.records}:F,f=n.setTotal,P=f===void 0?function(h){return h.data.total}:f,t=n.setMsg,C=t===void 0?function(h){return h.msg}:t,$=n.actionBar,I=$===void 0?[]:$,z=n.paginationAlias,E=z===void 0?{pageIndex:"pageIndex",pageSize:"pageSize"}:z,G=n.tableAlertOptionRenderPro,Ye=G===void 0?[]:G,J=(0,N.useRef)(),Q=s.rowKey||"id",X=[].concat(b()(v?[function(h){var o=h.record;return(0,e.jsx)(fe,{record:o,children:(0,e.jsx)("a",{children:"\u7F16\u8F91"})})}]:[]),b()(I),b()(v?[function(h){var o=h.record;return(0,e.jsx)(ye.Z,{title:"\u5220\u9664",description:"\u786E\u5B9A\u5220\u9664\u8FD9\u6761\u6570\u636E\u5417\uFF1F",onConfirm:function(){ve([o[Q]])},okText:"\u662F",cancelText:"\u5426",children:(0,e.jsx)("a",{style:{color:"red"},children:"\u5220\u9664"})})}]:[])),fe=function(o){var j=o.children,p=o.record;return(0,e.jsx)(ce,{fieldProps:a()({initialValues:p,columns:s.columns.map(function(A){return a()(a()({},A),{},{width:"md"})}),onFinish:function(){var A=K()(O()().mark(function L(he){var M,H,ee;return O()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return M=!1,H=l,ee=he,p!=null&&p[Q]&&g&&(ee[Q]=p==null?void 0:p[Q],H=g),w.next=6,i(H,ee,function(qe){var ne;(ne=J.current)===null||ne===void 0||ne.reload(),W.ZP.success(C(qe)),M=!0});case 6:return w.abrupt("return",M);case 7:case"end":return w.stop()}},L)}));function Z(L){return A.apply(this,arguments)}return Z}()},B),children:j})},ke=function(o,j){return(0,e.jsx)("div",{className:"durians_table_pro_action",children:X.map(function(p,A){return(0,e.jsxs)(N.Fragment,{children:[(0,e.jsx)(p,{record:j}),X.length>1&&A<X.length-1?(0,e.jsx)(Ce.Z,{type:"vertical"}):null]},A)})})},ve=function(o){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},p={};p[R]=o,i(v,p,function(A){var Z;W.ZP.success(C(A)),(Z=J.current)===null||Z===void 0||Z.reload(),J.current.clearSelected(),j()})};return(0,e.jsx)(se,{children:(0,e.jsx)(Pe.Z,a()(a()({defaultSize:"small",scroll:{x:"100%"},rowSelection:{selections:[te.Z.SELECTION_ALL,te.Z.SELECTION_INVERT]},tableAlertRender:function(o){var j=o.selectedRowKeys,p=o.selectedRows,A=o.onCleanSelected;return console.log(j,p),(0,e.jsx)(ae.Z,{size:24,children:(0,e.jsxs)("span",{children:["\u5DF2\u9009 ",j.length," \u9879",(0,e.jsx)("a",{style:{marginInlineStart:8},onClick:A,children:"\u53D6\u6D88\u9009\u62E9"})]})})},tableAlertOptionRender:function(o){var j=o.selectedRowKeys,p=o.selectedRows,A=o.onCleanSelected;return(0,e.jsxs)(ae.Z,{size:16,children:[v?(0,e.jsx)(ie,{title:"\u662F\u5426\u786E\u5B9A\u5220\u9664\uFF1F",Content:function(){return"\u786E\u5B9A\u5220\u9664\uFF1F"},handleOk:function(L){ve(j,function(){L()})},children:(0,e.jsx)(Y.ZP,{size:"small",icon:(0,e.jsx)(Fe.Z,{}),danger:!0,children:"\u6279\u91CF\u5220\u9664"},"danger")}):null,Ye.map(function(Z,L){return(0,e.jsx)(Z,{selectedRowKeys:j,selectedRows:p,onCleanSelected:A},L)})]})},actionRef:J,request:function(){var h=K()(O()().mark(function o(j,p,A){var Z,L;return O()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(Z=s.dataSource,L={},L[E.pageIndex]=j.current,L[E.pageSize]=j.pageSize,console.log(777,p,j,A,L),!m){M.next=8;break}return M.next=8,i(m,a()(a()({},L),j),function(H){console.log(H),Z=H});case 8:return M.abrupt("return",Promise.resolve({data:D(Z),success:!0,total:P(Z)}));case 9:case"end":return M.stop()}},o)}));return function(o,j,p){return h.apply(this,arguments)}}(),editable:{type:"multiple"},columnsState:{persistenceKey:"pro-table-singe-demos",persistenceType:"localStorage",defaultValue:{option:{fixed:"right",disable:!0}},onChange:function(o){console.log("value: ",o)}},rowKey:"id",options:{setting:{listsHeight:400}},form:{syncToUrl:!1},pagination:{pageSize:10,onChange:function(o){return console.log(o)}},dateFormatter:"string"},s),{},{columns:[].concat(b()(Te(s.columns,i)),b()(X.length?[{title:"\u64CD\u4F5C",dataIndex:"actionTablePro",fixed:"right",actionWidth:S,render:ke}]:[])),search:s.search?a()({labelWidth:"auto",span:4,defaultCollapsed:!1},s.search||{}):{labelWidth:"auto"},toolBarRender:function(){return[].concat(b()(l?[(0,e.jsx)(fe,{children:(0,e.jsx)(Y.ZP,{icon:(0,e.jsx)(je.Z,{}),type:"primary",children:"\u65B0\u5EFA"},"button")})]:[]),b()(s.toolBarRender||[]))}}))})},Ee=De,Me=r(85576),ze=function(n){var c=n.title,i=c===void 0?"\u57FA\u7840":c,d=n.handleOk,m=d===void 0?function(f){f()}:d,l=n.Content,g=l===void 0?function(){return(0,e.jsx)("div",{children:"\u793A\u4F8B"})}:l,v=n.children,T=v===void 0?(0,e.jsx)("div",{children:"\u70B9\u51FB"}):v,R=n.fieldProps,x=R===void 0?{}:R,B=(0,N.useState)(!1),y=k()(B,2),S=y[0],u=y[1],s=function(){u(!0)},F=function(){m(function(){u(!1)})},D=function(){u(!1)};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{onClick:s,children:T}),(0,e.jsx)(Me.Z,a()(a()({title:i,open:S,onOk:F,onCancel:D},x),{},{children:(0,e.jsx)(g,{isModalOpen:S,setIsModalOpen:u})}))]})},ie=ze,Ne=r(87547),ue=r(94149),be=r(24454),Ue=r(68262),q=r(5966),Ke=r(16434),He=r(63434),We=r(9361),_=r(56140),we=r(81354),de=r.n(we),Ve=r(62291),Ge=function(n){var c=n.ajax,i=c===void 0?V:c,d=n.url,m=n.captchaUrl,l=n.loginFormFieldProps,g=n.hasSmsLogin,v=g===void 0?!1:g,T=n.hasAccountLogin,R=T===void 0?!0:T,x=n.phoneField,B=x===void 0?"mobile":x,y=We.Z.useToken(),S=y.token,u=(0,N.useState)("account"),s=k()(u,2),F=s[0],D=s[1],f=(0,N.useRef)();return(0,e.jsx)("div",{style:{backgroundColor:S.colorBgContainer},className:"crm_login_body",children:(0,e.jsxs)(Ue.U,a()(a()({formRef:f,title:"\u767B\u5F55",subTitle:"\u6B22\u8FCE\u767B\u5F55\u7CFB\u7EDF",initialValues:{username:"",password:""},onFinish:function(){var P=K()(O()().mark(function t(C){var $,I;return O()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,f.current.validateFields();case 2:return $=E.sent,$&&(I=a()({},C),I.password=de().SHA256(C.password).toString(de().enc.Base64),i(d,I,function(G){(0,Ve.ok)("token",G.data)},!1)),E.abrupt("return",!0);case 5:case"end":return E.stop()}},t)}));return function(t){return P.apply(this,arguments)}}()},l),{},{children:[(0,e.jsxs)(_.Z,{centered:!0,activeKey:F,onChange:function(t){return D(t)},children:[(0,e.jsx)(_.Z.TabPane,{tab:"\u8D26\u53F7\u5BC6\u7801\u767B\u5F55",disabled:!R},"account"),(0,e.jsx)(_.Z.TabPane,{tab:"\u624B\u673A\u53F7\u767B\u5F55",disabled:!v},"phone")]}),F==="account"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(q.Z,{name:"username",fieldProps:{size:"large",prefix:(0,e.jsx)(Ne.Z,{className:"prefixIcon"})},placeholder:"\u7528\u6237\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"}]}),(0,e.jsx)(q.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,e.jsx)(ue.Z,{className:"prefixIcon"}),strengthText:"\u5BC6\u7801\u5E94\u5305\u542B\u6570\u5B57\u3001\u5B57\u6BCD\u548C\u7279\u6B8A\u5B57\u7B26\uFF0C\u957F\u5EA6\u81F3\u5C11\u4E3A8\u4E2A\u5B57\u7B26",statusRender:function(t){var C=function(){return t&&t.length>12?"ok":t&&t.length>6?"pass":"poor"},$=C();return $==="pass"?(0,e.jsx)("div",{style:{color:S.colorWarning},children:"\u5F3A\u5EA6\uFF1A\u4E2D"}):$==="ok"?(0,e.jsx)("div",{style:{color:S.colorSuccess},children:"\u5F3A\u5EA6\uFF1A\u5F3A"}):(0,e.jsx)("div",{style:{color:S.colorError},children:"\u5F3A\u5EA6\uFF1A\u5F31"})}},placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"}]})]}),F==="phone"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(q.Z,{fieldProps:{size:"large",prefix:(0,e.jsx)(be.Z,{className:"prefixIcon"})},name:B,placeholder:"\u624B\u673A\u53F7",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\uFF01"},{pattern:/^1\d{10}$/,message:"\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF\uFF01"}]}),(0,e.jsx)(Ke.Z,{fieldProps:{size:"large",prefix:(0,e.jsx)(ue.Z,{className:"prefixIcon"})},captchaProps:{size:"large"},placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",captchaTextRender:function(t,C){return t?"".concat(C," ","\u83B7\u53D6\u9A8C\u8BC1\u7801"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"},phoneName:B,name:"captcha",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01"}],onGetCaptcha:function(){var P=K()(O()().mark(function t(C){var $;return O()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:$={},$[B]=C,i(m,a()({},$),function(E){W.ZP.success("\u9A8C\u8BC1\u7801\u5DF2\u53D1\u9001\uFF0C\u8BF7\u67E5\u770B\u624B\u673A\u77ED\u4FE1")});case 3:case"end":return z.stop()}},t)}));return function(t){return P.apply(this,arguments)}}()})]}),(0,e.jsxs)("div",{style:{marginBlockEnd:24},children:[(0,e.jsx)(He.Z,{noStyle:!0,name:"autoLogin",children:"\u81EA\u52A8\u767B\u5F55"}),(0,e.jsx)("a",{style:{float:"right"},children:"\u5FD8\u8BB0\u5BC6\u7801"})]})]}))})},Je=Ge,Qe=r(77646),Xe=function(n){var c=n.layoutType,i=c===void 0?"ModalForm":c,d=n.fieldProps,m=d===void 0?{}:d,l=n.url,g=n.ajax,v=g===void 0?V:g,T=n.finishFun,R=T===void 0?function(){}:T,x=n.setMsg,B=x===void 0?function(u){return u.msg}:x,y=n.children,S=y===void 0?(0,e.jsx)(Y.ZP,{children:"\u70B9\u51FB\u6211"}):y;return(0,e.jsx)(se,{children:(0,e.jsx)(Qe.Z,a()(a()({trigger:S,layoutType:"ModalForm",onFinish:function(){var u=K()(O()().mark(function s(F){return O()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return console.log(F),f.next=3,v(l,F,function(P){W.ZP.success(B(P)),R()});case 3:case"end":return f.stop()}},s)}));return function(s){return u.apply(this,arguments)}}()},i==="ModalForm"?{modalProps:{destroyOnClose:!0}}:{drawerProps:{destroyOnClose:!0}}),{},{columns:[{title:"\u6807\u9898",dataIndex:"title",formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]},width:"md"}]},m))})},ce=Xe},42480:function(){},24654:function(){}}]);
