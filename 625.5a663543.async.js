(self.webpackChunkdurians=self.webpackChunkdurians||[]).push([[625],{87391:function(tr,ue,n){"use strict";n.r(ue),n.d(ue,{FormPro:function(){return ge},LoginPro:function(){return _e},ModalPro:function(){return he},TablePro:function(){return We}});var Pe=n(15009),K=n.n(Pe),je=n(99289),Q=n.n(je),Se=n(97857),t=n.n(Se),Ce=n(19632),w=n.n(Ce),$e=n(48689),Ae=n(24969),Te=n(61534),Ze=n(86738),Ie=n(96074),_=n(45360),de=n(60940),ce=n(42075),te=n(14726),N=n(67294),Re=n(64599),fe=n.n(Re),Be=n(11238),Oe=n(81354),H=n.n(Oe),ee=function(e,s,a){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,c="";return o&&(c="api"),Be.ZP.post(c+e,{data:s}).then(function(i){i.code==0?a(i):_.ZP.error(i.msg)}).catch(function(i){console.log(i)})},De=function(e,s){var a=fe()(e),o;try{var c=function(){var v=o.value,p=v.proConfig;v.request||(v.valueType==="select"||v.valueType==="treeSelect")&&(v.request=function(){var A=Q()(K()().mark(function E(y,T){var P;return K()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return P=[],u.next=3,s(p.url,t()(t()({},y),typeof p.params=="function"?p.params(y,T):p.params),function(Z){P=p.setData(Z)});case 3:return u.abrupt("return",P);case 4:case"end":return u.stop()}},E)}));return function(E,y){return A.apply(this,arguments)}}())};for(a.s();!(o=a.n()).done;)c()}catch(i){a.e(i)}finally{a.f()}return e},Le=function(e,s,a){var o=H().enc.Utf8.parse(s),c=H().enc.Utf8.parse(a);return H().AES.encrypt(e,o,{mode:H().mode.ECB,padding:H().pad.Pkcs7}).toString()},ar=function(e,s,a){var o=CryptoJS.enc.Utf8.parse(s),c=CryptoJS.enc.Utf8.parse(a);return CryptoJS.AES.decrypt(e,o,{mode:CryptoJS.mode.ECB,padding:CryptoJS.pad.Pkcs7})},ve=n(89451),Ee=n(5574),ae=n.n(Ee),Me=n(59847),be=n(54673),r=n(85893),ze=function(e){var s=e.ajax,a=s===void 0?ee:s,o=e.fieldProps,c=o.fieldNames,i=o.params,v=i===void 0?function(Z){return{}}:i,p=o.url,A=o.setData,E=(0,N.useState)([]),y=ae()(E,2),T=y[0],P=y[1];(0,N.useEffect)(function(){u({},t()({},v({})))},[]);function z(Z,x,I){var h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"value",M=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"children",f=(0,be.Z)(Z),j=fe()(f),b;try{for(j.s();!(b=j.n()).done;){var R=b.value;R[h]===x?R.children=I:R.children&&(R.children=z(R.children,x,I,h,M))}}catch(V){j.e(V)}finally{j.f()}return f}var u=function(x){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return a(p,t()({},v(x)),function(h){var M=A(h);c&&(M=M.map(function(f){return f.label=f[c.label],f.value=f[c.value],f})),P(function(f){return x.value?z(f,x.value,M):M})})};return(0,r.jsx)(Me.Z,t()(t()({},e==null?void 0:e.fieldProps),{},{treeDataSimpleMode:!0,style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:"\u8BF7\u9009\u62E9",loadData:u,treeData:T}))},Ue=ze,Ke=function(e){var s=e.children,a=(0,N.useContext)(ve.L_);return(0,r.jsx)(ve.L_.Provider,{value:t()(t()({},a),{},{valueTypeMap:{treeSelectPro:{renderFormItem:function(c,i){return(0,r.jsx)(Ue,t()({},i))}}}}),children:s})},pe=Ke,Ne=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:"\u6807\u9898",dataIndex:"title",copyable:!0,ellipsis:!0,tooltip:"\u6807\u9898\u8FC7\u957F\u4F1A\u81EA\u52A8\u6536\u7F29",formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}}],He=function(e){var s=e.ajax,a=s===void 0?ee:s,o=e.url,c=o===void 0?"https://proapi.azurewebsites.net/github/issues":o,i=e.addUrl,v=e.editUrl,p=e.deleteUrl,A=e.deleteFields,E=A===void 0?"idList":A,y=e.deleteField,T=y===void 0?null:y,P=e.deleteFieldIsArr,z=P===void 0?!1:P,u=e.deleteParams,Z=u===void 0?{}:u,x=e.addFormProFieldProps,I=x===void 0?{}:x,h=e.actionWidth,M=h===void 0?100:h,f=e.fieldProps,j=f===void 0?{search:{},columns:Ne}:f,b=e.setData,R=b===void 0?function(m){return m.data.records}:b,V=e.setTotal,re=V===void 0?function(m){return m.data.total}:V,G=e.setMsg,ie=G===void 0?function(m){return m.msg}:G,Y=e.actionBar,ne=Y===void 0?[]:Y,B=e.paginationAlias,d=B===void 0?{pageIndex:"pageIndex",pageSize:"pageSize"}:B,O=e.tableAlertOptionRenderPro,D=O===void 0?[]:O,J=(0,N.useRef)(),C=j.rowKey||"id",q=[].concat(w()(p?[function(m){var l=m.record;return(0,r.jsx)(xe,{record:l,children:(0,r.jsx)("a",{children:"\u7F16\u8F91"})})}]:[]),w()(ne),w()(p?[function(m){var l=m.record;return(0,r.jsx)(Ze.Z,{title:"\u5220\u9664",description:"\u786E\u5B9A\u5220\u9664\u8FD9\u6761\u6570\u636E\u5417\uFF1F",onConfirm:function(){Fe([l[C]],function(){},!1)},okText:"\u662F",cancelText:"\u5426",children:(0,r.jsx)("a",{style:{color:"red"},children:"\u5220\u9664"})})}]:[])),xe=function(l){var F=l.children,g=l.record,S=i,$={};return g!=null&&g[C]&&v&&($[C]=g==null?void 0:g[C],S=v),(0,r.jsx)(ge,t()(t()({ajax:a},I),{},{url:S,finishFun:function(){var W;(W=J.current)===null||W===void 0||W.reload()},fieldProps:t()({initialValues:g,columns:j.columns.map(function(L){return t()(t()({},L),{},{width:null})}),title:"\u65B0\u589E"},I.fieldProps),children:F}))},nr=function(l,F){return(0,r.jsx)("div",{className:"durians_table_pro_action",children:q.map(function(g,S){return(0,r.jsxs)(N.Fragment,{children:[(0,r.jsx)(g,{record:F}),q.length>1&&S<q.length-1?(0,r.jsx)(Ie.Z,{type:"vertical"}):null]},S)})})},Fe=function(l){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,S=l;!z&&!g&&(S=l[0]);var $=t()({},Z);g?$[E]=S:T?$[T]=S:$[j.rowKey||"id"]=S,a(p,$,function(L){var W;_.ZP.success(ie(L)),(W=J.current)===null||W===void 0||W.reload(),J.current.clearSelected(),F()})};return(0,r.jsx)(pe,{children:(0,r.jsx)(Te.Z,t()(t()({defaultSize:"small",scroll:{x:"100%"},rowSelection:{selections:[de.Z.SELECTION_ALL,de.Z.SELECTION_INVERT]},tableAlertRender:function(l){var F=l.selectedRowKeys,g=l.selectedRows,S=l.onCleanSelected;return console.log(F,g),(0,r.jsx)(ce.Z,{size:24,children:(0,r.jsxs)("span",{children:["\u5DF2\u9009 ",F.length," \u9879",(0,r.jsx)("a",{style:{marginInlineStart:8},onClick:S,children:"\u53D6\u6D88\u9009\u62E9"})]})})},tableAlertOptionRender:function(l){var F=l.selectedRowKeys,g=l.selectedRows,S=l.onCleanSelected;return(0,r.jsxs)(ce.Z,{size:16,children:[p?(0,r.jsx)(he,{title:"\u662F\u5426\u786E\u5B9A\u5220\u9664\uFF1F",Content:function(){return"\u786E\u5B9A\u5220\u9664\uFF1F"},handleOk:function(L){Fe(F,function(){L()})},children:(0,r.jsx)(te.ZP,{size:"small",icon:(0,r.jsx)($e.Z,{}),danger:!0,children:"\u6279\u91CF\u5220\u9664"},"danger")}):null,D.map(function($,L){return(0,r.jsx)($,{selectedRowKeys:F,selectedRows:g,onCleanSelected:S},L)})]})},actionRef:J,request:function(){var m=Q()(K()().mark(function l(F,g,S){var $,L;return K()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if($=j.dataSource,L={},L[d.pageIndex]=F.current,L[d.pageSize]=F.pageSize,console.log(777,g,F,S,L),!c){k.next=8;break}return k.next=8,a(c,t()(t()({},L),F),function(ye){console.log(ye),$=ye});case 8:return k.abrupt("return",Promise.resolve({data:R($),success:!0,total:re($)}));case 9:case"end":return k.stop()}},l)}));return function(l,F,g){return m.apply(this,arguments)}}(),editable:{type:"multiple"},columnsState:{persistenceKey:"pro-table-singe-demos",persistenceType:"localStorage",defaultValue:{option:{fixed:"right",disable:!0}},onChange:function(l){console.log("value: ",l)}},rowKey:"id",options:{setting:{listsHeight:400}},form:{syncToUrl:!1},pagination:{pageSize:10,onChange:function(l){return console.log(l)}},dateFormatter:"string"},j),{},{columns:[].concat(w()(De(j.columns,a)),w()(q.length?[{title:"\u64CD\u4F5C",dataIndex:"actionTablePro",fixed:"right",hideInSearch:!0,actionWidth:M,render:nr}]:[])),search:j.search?t()({labelWidth:"auto",span:4,defaultCollapsed:!1},j.search||{}):{labelWidth:"auto"},toolBarRender:function(){return[].concat(w()(i?[(0,r.jsx)(xe,{children:(0,r.jsx)(te.ZP,{icon:(0,r.jsx)(Ae.Z,{}),type:"primary",children:"\u65B0\u5EFA"},"button")})]:[]),w()(j.toolBarRender||[]))}}))})},We=He,we=n(85576),Je=function(e){var s=e.title,a=s===void 0?"\u57FA\u7840":s,o=e.handleOk,c=o===void 0?function(h){h()}:o,i=e.Content,v=i===void 0?function(){return(0,r.jsx)("div",{children:"\u793A\u4F8B"})}:i,p=e.children,A=p===void 0?(0,r.jsx)("div",{children:"\u70B9\u51FB"}):p,E=e.fieldProps,y=E===void 0?{}:E,T=(0,N.useState)(!1),P=ae()(T,2),z=P[0],u=P[1],Z=function(){u(!0)},x=function(){c(function(){u(!1)})},I=function(){u(!1)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{onClick:Z,children:A}),(0,r.jsx)(we.Z,t()(t()({title:a,open:z,onOk:x,onCancel:I},y),{},{children:(0,r.jsx)(v,{isModalOpen:z,setIsModalOpen:u})}))]})},he=Je,Ve=n(87547),me=n(94149),Ge=n(24454),ke=n(68262),oe=n(5966),Qe=n(16434),Xe=n(63434),Ye=n(9361),le=n(56140),X=n(99191),or=(0,X.df)([{id:"SHA256",fun:function(e){return H().SHA256(e).toString(H().enc.Base64)}},{id:"MD5",fun:function(e){return H().MD5(e).toString(H().enc.Hex)}}]),se="autoLogin",qe=function(e){var s=e.ajax,a=s===void 0?ee:s,o=e.url,c=e.captchaUrl,i=e.loginFormFieldProps,v=e.hasSmsLogin,p=v===void 0?!1:v,A=e.hasAccountLogin,E=A===void 0?!0:A,y=e.phoneField,T=y===void 0?"mobile":y,P=e.extraPasswordText,z=P===void 0?"":P,u=e.secretKey,Z=u===void 0?"":u,x=e.setData,I=x===void 0?function(B){return B.data}:x,h=e.tokenField,M=h===void 0?"token":h,f=e.callback,j=f===void 0?function(){}:f,b=Ye.Z.useToken(),R=b.token,V=(0,N.useState)("account"),re=ae()(V,2),G=re[0],ie=re[1],Y=(0,N.useRef)();(0,N.useEffect)(function(){var B=(0,X.pv)(se);B&&ne((0,X.pv)(se))},[]);var ne=function(d){var O=t()({},d);O.password=Le(O.password+z,Z,Z),a(o,O,function(D){(0,X.KN)(M,I(D.data)),d.autoLogin&&(0,X.ok)(se,d),j(D)},!1)};return(0,r.jsx)("div",{style:{backgroundColor:R.colorBgContainer},className:"crm_login_body",children:(0,r.jsxs)(ke.U,t()(t()({formRef:Y,title:"\u767B\u5F55",subTitle:"\u6B22\u8FCE\u767B\u5F55\u7CFB\u7EDF",initialValues:{username:"",password:""},onFinish:function(){var B=Q()(K()().mark(function d(O){var D;return K()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,Y.current.validateFields();case 2:return D=C.sent,D&&ne(O),C.abrupt("return",!0);case 5:case"end":return C.stop()}},d)}));return function(d){return B.apply(this,arguments)}}()},i),{},{children:[(0,r.jsxs)(le.Z,{centered:!0,activeKey:G,onChange:function(d){return ie(d)},children:[(0,r.jsx)(le.Z.TabPane,{tab:"\u8D26\u53F7\u5BC6\u7801\u767B\u5F55",disabled:!E},"account"),(0,r.jsx)(le.Z.TabPane,{tab:"\u624B\u673A\u53F7\u767B\u5F55",disabled:!p},"phone")]}),G==="account"&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(oe.Z,{name:"username",fieldProps:{size:"large",prefix:(0,r.jsx)(Ve.Z,{className:"prefixIcon"})},placeholder:"\u7528\u6237\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"}]}),(0,r.jsx)(oe.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,r.jsx)(me.Z,{className:"prefixIcon"}),strengthText:"\u5BC6\u7801\u5E94\u5305\u542B\u6570\u5B57\u3001\u5B57\u6BCD\u548C\u7279\u6B8A\u5B57\u7B26\uFF0C\u957F\u5EA6\u81F3\u5C11\u4E3A8\u4E2A\u5B57\u7B26",statusRender:function(d){var O=function(){return d&&d.length>12?"ok":d&&d.length>6?"pass":"poor"},D=O();return D==="pass"?(0,r.jsx)("div",{style:{color:R.colorWarning},children:"\u5F3A\u5EA6\uFF1A\u4E2D"}):D==="ok"?(0,r.jsx)("div",{style:{color:R.colorSuccess},children:"\u5F3A\u5EA6\uFF1A\u5F3A"}):(0,r.jsx)("div",{style:{color:R.colorError},children:"\u5F3A\u5EA6\uFF1A\u5F31"})}},placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"}]})]}),G==="phone"&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(oe.Z,{fieldProps:{size:"large",prefix:(0,r.jsx)(Ge.Z,{className:"prefixIcon"})},name:T,placeholder:"\u624B\u673A\u53F7",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\uFF01"},{pattern:/^1\d{10}$/,message:"\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF\uFF01"}]}),(0,r.jsx)(Qe.Z,{fieldProps:{size:"large",prefix:(0,r.jsx)(me.Z,{className:"prefixIcon"})},captchaProps:{size:"large"},placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",captchaTextRender:function(d,O){return d?"".concat(O," ","\u83B7\u53D6\u9A8C\u8BC1\u7801"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"},phoneName:T,name:"captcha",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01"}],onGetCaptcha:function(){var B=Q()(K()().mark(function d(O){var D;return K()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:D={},D[T]=O,a(c,t()({},D),function(q){_.ZP.success("\u9A8C\u8BC1\u7801\u5DF2\u53D1\u9001\uFF0C\u8BF7\u67E5\u770B\u624B\u673A\u77ED\u4FE1")});case 3:case"end":return C.stop()}},d)}));return function(d){return B.apply(this,arguments)}}()})]}),(0,r.jsxs)("div",{style:{marginBlockEnd:24},children:[(0,r.jsx)(Xe.Z,{noStyle:!0,name:"autoLogin",children:"\u81EA\u52A8\u767B\u5F55"}),(0,r.jsx)("a",{style:{float:"right"},children:"\u5FD8\u8BB0\u5BC6\u7801"})]})]}))})},_e=qe,er=n(77646),rr=function(e){var s=e.params,a=s===void 0?{}:s,o=e.layoutType,c=o===void 0?"ModalForm":o,i=e.fieldProps,v=i===void 0?{}:i,p=e.url,A=e.ajax,E=A===void 0?ee:A,y=e.finishFun,T=y===void 0?function(){}:y,P=e.setMsg,z=P===void 0?function(x){return x.msg}:P,u=e.children,Z=u===void 0?(0,r.jsx)(te.ZP,{children:"\u70B9\u51FB\u6211"}):u;return console.log(777888,v),(0,r.jsx)(pe,{children:(0,r.jsx)(er.Z,t()(t()({trigger:Z,layoutType:"ModalForm",onFinish:Q()(K()().mark(function x(){var I,h,M,f=arguments;return K()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return I=f.length>0&&f[0]!==void 0?f[0]:{},h=!1,M=t()(t()({},a),I),console.log(I),b.next=6,E(p,M,function(R){_.ZP.success(z(R)),T(),h=!0});case 6:return b.abrupt("return",h);case 7:case"end":return b.stop()}},x)}))},c==="ModalForm"?{modalProps:{destroyOnClose:!0}}:{drawerProps:{destroyOnClose:!0}}),{},{columns:[{title:"\u6807\u9898",dataIndex:"title",formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]},width:"md"}]},v))})},ge=rr},42480:function(){},24654:function(){}}]);
