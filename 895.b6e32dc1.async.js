(self.webpackChunkdurians=self.webpackChunkdurians||[]).push([[895],{66436:function(br,Ye,d){"use strict";d.r(Ye),d.d(Ye,{API_STATUS:function(){return Xr},DEFAULT_CONFIG:function(){return te},FORM_LAYOUT_TYPE:function(){return qr},FormPro:function(){return er},LOGIN_TYPE:function(){return _r},LoginPro:function(){return jn},MESSAGE_TYPE:function(){return Qr},ModalPro:function(){return _e},TablePro:function(){return yr},TreePro:function(){return Er},ajaxCommon:function(){return Ce},arrHasKey:function(){return ur},clearLocalStorage:function(){return Fn},clearSessionStorage:function(){return Tn},commonFormHandler:function(){return Qe},cun:function(){return Dr},cuns:function(){return Rr},debounce:function(){return Br},decrypted:function(){return Zr},encrypted:function(){return dr},getLocalStorage:function(){return jr},getSessionStorage:function(){return Pn},quObj:function(){return ar},removeLocalStorage:function(){return En},removeSessionStorage:function(){return yn},safeJsonParse:function(){return Ur},setLocalStorage:function(){return xr},setSessionStorage:function(){return Ir},throttle:function(){return Hr},useAsyncOperation:function(){return Rn},useErrorHandler:function(){return Ar}});var Le=d(18169),Me=d(9783),C=d.n(Me),ye=d(15009),D=d.n(ye),Ve=d(99289),U=d.n(Ve),Xe=d(97857),n=d.n(Xe),V=d(19632),T=d.n(V),R=d(5574),h=d.n(R),s=d(67294),Pe=d(45580),De=d(89451),ir=d(16434),kr=d(64599),Nr=d.n(kr),Mr=d(59847),wr=d(11238),de=d(45360),sr=function(e){return JSON.parse(JSON.stringify(e))},Cn=function(e){var i=[];for(var f in e)i.push("".concat(f," ").concat(e[f]));return i.join(",")},ur=function(e,i){for(var f=null,o=0;o<i.length;o++){var u=e(i[o]);if(u){f=n()(n()({},i[o]),{},{proData:u});break}}return f},Qe=function(e,i){return e.map(function(f){var o,u,a=n()({},f);if((o=a.proConfig)!==null&&o!==void 0&&o.link){var S,v=(S=a.proConfig)===null||S===void 0?void 0:S.link;a.fieldProps=n()(n()({},a.fieldProps||{}),{},{onChange:function(p){console.log("value",p),i(v.url,C()({},v.params||"id",p),function(I){v.onChange(I.data,f)})}})}return(u=a.proConfig)!==null&&u!==void 0&&u.isKeyword&&(a.search=n()({transform:function(p){return C()({},a.proConfig.isKeyword,p)}},a.search||{})),a})},Ce=function(e,i,f){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,u="";return o&&(u="api"),(0,wr.ZP)(u+e,{method:"POST",data:i}).then(function(a){a.code==0||a.success===!0?f(a):de.ZP.error(a.msg||a.message||"\u8BF7\u6C42\u5931\u8D25")}).catch(function(a){console.error("\u8BF7\u6C42\u51FA\u9519:",a),de.ZP.error("\u7F51\u7EDC\u8BF7\u6C42\u5F02\u5E38")})},dr=function(e){try{return btoa(encodeURIComponent(e))}catch(i){return console.error("\u52A0\u5BC6\u5931\u8D25:",i),e}},Zr=function(e){try{return decodeURIComponent(atob(e))}catch(i){return console.error("\u89E3\u5BC6\u5931\u8D25:",i),e}};function Ur(t,e){try{var i=JSON.parse(t);return i!==null?i:e}catch(f){return console.warn("JSON\u89E3\u6790\u5931\u8D25:",f),e}}function Br(t,e){var i;return function(){for(var f=this,o=arguments.length,u=new Array(o),a=0;a<o;a++)u[a]=arguments[a];clearTimeout(i),i=setTimeout(function(){return t.apply(f,u)},e)}}function Hr(t,e){var i=0;return function(){var f=Date.now();if(f-i>=e){i=f;for(var o=arguments.length,u=new Array(o),a=0;a<o;a++)u[a]=arguments[a];t.apply(this,u)}}}var Kr=d(91619),r=d(85893);function qe(t,e,i){var f=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"value",o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"children",u=(0,Kr.Z)(t),a=Nr()(u),S;try{for(a.s();!(S=a.n()).done;){var v=S.value;v[f]===e?v.children=i:v.children&&(v.children=qe(v.children,e,i,f,o))}}catch(c){a.e(c)}finally{a.f()}return u}var zr=function(e){var i=e.ajax,f=i===void 0?Ce:i,o=e.rowKey,u=o===void 0?"value":o,a=e.fieldProps,S=a.fieldNames,v=a.params,c=v===void 0?function(w){return{}}:v,p=a.url,I=a.setData,A=(0,s.useState)([]),E=h()(A,2),$=E[0],L=E[1];(0,s.useEffect)(function(){x({},n()({},c({})))},[]);var x=function(k){var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return f(p,n()(n()({},c(k)),Z),function(N){var B=I(N);L(function(W){return k[u]?qe(W,k[u],B,u):B})})};return(0,r.jsx)(Mr.Z,n()(n()({placeholder:"\u8BF7\u9009\u62E9",treeDataSimpleMode:!0,style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"}},e==null?void 0:e.fieldProps),{},{loadData:x,treeData:$}))},Gr=zr,Wr=d(36457),we=d(83622),Jr=d(26859),Yr=function(e){var i=e.title,f=i===void 0?"\u4E0A\u4F20":i,o=e.fieldPropsUpload,u=o===void 0?{}:o,a=e.url,S=a===void 0?"/upload":a,v=e.setData,c=v===void 0?function(){}:v,p=e.onChange,I=p===void 0?function(){}:p,A=e.value,E=A===void 0?[]:A,$=e.ajaxSuccess,L=$===void 0?function(J){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};(J==null?void 0:J.code)===0&&P()}:$,x=e.ajaxError,w=x===void 0?function(J){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};(J==null?void 0:J.code)!==0&&P()}:x,k=(0,s.useState)([]),Z=h()(k,2),N=Z[0],B=Z[1];(0,s.useEffect)(function(){B(W(E))},[]);var W=function(P){return P&&P.length?typeof P=="string"?JSON.parse(P):JSON.stringify(P):P};console.log(555,u,S,E);var _=n()({name:"file",action:S,fileList:N,onChange:function(P){console.log(77877,P),P.file.status!=="uploading"&&console.log(P.file,P.fileList),P.file.status==="done"?(L(P.file.response,function(l){I(W(P.fileList.map(function(F){return n()(n()({},F),{},{url:c(P.file.response)})}))),de.ZP.success("".concat(P.file.name," \u4E0A\u4F20\u6210\u529F"))}),w(P.file.response,function(l){console.log(666,l),l&&de.ZP.error(l.msg)})):P.file.status==="error"&&de.ZP.error("".concat(P.file.name," \u4E0A\u4F20\u5931\u8D25")),B(P.fileList)}},u);return(0,r.jsx)(Wr.Z,n()(n()({},_),{},{children:(0,r.jsx)(we.ZP,{variant:"solid",icon:(0,r.jsx)(Jr.Z,{}),children:f})}))},cr=Yr,Vr=d(85576),te={TABLE_PRO:{DELETE_FIELDS:"idList",DELETE_FIELD:"id",DELETE_FIELD_IS_ARR:!1,DELETE_PARAMS:{},DELETE_BATCH_HIDDEN:!1,ACTION_WIDTH:100,ADD_TEXT:"\u65B0\u589E",EDIT_TEXT:"\u7F16\u8F91",DELETE_TEXT:"\u5220\u9664",DETAIL_TEXT:"\u8BE6\u60C5",HAS_ADD:!0,HAS_EDIT:!0,HAS_DELETE:!0,HAS_DETAIL:!0,HAS_LEFT_TREE:!1,KEYWORD_PLACEHOLDER:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD\u641C\u7D22"},FORM_PRO:{LAYOUT_TYPE:"ModalForm",IS_EDIT:!1},MODAL_PRO:{TITLE:"\u57FA\u7840"},LOGIN_PRO:{HAS_SMS_LOGIN:!1,HAS_ACCOUNT_LOGIN:!0,USERNAME_FIELD:"username",PASSWORD_FIELD:"password",PHONE_FIELD:"phone",CAPTCHA_FIELD:"captcha",TOKEN_FIELD:"token",AUTO_LOGIN:"autoLogin",EXTRA_PASSWORD_TEXT:""},TREE_PRO:{TITLE:"\u9009\u62E9",DELETE_FIELDS:"idList",DELETE_FIELD:"id",DELETE_FIELD_IS_ARR:!1,DELETE_PARAMS:{},EDIT_FIELD:"id",IS_SELECT:!1,DETAIL:!0,ROW_KEY:"id",IS_LOAD_DATA:!1,FIELD_NAMES:{title:"title",key:"key",children:"children"}}},Xr={SUCCESS:0,ERROR:1},Qr={SUCCESS:"success",ERROR:"error",WARNING:"warning",INFO:"info"},qr={MODAL:"ModalForm",DRAWER:"DrawerForm"},_r={ACCOUNT:"account",PHONE:"phone"},fr=(0,s.memo)(function(t){var e=t.title,i=e===void 0?te.MODAL_PRO.TITLE:e,f=t.handleOk,o=f===void 0?function(le){le()}:f,u=t.Content,a=u===void 0?function(){return(0,r.jsx)("div",{children:"\u793A\u4F8B"})}:u,S=t.children,v=S===void 0?(0,r.jsx)("div",{children:"\u70B9\u51FB"}):S,c=t.fieldProps,p=c===void 0?{}:c,I=t.keyboardNavigation,A=I===void 0?!0:I,E=t.onKeyDown,$=t.draggable,L=$===void 0?!1:$,x=t.resizable,w=x===void 0?!1:x,k=t.maximizable,Z=k===void 0?!1:k,N=t.fullscreen,B=N===void 0?!1:N,W=t.animation,_=t.maskClosable,J=_===void 0?!0:_,P=t.autoFocus,l=t.confirmOnClose,F=l===void 0?!1:l,ce=t.confirmCloseText,O=ce===void 0?"\u786E\u5B9A\u8981\u5173\u95ED\u5417\uFF1F":ce;console.debug("ModalPro config:",{draggable:L,resizable:w,maximizable:Z,fullscreen:B,animation:W});var fe=(0,s.useState)(!1),ge=h()(fe,2),H=ge[0],oe=ge[1],ie=(0,s.useCallback)(function(){oe(!0)},[]),he=(0,s.useCallback)(function(){o(function(){oe(!1)})},[o]),Te=(0,s.useCallback)(U()(D()().mark(function le(){var Q,ee;return D()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(!F){z.next=8;break}return z.next=3,d.e(202).then(d.bind(d,52202));case 3:Q=z.sent,ee=Q.Modal,ee.confirm({title:"\u786E\u8BA4\u5173\u95ED",content:O,onOk:function(){oe(!1)}}),z.next=9;break;case 8:oe(!1);case 9:case"end":return z.stop()}},le)})),[F,O]),xe=(0,s.useCallback)(function(){return typeof a=="function"?(0,r.jsx)(a,{isModalOpen:H,setIsModalOpen:oe}):a},[a,H]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{onClick:ie,style:{width:"max-content",cursor:"pointer"},role:"button",tabIndex:0,onKeyDown:function(Q){A&&(Q.key==="Enter"||Q.key===" ")&&(Q.preventDefault(),ie()),E==null||E(Q)},children:v}),(0,r.jsx)(Vr.Z,n()(n()({title:i,open:H,onOk:he,onCancel:Te,destroyOnClose:!0,maskClosable:J,keyboard:A},p),{},{modalRender:function(Q){return Q},afterOpenChange:function(Q){Q&&P&&setTimeout(function(){var ee=document.querySelector(P);ee&&"focus"in ee&&ee.focus()},100)},children:xe()}))]})});fr.displayName="ModalPro";var _e=fr,en=function(e){var i=e.title,f=i===void 0?"\u9009\u62E9":i,o=e.tableFieldProps,u=o===void 0?{}:o,a=e.modalFieldProps,S=a===void 0?{}:a,v=e.value,c=v===void 0?[]:v,p=e.onChange,I=(0,s.useState)(c),A=h()(I,2),E=A[0],$=A[1];return(0,s.useEffect)(function(){$(c)},[c]),(0,r.jsx)(_e,n()(n()({Content:(0,r.jsx)(yr,n()(n()({},u),{},{value:E,onSelectChange:function(x){$(x)},fieldProps:n()({},u.fieldProps)}))},S),{},{handleOk:function(x){p(E),x()},children:(0,r.jsx)(we.ZP,{type:"link",variant:"link",children:c&&c.length?"\u5DF2\u9009\u62E9".concat(c.length,"\u4E2A"):f})}))},rn=en,nn=d(98691),an=function(e){var i=e.children,f=(0,s.useContext)(De.L_);return(0,r.jsx)(De.L_.Provider,{value:n()(n()({},f),{},{valueTypeMap:{treeSelectPro:{renderFormItem:function(u,a){return console.log(7666,a),(0,r.jsx)(Gr,n()({},a))}},uploadPro:{render:function(u){return console.log(6566,u),(0,r.jsx)(cr,{value:u,fieldPropsUpload:{disabled:!0}})},renderFormItem:function(u,a){return console.log(67655,a),(0,r.jsx)(cr,n()({},a.fieldProps))}},tableSelect:{renderFormItem:function(u,a){return console.log(667555,a),(0,r.jsx)(rn,n()(n()({},a),a.fieldProps))},render:function(u){return(0,r.jsxs)(r.Fragment,{children:["\u5DF2\u9009\u62E9",u.length,"\u9879"]})}},captcha:{renderFormItem:function(u,a){console.log(66766,a);var S=(a==null?void 0:a.fieldProps)||{},v=S.ajax,c=v===void 0?Ce:v,p=S.url,I=p===void 0?"":p,A=S.phoneName,E=A===void 0?"phone":A,$=S.name,L=$===void 0?"captcha":$;return(0,r.jsx)(ir.Z,n()(n()({noStyle:!0,captchaProps:{},fieldProps:{prefix:(0,r.jsx)(nn.Z,{})},phoneName:E,name:L,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"}],placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"},a),{},{onGetCaptcha:function(){var x=U()(D()().mark(function w(k){var Z;return D()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:Z={},Z[E]=k,c(I,Z,function(W){de.ZP.success("\u624B\u673A\u53F7 ".concat(k," \u9A8C\u8BC1\u7801\u53D1\u9001\u6210\u529F!"))},function(){throw new Error("\u83B7\u53D6\u9A8C\u8BC1\u7801\u9519\u8BEF")});case 3:case"end":return B.stop()}},w)}));return function(w){return x.apply(this,arguments)}}()}))}}}}),children:i})},vr=an,mr=d(86738),tn=d(85418),on=d(57381),ln=d(41952),sn=d(16664),un=d(47389),gr=d(82061),hr=d(51042),dn=d(77646),pr=(0,s.memo)(function(t){var e=t.layoutType,i=e===void 0?te.FORM_PRO.LAYOUT_TYPE:e,f=t.fieldProps,o=f===void 0?{}:f,u=t.url,a=t.detailUrl,S=t.record,v=S===void 0?{}:S,c=t.ajax,p=c===void 0?Ce:c,I=t.finishFun,A=I===void 0?function(){}:I,E=t.detailSetData,$=t.setMsg,L=$===void 0?function(l){return(l==null?void 0:l.msg)||"\u64CD\u4F5C\u6210\u529F"}:$,x=t.isEdit,w=x===void 0?te.FORM_PRO.IS_EDIT:x,k=t.beforeSubmit,Z=k===void 0?function(l){return l}:k,N=t.children,B=N===void 0?(0,r.jsx)(we.ZP,{children:"\u70B9\u51FB\u6211"}):N,W=(0,s.useRef)(),_=(0,s.useCallback)(function(){var l=U()(D()().mark(function F(ce){var O,fe;return D()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(u){H.next=3;break}return console.warn("FormPro: url is required for form submission"),H.abrupt("return",!1);case 3:return H.prev=3,O=Z?Z(ce,v,ce):ce,fe=!1,H.next=8,p(u,O,function(oe){de.ZP.success(L(oe)),A(oe,O),fe=!0});case 8:return H.abrupt("return",fe);case 11:return H.prev=11,H.t0=H.catch(3),console.error("FormPro: Form submission failed:",H.t0),de.ZP.error("\u63D0\u4EA4\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5"),H.abrupt("return",!1);case 16:case"end":return H.stop()}},F,null,[[3,11]])}));return function(F){return l.apply(this,arguments)}}(),[u,p,Z,v,L,A]),J=(0,s.useCallback)(U()(D()().mark(function l(){var F;return D()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(!(!a||!v||!Object.keys(v).length)){O.next=2;break}return O.abrupt("return",v);case 2:return O.prev=2,F=v,O.next=6,p(a,v,function(fe){F=E?E(fe):fe});case 6:return O.abrupt("return",F);case 9:return O.prev=9,O.t0=O.catch(2),console.error("FormPro: Failed to fetch detail data:",O.t0),O.abrupt("return",v);case 13:case"end":return O.stop()}},l,null,[[2,9]])})),[a,v,p,E]),P=(0,s.useCallback)(function(){if(!(o!=null&&o.columns))return[];var l=typeof o.columns=="function"?o.columns("add"):o.columns;return Qe(l,p,w)},[o==null?void 0:o.columns,p,w]);return(0,r.jsx)(vr,{children:(0,r.jsx)(dn.Z,n()({formRef:W,layoutType:i,trigger:B,onFinish:_,request:J,columns:P()},o))})});pr.displayName="FormPro";var er=pr,Sr=(0,s.memo)(function(t){var e=t.title,i=e===void 0?te.TREE_PRO.TITLE:e,f=t.ajax,o=f===void 0?Ce:f,u=t.url,a=t.params,S=a===void 0?function(){return{}}:a,v=t.addUrl,c=t.editUrl,p=t.deleteUrl,I=t.deleteFields,A=I===void 0?te.TREE_PRO.DELETE_FIELDS:I,E=t.deleteField,$=E===void 0?te.TREE_PRO.DELETE_FIELD:E,L=t.deleteFieldIsArr,x=L===void 0?te.TREE_PRO.DELETE_FIELD_IS_ARR:L,w=t.deleteParams,k=w===void 0?te.TREE_PRO.DELETE_PARAMS:w,Z=t.addFormProFieldProps,N=Z===void 0?{}:Z,B=t.setData,W=B===void 0?function(re){return(re==null?void 0:re.data)||[]}:B,_=t.setMsg,J=_===void 0?function(re){return(re==null?void 0:re.msg)||"\u64CD\u4F5C\u6210\u529F"}:_,P=t.editField,l=P===void 0?te.TREE_PRO.EDIT_FIELD:P,F=t.fieldProps,ce=F===void 0?{fieldNames:te.TREE_PRO.FIELD_NAMES}:F,O=t.isSelect,fe=O===void 0?te.TREE_PRO.IS_SELECT:O,ge=t.detail,H=ge===void 0?te.TREE_PRO.DETAIL:ge,oe=t.rowKey,ie=oe===void 0?te.TREE_PRO.ROW_KEY:oe,he=t.isLoadData,Te=he===void 0?te.TREE_PRO.IS_LOAD_DATA:he,xe=(0,s.useState)([]),le=h()(xe,2),Q=le[0],ee=le[1],$e=(0,s.useState)(!1),z=h()($e,2),G=z[0],q=z[1],ae=(0,s.useState)(null),Re=h()(ae,2),se=Re[0],be=Re[1];console.debug("TreePro config:",{isSelect:fe,detail:H,rowKey:ie,isLoadData:Te,loading:G,error:se});var Ze=ce.fieldNames,Oe=Ze===void 0?te.TREE_PRO.FIELD_NAMES:Ze,ke=(0,s.useMemo)(function(){return{ajax:o,addUrl:v,editUrl:c,deleteUrl:p,deleteFields:A,deleteField:$,editField:l,deleteFieldIsArr:x,deleteParams:k,addFormProFieldProps:N}},[o,v,c,p,A,$,l,x,k,N]),je=(0,s.useCallback)(U()(D()().mark(function re(){var K,ve,pe,Se,M=arguments;return D()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(K=M.length>0&&M[0]!==void 0?M[0]:{},ve=M.length>1&&M[1]!==void 0?M[1]:{},u){X.next=5;break}return console.warn("TreePro: url is required for loading data"),X.abrupt("return");case 5:return X.prev=5,q(!0),be(null),pe=n()(n()({},S(K)),ve),X.next=11,o(u,pe,function(Y){var Ie=W(Y);if(!Array.isArray(Ie)){console.warn("TreePro: setData should return an array"),ee([]);return}ee(function(Ne){return K.key?qe(Ne,K.key,Ie,Oe.key):Ie})});case 11:X.next=18;break;case 13:X.prev=13,X.t0=X.catch(5),Se=X.t0 instanceof Error?X.t0.message:"\u52A0\u8F7D\u6570\u636E\u5931\u8D25",be(Se),console.error("TreePro: Failed to load data:",X.t0);case 18:return X.prev=18,q(!1),X.finish(18);case 21:case"end":return X.stop()}},re,null,[[5,13,18,21]])})),[u,o,S,W,Oe.key]);(0,s.useEffect)(function(){u&&je({},S({}))},[u,je,S]);var Ke=(0,s.useCallback)(function(){var re=U()(D()().mark(function K(ve){var pe,Se,M,Ae=arguments;return D()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(pe=Ae.length>1&&Ae[1]!==void 0?Ae[1]:!1,p){Y.next=4;break}return console.warn("TreePro: deleteUrl is required for delete operation"),Y.abrupt("return");case 4:if(!(!ve||ve.length===0)){Y.next=7;break}return de.ZP.warning("\u8BF7\u9009\u62E9\u8981\u5220\u9664\u7684\u6570\u636E"),Y.abrupt("return");case 7:return Y.prev=7,Se=ve,!x&&!pe&&(Se=ve[0]),M=n()(n()({},k),{},C()({},pe?A:$,Se)),Y.next=13,o(p,M,function(Ie){de.ZP.success(J(Ie)),je({},S({}))});case 13:Y.next=19;break;case 15:Y.prev=15,Y.t0=Y.catch(7),console.error("TreePro: Delete operation failed:",Y.t0),de.ZP.error("\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5");case 19:case"end":return Y.stop()}},K,null,[[7,15]])}));return function(K){return re.apply(this,arguments)}}(),[p,x,k,A,$,o,J,je,S]),Ue=function(K){var ve=K.children,pe=K.ajax,Se=K.addUrl,M=K.record,Ae=K.fieldProps,X=(0,s.useState)(l&&(M==null?void 0:M[ie])),Y=h()(X,2),Ie=Y[0],Ne=Y[1],Ee=Se,Fe={};return l&&M!==null&&M!==void 0&&M[ie]&&(Fe[l]=M==null?void 0:M[ie],c&&(Ee=c)),(0,r.jsx)(er,n()(n()({isEdit:Ie,finishFun:function(){je({},n()({},S({})))},ajax:pe,url:Ee},N),{},{fieldProps:n()(n()(n()({},N.fieldProps),Ae),{},{onOpenChange:function(){Ne(M?l&&(M==null?void 0:M[ie]):!1)}}),record:n()(n()(n()({},M),Fe),(N==null?void 0:N.record)||{}),children:ve}))},or=function(K){return[{key:"1",label:(0,r.jsx)(Ue,n()(n()({},ke),{},{addUrl:v,record:n()(n()({},K),{},{id:K[ie]}),fieldProps:{readonly:!0},children:(0,r.jsx)("a",{children:"\u8BE6\u60C5"})})),icon:(0,r.jsx)(sn.Z,{}),disabled:!H},{key:"2",label:(0,r.jsx)(Ue,n()(n()({},ke),{},{addUrl:v,record:n()(n()({},K),{},{id:K[ie]}),children:(0,r.jsx)("a",{children:"\u7F16\u8F91"})})),icon:(0,r.jsx)(un.Z,{}),disabled:!c},{key:"3",label:(0,r.jsx)(mr.Z,{title:"\u5220\u9664",description:"\u786E\u5B9A\u5220\u9664\u8FD9\u6761\u6570\u636E\u5417\uFF1F",onConfirm:function(){Ke([K[ie]])},okText:"\u662F",cancelText:"\u5426",children:(0,r.jsx)("a",{style:{color:"red"},children:"\u5220\u9664"})}),icon:(0,r.jsx)(gr.Z,{}),disabled:!p}]},ze=function(K){return(0,r.jsx)(tn.Z,{menu:{items:or(K)},getPopupContainer:function(){return document.body},trigger:["contextMenu"],children:(0,r.jsx)("span",{children:K[Oe.title]})})};return(0,r.jsxs)("div",{className:"durians_tree_body",children:[(0,r.jsxs)("div",{className:"durians_tree_body_title",children:[(0,r.jsx)("div",{className:"durians_tree_body_title_l",children:i}),(0,r.jsx)("div",{className:"durians_tree_body_title_r",children:(0,r.jsx)(Ue,n()(n()({},ke),{},{children:(0,r.jsx)(hr.Z,{})}))})]}),(0,r.jsx)("div",{className:"durians_tree_body_tree",children:Q==="loading"&&u?(0,r.jsx)(on.Z,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:200}}):(0,r.jsx)(ln.Z,n()(n()({},Te?{loadData:je}:{}),{},{treeData:Q,titleRender:ze},ce))})]})});Sr.displayName="TreePro";var Er=Sr,cn=d(96074),Fr=d(53110),Pr=d(42075),fn=[{title:"\u59D3\u540D",dataIndex:"name",valueType:"text",formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}},{title:"\u5E74\u9F84",dataIndex:"age",valueType:"digit"},{title:"\u5730\u5740",dataIndex:"address",valueType:"text",hideInSearch:!0},{title:"\u7535\u8BDD",dataIndex:"phone",valueType:"text",hideInSearch:!0},{title:"\u90AE\u7BB1",dataIndex:"email",valueType:"text",hideInSearch:!0},{title:"\u90E8\u95E8",dataIndex:"department",valueType:"text",hideInSearch:!0},{title:"\u804C\u4F4D",dataIndex:"position",valueType:"text",hideInSearch:!0}],vn=function(e){var i,f,o=e.ajax,u=o===void 0?Ce:o,a=e.url,S=a===void 0?"https://proapi.azurewebsites.net/github/issues":a,v=e.addUrl,c=e.editUrl,p=e.deleteUrl,I=e.deleteFields,A=I===void 0?"idList":I,E=e.deleteField,$=E===void 0?null:E,L=e.deleteFieldIsArr,x=L===void 0?!1:L,w=e.deleteParams,k=w===void 0?{}:w,Z=e.deleteBatchHidden,N=Z===void 0?!1:Z,B=e.addFormProFieldProps,W=B===void 0?{}:B,_=e.actionWidth,J=_===void 0?100:_,P=e.fieldProps,l=P===void 0?{search:{},columns:fn,rowKey:"id"}:P,F=e.setData,ce=F===void 0?function(m){var g,y;return(m==null||(g=m.data)===null||g===void 0?void 0:g.records)||(m==null||(y=m.data)===null||y===void 0?void 0:y.list)||(m==null?void 0:m.data)}:F,O=e.setTotal,fe=O===void 0?function(m){var g,y;return(m==null||(g=m.data)===null||g===void 0?void 0:g.total)||(m==null||(y=m.data)===null||y===void 0?void 0:y.length)||0}:O,ge=e.setMsg,H=ge===void 0?function(m){return(m==null?void 0:m.msg)||(m==null?void 0:m.message)||"\u64CD\u4F5C\u6210\u529F"}:ge,oe=e.actionBar,ie=oe===void 0?[]:oe,he=e.paginationAlias,Te=he===void 0?{pageIndex:"pageIndex",pageSize:"pageSize"}:he,xe=e.tableAlertOptionRenderPro,le=xe===void 0?[]:xe,Q=e.treeFieldProps,ee=Q===void 0?null:Q,$e=e.paramsFun,z=$e===void 0?function(m){return m}:$e,G=e.treeParamsFun,q=G===void 0?function(m){return{treeId:m}}:G,ae=e.treeWidth,Re=ae===void 0?200:ae,se=e.value,be=se===void 0?null:se,Ze=e.onSelectChange,Oe=Ze===void 0?null:Ze,ke=e.keywordField,je=ke===void 0?null:ke,Ke=e.keywordPlaceholder,Ue=Ke===void 0?null:Ke,or=(0,s.useState)({}),ze=h()(or,2),re=ze[0],K=ze[1];console.log("treeFieldProps",re);var ve=(0,s.useState)({}),pe=h()(ve,2),Se=pe[0],M=pe[1],Ae=function(g){console.log("selectedRowKeys changed: ",g),Oe&&Oe(g)},X=(0,s.useState)((l==null||(i=l.pagination)===null||i===void 0?void 0:i.pageSize)||10),Y=h()(X,2),Ie=Y[0],Ne=Y[1],Ee=(0,s.useRef)(),Fe=(0,s.useRef)(),Ge=l.rowKey||"id",We=[].concat(T()(c?[function(m){var g=m.record;return(0,r.jsx)(Cr,{title:"\u7F16\u8F91",id:Ge,record:g,children:(0,r.jsx)("a",{children:"\u7F16\u8F91"})})}]:[]),T()(ie),T()(p?[function(m){var g=m.record;return(0,r.jsx)(mr.Z,{title:"\u5220\u9664",description:"\u786E\u5B9A\u5220\u9664\u8FD9\u6761\u6570\u636E\u5417\uFF1F",onConfirm:function(){$r([g[Ge]],function(){},!1)},okText:"\u662F",cancelText:"\u5426",children:(0,r.jsx)("a",{style:{color:"red"},children:"\u5220\u9664"})})}]:[]));(0,s.useEffect)(function(){Fe!=null&&Fe.current&&M(Fe.current.getFieldsValue())},[]);var Cr=function(g){var y=g.children,j=g.record,b=g.id,ne=g.title,ue=ne===void 0?"\u65B0\u589E":ne,Je=typeof l.columns=="function"?l.columns("add"):l.columns,me=v,He={};return b&&j!==null&&j!==void 0&&j[b]&&(He[b]=j==null?void 0:j[b],c&&(me=c)),(0,r.jsx)(er,n()(n()({isEdit:b&&(j==null?void 0:j[b]),ajax:u},W),{},{url:me,finishFun:function(){var lr;(lr=Ee.current)===null||lr===void 0||lr.reload()},record:n()(n()(n()({},j),re),He),fieldProps:n()({columns:Je.map(function(Lr){return n()(n()({},Lr),{},{width:null})}),title:ue},W.fieldProps),children:y}))},An=function(g,y){return(0,r.jsx)("div",{className:"durians_table_pro_action",children:We.map(function(j,b){return(0,r.jsxs)(s.Fragment,{children:[(0,r.jsx)(j,{record:y,formRef:Fe,action:Ee.current}),We.length>1&&b<We.length-1?(0,r.jsx)(cn.Z,{type:"vertical"}):null]},b)})})},$r=function(g){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,b=g;!x&&!j&&(b=g[0]);var ne=n()({},k);if(j)ne[A]=b;else if($)ne[$]=b;else{var ue=typeof(l==null?void 0:l.rowKey)=="function"?l==null?void 0:l.rowKey({}):l==null?void 0:l.rowKey;ne[ue||"id"]=b}u(p,ne,function(Je){var me;de.ZP.success(H(Je)),(me=Ee.current)===null||me===void 0||me.reload(),Ee.current.clearSelected(),y()})},Or=typeof l.columns=="function"?l.columns("table"):l.columns||[],Be=ur(function(m){var g;return m==null||(g=m.proConfig)===null||g===void 0?void 0:g.isKeyword},Or);return(0,r.jsx)(vr,{children:(0,r.jsxs)("div",{className:"durians_table_body",children:[ee?(0,r.jsx)("div",{className:"durians_table_body_l",style:{width:Re},children:(0,r.jsx)(Er,n()(n()({ajax:u},ee),{},{fieldProps:n()({onSelect:function(g){var y;K(function(j){var b=sr(j);return n()(n()({},b),q(g))}),(y=Ee.current)===null||y===void 0||y.reload()}},ee.fieldProps)}))}):null,(0,r.jsx)("div",{className:"durians_table_body_r",style:n()({},ee?{maxWidth:"calc(100% - ".concat(Re+8,"px)")}:{}),children:(0,r.jsx)(Pe.Z,n()(n()(n()({formRef:Fe,defaultSize:"small",scroll:{x:"max-content"},rowSelection:p&&!N||le.length||Oe?n()(n()({selections:[Fr.Z.SELECTION_ALL,Fr.Z.SELECTION_INVERT],preserveSelectedRowKeys:!0},be?{selectedRowKeys:be}:{}),{},{onChange:Ae}):!1,tableAlertRender:function(g){var y=g.selectedRowKeys,j=g.selectedRows,b=g.onCleanSelected;return console.log(y,j),(0,r.jsx)(Pr.Z,{size:24,children:(0,r.jsxs)("span",{children:["\u5DF2\u9009 ",y.length," \u9879",(0,r.jsx)("a",{style:{marginInlineStart:8},onClick:b,children:"\u53D6\u6D88\u9009\u62E9"})]})})},tableAlertOptionRender:function(g){var y=g.selectedRowKeys,j=g.selectedRows,b=g.onCleanSelected;return(0,r.jsxs)(Pr.Z,{size:16,children:[p&&!N?(0,r.jsx)(_e,{title:"\u662F\u5426\u786E\u5B9A\u5220\u9664\uFF1F",Content:function(){return"\u786E\u5B9A\u5220\u9664\uFF1F"},handleOk:function(ue){$r(y,function(){ue()})},children:(0,r.jsx)(we.ZP,{variant:"solid",size:"small",icon:(0,r.jsx)(gr.Z,{}),danger:!0,children:"\u6279\u91CF\u5220\u9664"},"danger")}):null,le.map(function(ne,ue){return(0,r.jsx)(ne,{selectedRowKeys:y,selectedRows:j,onCleanSelected:b,formRef:Fe,actionRef:Ee,searchValues:Se},ue)})]})},actionRef:Ee,request:function(){var m=U()(D()().mark(function g(y,j,b){var ne,ue;return D()().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:if(ne=l.dataSource,ue=n()({},y),ue[Te.pageIndex]=y.current,ue[Te.pageSize]=y.pageSize,console.log(6666,y,j,b),j&&Object.keys(j).length?ue.sort=objToSort(j):ue.sort=null,M(ue),!S){me.next=10;break}return me.next=10,u(S,z(n()({},ue)),function(He){console.log(He),ne=He});case 10:return me.abrupt("return",Promise.resolve({data:ne?ce(ne):[],success:!0,total:ne?fe(ne):0}));case 11:case"end":return me.stop()}},g)}));return function(g,y,j){return m.apply(this,arguments)}}(),rowKey:"id",form:{syncToUrl:!1},dateFormatter:"string"},l),{},{params:n()(n()({},re),(l==null?void 0:l.params)||{})},l.pagination?n()(n()({},l==null?void 0:l.pagination),{},{pageSize:Ie,onChange:function(g,y){var j;if(l!=null&&(j=l.pagination)!==null&&j!==void 0&&j.onChange){var b;l==null||(b=l.pagination)===null||b===void 0||b.onChange(g,y)}Ne(y)}}):{}),{},{options:n()(n()({},Be?{search:{name:Be.formItemProps?Be.formItemProps.name:Be.dataIndex,placeholder:"\u8BF7\u8F93\u5165".concat(Be.title),allowClear:!0}}:{}),{},{setting:{listsHeight:400}},l.options),columns:[].concat(T()(Qe(Or,u)),T()(We.length?[{title:"\u64CD\u4F5C",dataIndex:"actionTablePro",fixed:"right",hideInSearch:!0,actionWidth:J,render:An}]:[])),search:n()({labelWidth:"auto"},(l==null?void 0:l.search)||{}),toolBarRender:function(g){var y=l.toolBarRender;return y===!1?!1:[].concat(T()(v?[(0,r.jsx)(Cr,{children:(0,r.jsx)(we.ZP,{variant:"solid",icon:(0,r.jsx)(hr.Z,{}),type:"primary",children:"\u65B0\u5EFA"},"button")})]:[]),T()((Array.isArray(y)?y:[]).map(function(j){return typeof j=="function"?(0,r.jsx)(j,{action:g,formRef:Fe,searchValues:Se}):j})||[]))},toolbar:n()(n()({},l.toolbar),je?{search:n()({onSearch:function(g){var y;K(function(j){console.log(666,g);var b=sr(j);return n()(n()({},b),{},C()({},je,g))}),(y=Ee.current)===null||y===void 0||y.reload()},placeholder:"\u8BF7\u8F93\u5165".concat(Ue),allowClear:!0},(l==null||(f=l.toolbar)===null||f===void 0?void 0:f.search)||{})}:{})}))})]})})},yr=vn,mn=d(87547),Tr=d(94149),gn=d(24454),hn=d(68262),rr=d(5966),pn=d(63434),Sn=d(9361),nr=d(15514),xr=function(e,i){try{var f=JSON.stringify(i);localStorage.setItem(e,f)}catch(o){console.error("Failed to set localStorage:",o)}},jr=function(e,i){try{var f=localStorage.getItem(e);return f===null?i:JSON.parse(f)}catch(o){return console.error("Failed to get localStorage:",o),i}},En=function(e){try{localStorage.removeItem(e)}catch(i){console.error("Failed to remove localStorage:",i)}},Fn=function(){try{localStorage.clear()}catch(e){console.error("Failed to clear localStorage:",e)}},Ir=function(e,i){try{var f=JSON.stringify(i);sessionStorage.setItem(e,f)}catch(o){console.error("Failed to set sessionStorage:",o)}},Pn=function(e,i){try{var f=sessionStorage.getItem(e);return f===null?i:JSON.parse(f)}catch(o){return console.error("Failed to get sessionStorage:",o),i}},yn=function(e){try{sessionStorage.removeItem(e)}catch(i){console.error("Failed to remove sessionStorage:",i)}},Tn=function(){try{sessionStorage.clear()}catch(e){console.error("Failed to clear sessionStorage:",e)}},Dr=xr,ar=jr,Rr=Ir,tr="autoLogin",xn=function(e){var i=e.ajax,f=i===void 0?Ce:i,o=e.url,u=e.captchaUrl,a=e.loginFormFieldProps,S=e.hasSmsLogin,v=S===void 0?!1:S,c=e.hasAccountLogin,p=c===void 0?!0:c,I=e.phoneField,A=I===void 0?"mobile":I,E=e.usernameField,$=E===void 0?"username":E,L=e.passwordField,x=L===void 0?"password":L,w=e.captchaField,k=w===void 0?"captcha":w,Z=e.extraPasswordText,N=Z===void 0?"":Z,B=e.secretKey,W=B===void 0?null:B,_=e.setData,J=_===void 0?function(z){return z.data}:_,P=e.tokenField,l=P===void 0?"token":P,F=e.callback,ce=F===void 0?function(){}:F,O=e.BottomDom,fe=O===void 0?function(){return(0,r.jsx)(r.Fragment,{})}:O,ge=e.encrypt,H=e.ForGetPassword,oe=H===void 0?function(){return(0,r.jsx)("a",{style:{float:"right"},children:"\u5FD8\u8BB0\u5BC6\u7801"})}:H,ie=Sn.Z.useToken(),he=ie.token,Te=(0,s.useState)("account"),xe=h()(Te,2),le=xe[0],Q=xe[1],ee=(0,s.useRef)(),$e=function(G){var q=n()({},G);q[x]=W?dr(q[x]+N,W,W):q[x],ge&&(q[x]=ge(q[x])),f(o,q,function(ae){Rr(l,J(ae)),G.autoLogin&&Dr(tr,G),ce(ae)},!1)};return(0,s.useEffect)(function(){var z=ar(tr);z&&ee.current.setFieldsValue(ar(tr))},[]),(0,r.jsx)("div",{style:{backgroundColor:he.colorBgContainer},className:"crm_login_body",children:(0,r.jsxs)(hn.U,n()(n()({formRef:ee,title:"\u767B\u5F55",subTitle:"\u6B22\u8FCE\u767B\u5F55\u7CFB\u7EDF",initialValues:C()(C()({},$,""),x,""),onFinish:function(){var z=U()(D()().mark(function G(q){var ae;return D()().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return se.next=2,ee.current.validateFields();case 2:return ae=se.sent,ae&&$e(q),se.abrupt("return",!0);case 5:case"end":return se.stop()}},G)}));return function(G){return z.apply(this,arguments)}}()},a),{},{children:[(0,r.jsxs)(nr.Z,{centered:!0,activeKey:le,onChange:function(G){return Q(G)},children:[(0,r.jsx)(nr.Z.TabPane,{tab:"\u8D26\u53F7\u5BC6\u7801\u767B\u5F55",disabled:!p},"account"),(0,r.jsx)(nr.Z.TabPane,{tab:"\u624B\u673A\u53F7\u767B\u5F55",disabled:!v},"phone")]}),le==="account"&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(rr.Z,{name:$,fieldProps:{size:"large",prefix:(0,r.jsx)(mn.Z,{className:"prefixIcon"})},placeholder:"\u7528\u6237\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"}]}),(0,r.jsx)(rr.Z.Password,{name:x,fieldProps:{size:"large",prefix:(0,r.jsx)(Tr.Z,{className:"prefixIcon"}),strengthText:"\u5BC6\u7801\u5E94\u5305\u542B\u6570\u5B57\u3001\u5B57\u6BCD\u548C\u7279\u6B8A\u5B57\u7B26\uFF0C\u957F\u5EA6\u81F3\u5C11\u4E3A8\u4E2A\u5B57\u7B26",statusRender:function(G){var q=function(){return G&&G.length>12?"ok":G&&G.length>6?"pass":"poor"},ae=q();return ae==="pass"?(0,r.jsx)("div",{style:{color:he.colorWarning},children:"\u5F3A\u5EA6\uFF1A\u4E2D"}):ae==="ok"?(0,r.jsx)("div",{style:{color:he.colorSuccess},children:"\u5F3A\u5EA6\uFF1A\u5F3A"}):(0,r.jsx)("div",{style:{color:he.colorError},children:"\u5F3A\u5EA6\uFF1A\u5F31"})}},placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"}]})]}),le==="phone"&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(rr.Z,{fieldProps:{size:"large",prefix:(0,r.jsx)(gn.Z,{className:"prefixIcon"})},name:A,placeholder:"\u624B\u673A\u53F7",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\uFF01"},{pattern:/^1\d{10}$/,message:"\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF\uFF01"}]}),(0,r.jsx)(ir.Z,{fieldProps:{size:"large",prefix:(0,r.jsx)(Tr.Z,{className:"prefixIcon"})},captchaProps:{size:"large"},placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",captchaTextRender:function(G,q){return G?"".concat(q," ","\u83B7\u53D6\u9A8C\u8BC1\u7801"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"},phoneName:A,name:k,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01"}],onGetCaptcha:function(){var z=U()(D()().mark(function G(q){var ae;return D()().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:ae={},ae[A]=q,f(u,n()({},ae),function(be){de.ZP.success("\u9A8C\u8BC1\u7801\u5DF2\u53D1\u9001\uFF0C\u8BF7\u67E5\u770B\u624B\u673A\u77ED\u4FE1")});case 3:case"end":return se.stop()}},G)}));return function(G){return z.apply(this,arguments)}}()})]}),(0,r.jsxs)("div",{style:{marginBlockEnd:24},children:[(0,r.jsx)(pn.Z,{noStyle:!0,name:"autoLogin",children:"\u81EA\u52A8\u767B\u5F55"}),(0,r.jsx)(oe,{})]}),(0,r.jsx)(fe,{})]}))})},jn=xn,In=d(52677),Dn=d.n(In),Ar=function(){var e=(0,s.useState)({error:null,isError:!1}),i=h()(e,2),f=i[0],o=i[1],u=(0,s.useCallback)(function(c){if(c===null){o({error:null,isError:!1});return}var p=c instanceof Error?c.message:c;o({error:p,isError:!0})},[]),a=(0,s.useCallback)(function(){o({error:null,isError:!1})},[]),S=(0,s.useCallback)(function(c){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"\u64CD\u4F5C\u5931\u8D25",I=p;c instanceof Error?I=c.message:typeof c=="string"?I=c:c&&Dn()(c)==="object"&&"message"in c&&(I=c.message||p),u(I),de.ZP.error(I),console.error("Error occurred:",c)},[u]),v=(0,s.useCallback)(function(c){return U()(D()().mark(function p(){var I=arguments;return D()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.prev=0,a(),E.next=4,c.apply(void 0,I);case 4:return E.abrupt("return",E.sent);case 7:return E.prev=7,E.t0=E.catch(0),S(E.t0),E.abrupt("return",void 0);case 11:case"end":return E.stop()}},p,null,[[0,7]])}))},[a,S]);return n()(n()({},f),{},{setError:u,clearError:a,handleError:S,withErrorHandling:v})},$n=null,Rn=function(){var e=(0,s.useState)(!1),i=h()(e,2),f=i[0],o=i[1],u=Ar(),a=u.error,S=u.handleError,v=u.clearError,c=(0,s.useRef)({cancelled:!1}),p=(0,s.useCallback)(function(){var A=U()(D()().mark(function E($){var L,x,w,k,Z,N,B,W,_,J,P=arguments;return D()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return L=P.length>1&&P[1]!==void 0?P[1]:{},x=L.onSuccess,w=L.onError,k=L.showSuccessMessage,Z=k===void 0?!1:k,N=L.successMessage,B=N===void 0?"\u64CD\u4F5C\u6210\u529F":N,c.current={cancelled:!1},F.prev=3,o(!0),v(),F.next=8,$();case 8:if(W=F.sent,!c.current.cancelled){F.next=11;break}return F.abrupt("return",void 0);case 11:if(!Z){F.next=17;break}return F.next=14,d.e(202).then(d.bind(d,52202));case 14:_=F.sent,J=_.message,J.success(B);case 17:return x==null||x(W),F.abrupt("return",W);case 21:if(F.prev=21,F.t0=F.catch(3),!c.current.cancelled){F.next=25;break}return F.abrupt("return",void 0);case 25:return S(F.t0),w==null||w(F.t0),F.abrupt("return",void 0);case 28:return F.prev=28,c.current.cancelled||o(!1),F.finish(28);case 31:case"end":return F.stop()}},E,null,[[3,21,28,31]])}));return function(E){return A.apply(this,arguments)}}(),[S,v]),I=(0,s.useCallback)(function(){c.current.cancelled=!0,o(!1)},[]);return{loading:f,error:a,execute:p,cancel:I}},On=null},18169:function(br,Ye,d){var Le=d(97857).default;typeof window!="undefined"&&d.e(623).then(d.t.bind(d,15623,23)).then(function(Me){var C=Me.default;C.setup({timeout:"200-600"});var ye=function(T){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"\u64CD\u4F5C\u6210\u529F";return{code:200,data:T,msg:R,success:!0,timestamp:Date.now()}},D=function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"\u64CD\u4F5C\u5931\u8D25",R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:500;return{code:R,data:null,msg:T,success:!1,timestamp:Date.now()}},Ve=function(){for(var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:50,R=[],h=1;h<=T;h++)R.push({id:h,name:C.Random.cname(),email:C.Random.email(),phone:C.Random.string("number",11),department:C.Random.pick(["\u6280\u672F\u90E8","\u4EA7\u54C1\u90E8","\u8FD0\u8425\u90E8","\u5E02\u573A\u90E8","\u4EBA\u4E8B\u90E8"]),position:C.Random.pick(["\u524D\u7AEF\u5DE5\u7A0B\u5E08","\u540E\u7AEF\u5DE5\u7A0B\u5E08","\u4EA7\u54C1\u7ECF\u7406","UI\u8BBE\u8BA1\u5E08","\u6D4B\u8BD5\u5DE5\u7A0B\u5E08"]),status:C.Random.pick([0,1]),createTime:C.Random.datetime(),updateTime:C.Random.datetime(),avatar:C.Random.image("100x100"),age:C.Random.integer(22,60),address:C.Random.county(!0)});return R},U=Ve(50),Xe=function(T){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,s=(R-1)*h,Pe=s+h;return{list:T.slice(s,Pe),total:T.length,current:R,pageSize:h}},n=function(T,R){return R?T.filter(function(h){return h.name.includes(R)||h.email.includes(R)||h.department.includes(R)}):T};C.mock(/\/api\/users(\?.*)?$/,"get",function(V){console.log("\u{1F310} Mock API: GET /api/users");var T=new URL(V.url,"http://localhost"),R=parseInt(T.searchParams.get("current")||"1"),h=parseInt(T.searchParams.get("pageSize")||"10"),s=T.searchParams.get("keyword")||"",Pe=n(U,s),De=Xe(Pe,R,h);return console.log("\u{1F4CA} \u8FD4\u56DE\u7528\u6237\u6570\u636E: ".concat(De.list.length,"/").concat(De.total," \u6761\u8BB0\u5F55")),ye(De)}),C.mock("/api/users","post",function(V){console.log("\u{1F310} Mock API: POST /api/users");try{var T=JSON.parse(V.body);if(!T.name||!T.email)return D("\u59D3\u540D\u548C\u90AE\u7BB1\u4E3A\u5FC5\u586B\u5B57\u6BB5",400);var R=U.find(function(s){return s.email===T.email});if(R)return D("\u90AE\u7BB1\u5DF2\u5B58\u5728",409);var h=Le(Le({id:U.length+1},T),{},{createTime:new Date().toISOString(),updateTime:new Date().toISOString(),avatar:C.Random.image("100x100")});return U.unshift(h),console.log("\u2705 \u7528\u6237\u521B\u5EFA\u6210\u529F: ".concat(h.name)),ye(h,"\u7528\u6237\u521B\u5EFA\u6210\u529F")}catch(s){return console.error("\u274C \u521B\u5EFA\u7528\u6237\u5931\u8D25:",s),D("\u8BF7\u6C42\u6570\u636E\u683C\u5F0F\u9519\u8BEF",400)}}),C.mock(/\/api\/users\/(\d+)$/,"put",function(V){console.log("\u{1F310} Mock API: PUT /api/users/:id");try{var T=parseInt(V.url.match(/\/api\/users\/(\d+)$/)[1]),R=JSON.parse(V.body),h=U.findIndex(function(s){return s.id===T});return h!==-1?(U[h]=Le(Le(Le({},U[h]),R),{},{updateTime:new Date().toISOString()}),console.log("\u2705 \u7528\u6237\u66F4\u65B0\u6210\u529F: ".concat(U[h].name)),ye(U[h],"\u7528\u6237\u66F4\u65B0\u6210\u529F")):D("\u7528\u6237\u4E0D\u5B58\u5728",404)}catch(s){return console.error("\u274C \u66F4\u65B0\u7528\u6237\u5931\u8D25:",s),D("\u8BF7\u6C42\u6570\u636E\u683C\u5F0F\u9519\u8BEF",400)}}),C.mock(/\/api\/users\/(\d+)$/,"delete",function(V){console.log("\u{1F310} Mock API: DELETE /api/users/:id");var T=parseInt(V.url.match(/\/api\/users\/(\d+)$/)[1]),R=U.findIndex(function(s){return s.id===T});if(R!==-1){var h=U.splice(R,1)[0];return console.log("\u2705 \u7528\u6237\u5220\u9664\u6210\u529F: ".concat(h.name)),ye(null,"\u7528\u6237\u5220\u9664\u6210\u529F")}else return D("\u7528\u6237\u4E0D\u5B58\u5728",404)}),C.mock("/api/users/batch","delete",function(V){console.log("\u{1F310} Mock API: DELETE /api/users/batch");try{var T=JSON.parse(V.body),R=T.idList;if(Array.isArray(R)){var h=0;return R.forEach(function(s){var Pe=U.findIndex(function(De){return De.id===s});Pe!==-1&&(U.splice(Pe,1),h++)}),console.log("\u2705 \u6279\u91CF\u5220\u9664\u6210\u529F: ".concat(h," \u4E2A\u7528\u6237")),ye(null,"\u6210\u529F\u5220\u9664 ".concat(h," \u4E2A\u7528\u6237"))}else return D("\u53C2\u6570\u9519\u8BEF",400)}catch(s){return console.error("\u274C \u6279\u91CF\u5220\u9664\u5931\u8D25:",s),D("\u8BF7\u6C42\u6570\u636E\u683C\u5F0F\u9519\u8BEF",400)}}),C.mock(/\/api\/tree(\?.*)?$/,"get",function(){console.log("\u{1F310} Mock API: GET /api/tree");var V=[{id:1,title:"\u6280\u672F\u90E8",value:"1",key:"1",children:[{id:11,title:"\u524D\u7AEF\u7EC4",value:"11",key:"11"},{id:12,title:"\u540E\u7AEF\u7EC4",value:"12",key:"12"}]},{id:2,title:"\u4EA7\u54C1\u90E8",value:"2",key:"2",children:[{id:21,title:"\u4EA7\u54C1\u8BBE\u8BA1",value:"21",key:"21"},{id:22,title:"\u4EA7\u54C1\u8FD0\u8425",value:"22",key:"22"}]}];return ye(V)}),C.mock("/api/login","post",function(V){console.log("\u{1F310} Mock API: POST /api/login");try{var T=JSON.parse(V.body),R=T.username,h=T.password;if(R==="admin"&&h==="123456"){var s={id:1,username:"admin",name:"\u7BA1\u7406\u5458",email:"admin@example.com",avatar:C.Random.image("100x100"),roles:["admin"],permissions:["*"],token:C.Random.string("upper",32)};return console.log("\u2705 \u767B\u5F55\u6210\u529F: admin"),ye(s,"\u767B\u5F55\u6210\u529F")}else return D("\u7528\u6237\u540D\u6216\u5BC6\u7801\u9519\u8BEF",401)}catch(Pe){return console.error("\u274C \u767B\u5F55\u5931\u8D25:",Pe),D("\u8BF7\u6C42\u6570\u636E\u683C\u5F0F\u9519\u8BEF",400)}}),console.log("%c\u{1F3AD} Durians Mock Service Started!","color: #52c41a; font-weight: bold; font-size: 16px;"),console.log("%c\u{1F4E1} Mock APIs are ready:","color: #1890ff; font-weight: bold;"),console.log("  \u{1F539} GET    /api/users - \u83B7\u53D6\u7528\u6237\u5217\u8868"),console.log("  \u{1F539} POST   /api/users - \u521B\u5EFA\u7528\u6237"),console.log("  \u{1F539} PUT    /api/users/:id - \u66F4\u65B0\u7528\u6237"),console.log("  \u{1F539} DELETE /api/users/:id - \u5220\u9664\u7528\u6237"),console.log("  \u{1F539} DELETE /api/users/batch - \u6279\u91CF\u5220\u9664"),console.log("  \u{1F539} GET    /api/tree - \u83B7\u53D6\u6811\u5F62\u6570\u636E"),console.log("  \u{1F539} POST   /api/login - \u7528\u6237\u767B\u5F55"),console.log("%c\u{1F4A1} \u6253\u5F00\u6D4F\u89C8\u5668\u5F00\u53D1\u8005\u5DE5\u5177\u67E5\u770B Mock \u8BF7\u6C42\u65E5\u5FD7","color: #faad14;")}).catch(function(Me){console.error("\u274C Mock \u670D\u52A1\u542F\u52A8\u5931\u8D25:",Me)})},24654:function(){}}]);
