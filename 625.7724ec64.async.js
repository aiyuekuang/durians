(self.webpackChunkdurians=self.webpackChunkdurians||[]).push([[625],{87391:function(en,ae,r){"use strict";r.r(ae),r.d(ae,{FormPro:function(){return ve},LoginPro:function(){return Xe},ModalPro:function(){return de},TablePro:function(){return ze}});var ge=r(15009),I=r.n(ge),xe=r(99289),V=r.n(xe),Fe=r(97857),t=r.n(Fe),je=r(19632),w=r.n(je),Pe=r(48689),ye=r(24969),Se=r(61534),Ce=r(86738),Q=r(45360),Te=r(96074),oe=r(60940),se=r(42075),q=r(14726),U=r(67294),$e=r(64599),le=r.n($e),Ae=r(11238),Y=function(n,d,l){var u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,m="";return u&&(m="api"),Ae.ZP.post(m+n,{data:d}).then(function(o){o.code==0?l(o):Q.ZP.error(o.msg)}).catch(function(o){console.log(o)})},Ze=function(n,d){var l=le()(n),u;try{var m=function(){var g=u.value,c=g.proConfig;g.request||g.valueType==="select"&&(g.request=function(){var S=V()(I()().mark(function A(x,Z){var j;return I()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return j=[],console.log(33333,x),s.next=4,d(c.url,t()(t()({},x),typeof c.params=="function"?c.params(x,Z):c.params),function(i){console.log(2222,i),j=c.setData(i)});case 4:return s.abrupt("return",j);case 5:case"end":return s.stop()}},A)}));return function(A,x){return S.apply(this,arguments)}}())};for(l.s();!(u=l.n()).done;)m()}catch(o){l.e(o)}finally{l.f()}return n},ie=r(89451),Re=r(5574),_=r.n(Re),Be=r(59847),Ie=r(54673),e=r(85893),Oe=function(n){var d=n.ajax,l=d===void 0?Y:d,u=n.fieldProps,m=u.fieldNames,o=u.params,g=o===void 0?function(i){return{}}:o,c=u.url,S=u.setData,A=(0,U.useState)([]),x=_()(A,2),Z=x[0],j=x[1];(0,U.useEffect)(function(){s({},t()({},g({})))},[]);function O(i,y,R){var f=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"value",B=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"children",P=(0,Ie.Z)(i),N=le()(P),K;try{for(N.s();!(K=N.n()).done;){var C=K.value;C[f]===y?C.children=R:C.children&&(C.children=O(C.children,y,R,f,B))}}catch(v){N.e(v)}finally{N.f()}return P}var s=function(y){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return l(c,t()({},g(y)),function(f){var B=S(f);m&&(B=B.map(function(P){return P.label=P[m.label],P.value=P[m.value],P})),j(function(P){return y.value?O(P,y.value,B):B})})};return(0,e.jsx)(Be.Z,t()(t()({},n==null?void 0:n.fieldProps),{},{treeDataSimpleMode:!0,style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:"\u8BF7\u9009\u62E9",loadData:s,treeData:Z}))},De=Oe,Le=function(n){var d=n.children,l=(0,U.useContext)(ie.L_);return(0,e.jsx)(ie.L_.Provider,{value:t()(t()({},l),{},{valueTypeMap:{treeSelectPro:{renderFormItem:function(m,o){return(0,e.jsx)(De,t()({},o))}}}}),children:d})},ue=Le,Me=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:"\u6807\u9898",dataIndex:"title",copyable:!0,ellipsis:!0,tooltip:"\u6807\u9898\u8FC7\u957F\u4F1A\u81EA\u52A8\u6536\u7F29",formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}}],Ee=function(n){var d=n.ajax,l=d===void 0?Y:d,u=n.url,m=u===void 0?"https://proapi.azurewebsites.net/github/issues":u,o=n.addUrl,g=n.editUrl,c=n.deleteUrl,S=n.deleteField,A=S===void 0?"idList":S,x=n.addFormProFieldProps,Z=x===void 0?{}:x,j=n.actionWidth,O=j===void 0?100:j,s=n.fieldProps,i=s===void 0?{search:{},columns:Me}:s,y=n.setData,R=y===void 0?function(h){return h.data.records}:y,f=n.setTotal,B=f===void 0?function(h){return h.data.total}:f,P=n.setMsg,N=P===void 0?function(h){return h.msg}:P,K=n.actionBar,C=K===void 0?[]:K,v=n.paginationAlias,E=v===void 0?{pageIndex:"pageIndex",pageSize:"pageSize"}:v,D=n.tableAlertOptionRenderPro,W=D===void 0?[]:D,b=(0,U.useRef)(),L=i.rowKey||"id",G=[].concat(w()(c?[function(h){var a=h.record;return(0,e.jsx)(he,{record:a,children:(0,e.jsx)("a",{children:"\u7F16\u8F91"})})}]:[]),w()(C),w()(c?[function(h){var a=h.record;return(0,e.jsx)(Ce.Z,{title:"\u5220\u9664",description:"\u786E\u5B9A\u5220\u9664\u8FD9\u6761\u6570\u636E\u5417\uFF1F",onConfirm:function(){pe([a[L]])},okText:"\u662F",cancelText:"\u5426",children:(0,e.jsx)("a",{style:{color:"red"},children:"\u5220\u9664"})})}]:[])),he=function(a){var F=a.children,p=a.record;return(0,e.jsx)(ve,{fieldProps:t()({initialValues:p,columns:i.columns.map(function(T){return t()(t()({},T),{},{width:"md"})}),onFinish:function(){var T=V()(I()().mark(function M(me){var z,J,re;return I()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return z=!1,J=o,re=me,p!=null&&p[L]&&g&&(re[L]=p==null?void 0:p[L],J=g),X.next=6,l(J,re,function(_e){var te;(te=b.current)===null||te===void 0||te.reload(),Q.ZP.success(N(_e)),z=!0});case 6:return X.abrupt("return",z);case 7:case"end":return X.stop()}},M)}));function $(M){return T.apply(this,arguments)}return $}()},Z),children:F})},qe=function(a,F){return(0,e.jsx)("div",{className:"durians_table_pro_action",children:G.map(function(p,T){return(0,e.jsxs)(U.Fragment,{children:[(0,e.jsx)(p,{record:F}),G.length>1&&T<G.length-1?(0,e.jsx)(Te.Z,{type:"vertical"}):null]},T)})})},pe=function(a){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},p={};p[A]=a,l(c,p,function(T){var $;Q.ZP.success(N(T)),($=b.current)===null||$===void 0||$.reload(),b.current.clearSelected(),F()})};return(0,e.jsx)(ue,{children:(0,e.jsx)(Se.Z,t()(t()({defaultSize:"small",scroll:{x:"100%"},rowSelection:{selections:[oe.Z.SELECTION_ALL,oe.Z.SELECTION_INVERT]},tableAlertRender:function(a){var F=a.selectedRowKeys,p=a.selectedRows,T=a.onCleanSelected;return console.log(F,p),(0,e.jsx)(se.Z,{size:24,children:(0,e.jsxs)("span",{children:["\u5DF2\u9009 ",F.length," \u9879",(0,e.jsx)("a",{style:{marginInlineStart:8},onClick:T,children:"\u53D6\u6D88\u9009\u62E9"})]})})},tableAlertOptionRender:function(a){var F=a.selectedRowKeys,p=a.selectedRows,T=a.onCleanSelected;return(0,e.jsxs)(se.Z,{size:16,children:[c?(0,e.jsx)(de,{title:"\u662F\u5426\u786E\u5B9A\u5220\u9664\uFF1F",Content:function(){return"\u786E\u5B9A\u5220\u9664\uFF1F"},handleOk:function(M){pe(F,function(){M()})},children:(0,e.jsx)(q.ZP,{size:"small",icon:(0,e.jsx)(Pe.Z,{}),danger:!0,children:"\u6279\u91CF\u5220\u9664"},"danger")}):null,W.map(function($,M){return(0,e.jsx)($,{selectedRowKeys:F,selectedRows:p,onCleanSelected:T},M)})]})},actionRef:b,request:function(){var h=V()(I()().mark(function a(F,p,T){var $,M;return I()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if($=i.dataSource,M={},M[E.pageIndex]=F.current,M[E.pageSize]=F.pageSize,console.log(777,p,F,T,M),!m){z.next=8;break}return z.next=8,l(m,t()(t()({},M),F),function(J){console.log(J),$=J});case 8:return z.abrupt("return",Promise.resolve({data:R($),success:!0,total:B($)}));case 9:case"end":return z.stop()}},a)}));return function(a,F,p){return h.apply(this,arguments)}}(),editable:{type:"multiple"},columnsState:{persistenceKey:"pro-table-singe-demos",persistenceType:"localStorage",defaultValue:{option:{fixed:"right",disable:!0}},onChange:function(a){console.log("value: ",a)}},rowKey:"id",options:{setting:{listsHeight:400}},form:{syncToUrl:!1},pagination:{pageSize:10,onChange:function(a){return console.log(a)}},dateFormatter:"string"},i),{},{columns:[].concat(w()(Ze(i.columns,l)),w()(G.length?[{title:"\u64CD\u4F5C\u9879",dataIndex:"actionTablePro",fixed:"right",hideInSearch:!0,actionWidth:O,render:qe}]:[])),search:i.search?t()({labelWidth:"auto",span:4,defaultCollapsed:!1},i.search||{}):{labelWidth:"auto"},toolBarRender:function(){return[].concat(w()(o?[(0,e.jsx)(he,{children:(0,e.jsx)(q.ZP,{icon:(0,e.jsx)(ye.Z,{}),type:"primary",children:"\u65B0\u5EFA"},"button")})]:[]),w()(i.toolBarRender||[]))}}))})},ze=Ee,He=r(85576),Ne=function(n){var d=n.title,l=d===void 0?"\u57FA\u7840":d,u=n.handleOk,m=u===void 0?function(f){f()}:u,o=n.Content,g=o===void 0?function(){return(0,e.jsx)("div",{children:"\u793A\u4F8B"})}:o,c=n.children,S=c===void 0?(0,e.jsx)("div",{children:"\u70B9\u51FB"}):c,A=n.fieldProps,x=A===void 0?{}:A,Z=(0,U.useState)(!1),j=_()(Z,2),O=j[0],s=j[1],i=function(){s(!0)},y=function(){m(function(){s(!1)})},R=function(){s(!1)};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{onClick:i,children:S}),(0,e.jsx)(He.Z,t()(t()({title:l,open:O,onOk:y,onCancel:R},x),{},{children:(0,e.jsx)(g,{isModalOpen:O,setIsModalOpen:s})}))]})},de=Ne,be=r(87547),ce=r(94149),Ue=r(24454),Ke=r(68262),ee=r(5966),we=r(16434),We=r(63434),Ve=r(9361),ne=r(56140),Ge=r(81354),k=r.n(Ge),fe=r(99191),Je=(0,fe.df)([{id:"SHA256",fun:function(n){return k().SHA256(n).toString(k().enc.Base64)}},{id:"MD5",fun:function(n){return k().MD5(n).toString(k().enc.Hex)}}]),Qe=function(n){var d=n.ajax,l=d===void 0?Y:d,u=n.url,m=n.captchaUrl,o=n.loginFormFieldProps,g=n.hasSmsLogin,c=g===void 0?!1:g,S=n.hasAccountLogin,A=S===void 0?!0:S,x=n.phoneField,Z=x===void 0?"mobile":x,j=n.encryption,O=j===void 0?"SHA256":j,s=n.extraPasswordText,i=s===void 0?"":s,y=Ve.Z.useToken(),R=y.token,f=(0,U.useState)("account"),B=_()(f,2),P=B[0],N=B[1],K=(0,U.useRef)();return(0,e.jsx)("div",{style:{backgroundColor:R.colorBgContainer},className:"crm_login_body",children:(0,e.jsxs)(Ke.U,t()(t()({formRef:K,title:"\u767B\u5F55",subTitle:"\u6B22\u8FCE\u767B\u5F55\u7CFB\u7EDF",initialValues:{username:"",password:""},onFinish:function(){var C=V()(I()().mark(function v(E){var D,W;return I()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,K.current.validateFields();case 2:return D=L.sent,D&&(W=t()({},E),W.password=Je.get(O).fun(E.password+i),l(u,W,function(G){(0,fe.ok)("token",G.data)},!1)),L.abrupt("return",!0);case 5:case"end":return L.stop()}},v)}));return function(v){return C.apply(this,arguments)}}()},o),{},{children:[(0,e.jsxs)(ne.Z,{centered:!0,activeKey:P,onChange:function(v){return N(v)},children:[(0,e.jsx)(ne.Z.TabPane,{tab:"\u8D26\u53F7\u5BC6\u7801\u767B\u5F55",disabled:!A},"account"),(0,e.jsx)(ne.Z.TabPane,{tab:"\u624B\u673A\u53F7\u767B\u5F55",disabled:!c},"phone")]}),P==="account"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(ee.Z,{name:"username",fieldProps:{size:"large",prefix:(0,e.jsx)(be.Z,{className:"prefixIcon"})},placeholder:"\u7528\u6237\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"}]}),(0,e.jsx)(ee.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,e.jsx)(ce.Z,{className:"prefixIcon"}),strengthText:"\u5BC6\u7801\u5E94\u5305\u542B\u6570\u5B57\u3001\u5B57\u6BCD\u548C\u7279\u6B8A\u5B57\u7B26\uFF0C\u957F\u5EA6\u81F3\u5C11\u4E3A8\u4E2A\u5B57\u7B26",statusRender:function(v){var E=function(){return v&&v.length>12?"ok":v&&v.length>6?"pass":"poor"},D=E();return D==="pass"?(0,e.jsx)("div",{style:{color:R.colorWarning},children:"\u5F3A\u5EA6\uFF1A\u4E2D"}):D==="ok"?(0,e.jsx)("div",{style:{color:R.colorSuccess},children:"\u5F3A\u5EA6\uFF1A\u5F3A"}):(0,e.jsx)("div",{style:{color:R.colorError},children:"\u5F3A\u5EA6\uFF1A\u5F31"})}},placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"}]})]}),P==="phone"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(ee.Z,{fieldProps:{size:"large",prefix:(0,e.jsx)(Ue.Z,{className:"prefixIcon"})},name:Z,placeholder:"\u624B\u673A\u53F7",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\uFF01"},{pattern:/^1\d{10}$/,message:"\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF\uFF01"}]}),(0,e.jsx)(we.Z,{fieldProps:{size:"large",prefix:(0,e.jsx)(ce.Z,{className:"prefixIcon"})},captchaProps:{size:"large"},placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",captchaTextRender:function(v,E){return v?"".concat(E," ","\u83B7\u53D6\u9A8C\u8BC1\u7801"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"},phoneName:Z,name:"captcha",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01"}],onGetCaptcha:function(){var C=V()(I()().mark(function v(E){var D;return I()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:D={},D[Z]=E,l(m,t()({},D),function(L){Q.ZP.success("\u9A8C\u8BC1\u7801\u5DF2\u53D1\u9001\uFF0C\u8BF7\u67E5\u770B\u624B\u673A\u77ED\u4FE1")});case 3:case"end":return b.stop()}},v)}));return function(v){return C.apply(this,arguments)}}()})]}),(0,e.jsxs)("div",{style:{marginBlockEnd:24},children:[(0,e.jsx)(We.Z,{noStyle:!0,name:"autoLogin",children:"\u81EA\u52A8\u767B\u5F55"}),(0,e.jsx)("a",{style:{float:"right"},children:"\u5FD8\u8BB0\u5BC6\u7801"})]})]}))})},Xe=Qe,Ye=r(77646),ke=function(n){var d=n.layoutType,l=d===void 0?"ModalForm":d,u=n.fieldProps,m=u===void 0?{}:u,o=n.url,g=n.ajax,c=g===void 0?Y:g,S=n.finishFun,A=S===void 0?function(){}:S,x=n.setMsg,Z=x===void 0?function(s){return s.msg}:x,j=n.children,O=j===void 0?(0,e.jsx)(q.ZP,{children:"\u70B9\u51FB\u6211"}):j;return(0,e.jsx)(ue,{children:(0,e.jsx)(Ye.Z,t()(t()({trigger:O,layoutType:"ModalForm",onFinish:function(){var s=V()(I()().mark(function i(y){return I()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return console.log(y),f.next=3,c(o,y,function(B){Q.ZP.success(Z(B)),A()});case 3:case"end":return f.stop()}},i)}));return function(i){return s.apply(this,arguments)}}()},l==="ModalForm"?{modalProps:{destroyOnClose:!0}}:{drawerProps:{destroyOnClose:!0}}),{},{columns:[{title:"\u6807\u9898",dataIndex:"title",formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]},width:"md"}]},m))})},ve=ke},42480:function(){},24654:function(){}}]);
