(self.webpackChunkdurians=self.webpackChunkdurians||[]).push([[625],{87391:function(ar,ce,n){"use strict";n.r(ce),n.d(ce,{FormPro:function(){return Fe},LoginPro:function(){return er},ModalPro:function(){return ge},TablePro:function(){return We}});var je=n(15009),U=n.n(je),Se=n(99289),Q=n.n(Se),Ce=n(97857),t=n.n(Ce),$e=n(19632),W=n.n($e),Ae=n(48689),Te=n(24969),Ze=n(61534),Ie=n(86738),Re=n(96074),ee=n(45360),fe=n(60940),ve=n(42075),ae=n(14726),N=n(67294),Be=n(64599),pe=n.n(Be),Oe=n(11238),De=n(81354),H=n.n(De),re=function(e,s,o){var l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,c="";return l&&(c="api"),Oe.ZP.post(c+e,{data:s}).then(function(i){i.code==0?o(i):ee.ZP.error(i.msg)}).catch(function(i){console.log(i)})},Le=function(e,s){var o=pe()(e),l;try{var c=function(){var p=l.value,h=p.proConfig;p.request||(p.valueType==="select"||p.valueType==="treeSelect")&&(p.request=function(){var A=Q()(U()().mark(function D(P,T){var j;return U()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return j=[],u.next=3,s(h.url,t()(t()({},P),typeof h.params=="function"?h.params(P,T):h.params),function(Z){j=h.setData(Z)});case 3:return u.abrupt("return",j);case 4:case"end":return u.stop()}},D)}));return function(D,P){return A.apply(this,arguments)}}())};for(o.s();!(l=o.n()).done;)c()}catch(i){o.e(i)}finally{o.f()}return e},Ee=function(e,s,o){var l=H().enc.Utf8.parse(s),c=H().enc.Utf8.parse(o);return H().AES.encrypt(e,l,{mode:H().mode.ECB,padding:H().pad.Pkcs7}).toString()},or=function(e,s,o){var l=CryptoJS.enc.Utf8.parse(s),c=CryptoJS.enc.Utf8.parse(o);return CryptoJS.AES.decrypt(e,l,{mode:CryptoJS.mode.ECB,padding:CryptoJS.pad.Pkcs7})},he=n(89451),Me=n(5574),oe=n.n(Me),be=n(59847),ze=n(54673),r=n(85893),Ke=function(e){var s=e.ajax,o=s===void 0?re:s,l=e.fieldProps,c=l.fieldNames,i=l.params,p=i===void 0?function(Z){return{}}:i,h=l.url,A=l.setData,D=(0,N.useState)([]),P=oe()(D,2),T=P[0],j=P[1];(0,N.useEffect)(function(){u({},t()({},p({})))},[]);function z(Z,F,$){var m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"value",L=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"children",f=(0,ze.Z)(Z),S=pe()(f),E;try{for(S.s();!(E=S.n()).done;){var I=E.value;I[m]===F?I.children=$:I.children&&(I.children=z(I.children,F,$,m,L))}}catch(G){S.e(G)}finally{S.f()}return f}var u=function(F){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return o(h,t()({},p(F)),function(m){var L=A(m);c&&(L=L.map(function(f){return f.label=f[c.label],f.value=f[c.value],f})),j(function(f){return F.value?z(f,F.value,L):L})})};return(0,r.jsx)(be.Z,t()(t()({},e==null?void 0:e.fieldProps),{},{treeDataSimpleMode:!0,style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:"\u8BF7\u9009\u62E9",loadData:u,treeData:T}))},Ue=Ke,Ne=function(e){var s=e.children,o=(0,N.useContext)(he.L_);return(0,r.jsx)(he.L_.Provider,{value:t()(t()({},o),{},{valueTypeMap:{treeSelectPro:{renderFormItem:function(c,i){return(0,r.jsx)(Ue,t()({},i))}}}}),children:s})},me=Ne,He=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:"\u6807\u9898",dataIndex:"title",copyable:!0,ellipsis:!0,tooltip:"\u6807\u9898\u8FC7\u957F\u4F1A\u81EA\u52A8\u6536\u7F29",formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}}],we=function(e){var s=e.ajax,o=s===void 0?re:s,l=e.url,c=l===void 0?"https://proapi.azurewebsites.net/github/issues":l,i=e.addUrl,p=e.editUrl,h=e.deleteUrl,A=e.deleteFields,D=A===void 0?"idList":A,P=e.deleteField,T=P===void 0?null:P,j=e.deleteFieldIsArr,z=j===void 0?!1:j,u=e.deleteParams,Z=u===void 0?{}:u,F=e.addFormProFieldProps,$=F===void 0?{}:F,m=e.actionWidth,L=m===void 0?100:m,f=e.fieldProps,S=f===void 0?{search:{},columns:He,rowKey:"id"}:f,E=e.setData,I=E===void 0?function(g){return g.data.records}:E,G=e.setTotal,ne=G===void 0?function(g){return g.data.total}:G,k=e.setMsg,ue=k===void 0?function(g){return g.msg}:k,Y=e.actionBar,te=Y===void 0?[]:Y,R=e.paginationAlias,d=R===void 0?{pageIndex:"pageIndex",pageSize:"pageSize"}:R,B=e.tableAlertOptionRenderPro,O=B===void 0?[]:B,J=(0,N.useRef)(),M=S.rowKey||"id",q=[].concat(W()(h?[function(g){var a=g.record;return(0,r.jsx)(ye,{title:"\u7F16\u8F91",id:M,record:a,children:(0,r.jsx)("a",{children:"\u7F16\u8F91"})})}]:[]),W()(te),W()(h?[function(g){var a=g.record;return(0,r.jsx)(Ie.Z,{title:"\u5220\u9664",description:"\u786E\u5B9A\u5220\u9664\u8FD9\u6761\u6570\u636E\u5417\uFF1F",onConfirm:function(){Pe([a[M]],function(){},!1)},okText:"\u662F",cancelText:"\u5426",children:(0,r.jsx)("a",{style:{color:"red"},children:"\u5220\u9664"})})}]:[])),ye=function(a){var y=a.children,v=a.record,x=a.id,C=a.title,b=C===void 0?"\u65B0\u589E":C;console.log(5555,v,x);var V=i,w={};return x&&v!==null&&v!==void 0&&v[x]&&(w[x]=v==null?void 0:v[x],p&&(V=p)),(0,r.jsx)(Fe,t()(t()({ajax:o},$),{},{url:V,finishFun:function(){var de;(de=J.current)===null||de===void 0||de.reload()},params:t()(t()({},w),$.params),fieldProps:t()({initialValues:v,columns:S.columns.map(function(_){return t()(t()({},_),{},{width:null})}),title:b},$.fieldProps),children:y}))},tr=function(a,y){return(0,r.jsx)("div",{className:"durians_table_pro_action",children:q.map(function(v,x){return(0,r.jsxs)(N.Fragment,{children:[(0,r.jsx)(v,{record:y}),q.length>1&&x<q.length-1?(0,r.jsx)(Re.Z,{type:"vertical"}):null]},x)})})},Pe=function(a){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,x=a;!z&&!v&&(x=a[0]);var C=t()({},Z);v?C[D]=x:T?C[T]=x:C[S.rowKey||"id"]=x,o(h,C,function(b){var V;ee.ZP.success(ue(b)),(V=J.current)===null||V===void 0||V.reload(),J.current.clearSelected(),y()})};return(0,r.jsx)(me,{children:(0,r.jsx)(Ze.Z,t()(t()({defaultSize:"small",scroll:{x:"100%"},rowSelection:{selections:[fe.Z.SELECTION_ALL,fe.Z.SELECTION_INVERT]},tableAlertRender:function(a){var y=a.selectedRowKeys,v=a.selectedRows,x=a.onCleanSelected;return console.log(y,v),(0,r.jsx)(ve.Z,{size:24,children:(0,r.jsxs)("span",{children:["\u5DF2\u9009 ",y.length," \u9879",(0,r.jsx)("a",{style:{marginInlineStart:8},onClick:x,children:"\u53D6\u6D88\u9009\u62E9"})]})})},tableAlertOptionRender:function(a){var y=a.selectedRowKeys,v=a.selectedRows,x=a.onCleanSelected;return(0,r.jsxs)(ve.Z,{size:16,children:[h?(0,r.jsx)(ge,{title:"\u662F\u5426\u786E\u5B9A\u5220\u9664\uFF1F",Content:function(){return"\u786E\u5B9A\u5220\u9664\uFF1F"},handleOk:function(b){Pe(y,function(){b()})},children:(0,r.jsx)(ae.ZP,{size:"small",icon:(0,r.jsx)(Ae.Z,{}),danger:!0,children:"\u6279\u91CF\u5220\u9664"},"danger")}):null,O.map(function(C,b){return(0,r.jsx)(C,{selectedRowKeys:y,selectedRows:v,onCleanSelected:x},b)})]})},actionRef:J,request:function(){var g=Q()(U()().mark(function a(y,v,x){var C,b;return U()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(C=S.dataSource,b={},b[d.pageIndex]=y.current,b[d.pageSize]=y.pageSize,console.log(777,v,y,x,b),!c){w.next=8;break}return w.next=8,o(c,t()(t()({},b),y),function(_){console.log(_),C=_});case 8:return w.abrupt("return",Promise.resolve({data:I(C),success:!0,total:ne(C)}));case 9:case"end":return w.stop()}},a)}));return function(a,y,v){return g.apply(this,arguments)}}(),editable:{type:"multiple"},columnsState:{persistenceKey:"pro-table-singe-demos",persistenceType:"localStorage",defaultValue:{option:{fixed:"right",disable:!0}},onChange:function(a){console.log("value: ",a)}},rowKey:"id",options:{setting:{listsHeight:400}},form:{syncToUrl:!1},pagination:{pageSize:10,onChange:function(a){return console.log(a)}},dateFormatter:"string"},S),{},{columns:[].concat(W()(Le(S.columns,o)),W()(q.length?[{title:"\u64CD\u4F5C",dataIndex:"actionTablePro",fixed:"right",hideInSearch:!0,actionWidth:L,render:tr}]:[])),search:S.search?t()({labelWidth:"auto",span:4,defaultCollapsed:!1},S.search||{}):{labelWidth:"auto"},toolBarRender:function(){return[].concat(W()(i?[(0,r.jsx)(ye,{children:(0,r.jsx)(ae.ZP,{icon:(0,r.jsx)(Te.Z,{}),type:"primary",children:"\u65B0\u5EFA"},"button")})]:[]),W()(S.toolBarRender||[]))}}))})},We=we,Je=n(85576),Ve=function(e){var s=e.title,o=s===void 0?"\u57FA\u7840":s,l=e.handleOk,c=l===void 0?function(m){m()}:l,i=e.Content,p=i===void 0?function(){return(0,r.jsx)("div",{children:"\u793A\u4F8B"})}:i,h=e.children,A=h===void 0?(0,r.jsx)("div",{children:"\u70B9\u51FB"}):h,D=e.fieldProps,P=D===void 0?{}:D,T=(0,N.useState)(!1),j=oe()(T,2),z=j[0],u=j[1],Z=function(){u(!0)},F=function(){c(function(){u(!1)})},$=function(){u(!1)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{onClick:Z,children:A}),(0,r.jsx)(Je.Z,t()(t()({title:o,open:z,onOk:F,onCancel:$},P),{},{children:(0,r.jsx)(p,{isModalOpen:z,setIsModalOpen:u})}))]})},ge=Ve,Ge=n(87547),xe=n(94149),ke=n(24454),Qe=n(68262),le=n(5966),Xe=n(16434),Ye=n(63434),qe=n(9361),se=n(56140),X=n(99191),lr=(0,X.df)([{id:"SHA256",fun:function(e){return H().SHA256(e).toString(H().enc.Base64)}},{id:"MD5",fun:function(e){return H().MD5(e).toString(H().enc.Hex)}}]),ie="autoLogin",_e=function(e){var s=e.ajax,o=s===void 0?re:s,l=e.url,c=e.captchaUrl,i=e.loginFormFieldProps,p=e.hasSmsLogin,h=p===void 0?!1:p,A=e.hasAccountLogin,D=A===void 0?!0:A,P=e.phoneField,T=P===void 0?"mobile":P,j=e.extraPasswordText,z=j===void 0?"":j,u=e.secretKey,Z=u===void 0?"":u,F=e.setData,$=F===void 0?function(R){return R.data}:F,m=e.tokenField,L=m===void 0?"token":m,f=e.callback,S=f===void 0?function(){}:f,E=qe.Z.useToken(),I=E.token,G=(0,N.useState)("account"),ne=oe()(G,2),k=ne[0],ue=ne[1],Y=(0,N.useRef)();(0,N.useEffect)(function(){var R=(0,X.pv)(ie);R&&te((0,X.pv)(ie))},[]);var te=function(d){var B=t()({},d);B.password=Ee(B.password+z,Z,Z),o(l,B,function(O){(0,X.KN)(L,$(O.data)),d.autoLogin&&(0,X.ok)(ie,d),S(O)},!1)};return(0,r.jsx)("div",{style:{backgroundColor:I.colorBgContainer},className:"crm_login_body",children:(0,r.jsxs)(Qe.U,t()(t()({formRef:Y,title:"\u767B\u5F55",subTitle:"\u6B22\u8FCE\u767B\u5F55\u7CFB\u7EDF",initialValues:{username:"",password:""},onFinish:function(){var R=Q()(U()().mark(function d(B){var O;return U()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,Y.current.validateFields();case 2:return O=M.sent,O&&te(B),M.abrupt("return",!0);case 5:case"end":return M.stop()}},d)}));return function(d){return R.apply(this,arguments)}}()},i),{},{children:[(0,r.jsxs)(se.Z,{centered:!0,activeKey:k,onChange:function(d){return ue(d)},children:[(0,r.jsx)(se.Z.TabPane,{tab:"\u8D26\u53F7\u5BC6\u7801\u767B\u5F55",disabled:!D},"account"),(0,r.jsx)(se.Z.TabPane,{tab:"\u624B\u673A\u53F7\u767B\u5F55",disabled:!h},"phone")]}),k==="account"&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(le.Z,{name:"username",fieldProps:{size:"large",prefix:(0,r.jsx)(Ge.Z,{className:"prefixIcon"})},placeholder:"\u7528\u6237\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"}]}),(0,r.jsx)(le.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,r.jsx)(xe.Z,{className:"prefixIcon"}),strengthText:"\u5BC6\u7801\u5E94\u5305\u542B\u6570\u5B57\u3001\u5B57\u6BCD\u548C\u7279\u6B8A\u5B57\u7B26\uFF0C\u957F\u5EA6\u81F3\u5C11\u4E3A8\u4E2A\u5B57\u7B26",statusRender:function(d){var B=function(){return d&&d.length>12?"ok":d&&d.length>6?"pass":"poor"},O=B();return O==="pass"?(0,r.jsx)("div",{style:{color:I.colorWarning},children:"\u5F3A\u5EA6\uFF1A\u4E2D"}):O==="ok"?(0,r.jsx)("div",{style:{color:I.colorSuccess},children:"\u5F3A\u5EA6\uFF1A\u5F3A"}):(0,r.jsx)("div",{style:{color:I.colorError},children:"\u5F3A\u5EA6\uFF1A\u5F31"})}},placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"}]})]}),k==="phone"&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(le.Z,{fieldProps:{size:"large",prefix:(0,r.jsx)(ke.Z,{className:"prefixIcon"})},name:T,placeholder:"\u624B\u673A\u53F7",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\uFF01"},{pattern:/^1\d{10}$/,message:"\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF\uFF01"}]}),(0,r.jsx)(Xe.Z,{fieldProps:{size:"large",prefix:(0,r.jsx)(xe.Z,{className:"prefixIcon"})},captchaProps:{size:"large"},placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",captchaTextRender:function(d,B){return d?"".concat(B," ","\u83B7\u53D6\u9A8C\u8BC1\u7801"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"},phoneName:T,name:"captcha",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01"}],onGetCaptcha:function(){var R=Q()(U()().mark(function d(B){var O;return U()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:O={},O[T]=B,o(c,t()({},O),function(q){ee.ZP.success("\u9A8C\u8BC1\u7801\u5DF2\u53D1\u9001\uFF0C\u8BF7\u67E5\u770B\u624B\u673A\u77ED\u4FE1")});case 3:case"end":return M.stop()}},d)}));return function(d){return R.apply(this,arguments)}}()})]}),(0,r.jsxs)("div",{style:{marginBlockEnd:24},children:[(0,r.jsx)(Ye.Z,{noStyle:!0,name:"autoLogin",children:"\u81EA\u52A8\u767B\u5F55"}),(0,r.jsx)("a",{style:{float:"right"},children:"\u5FD8\u8BB0\u5BC6\u7801"})]})]}))})},er=_e,rr=n(77646),nr=function(e){var s=e.params,o=s===void 0?{}:s,l=e.layoutType,c=l===void 0?"ModalForm":l,i=e.fieldProps,p=i===void 0?{}:i,h=e.url,A=e.ajax,D=A===void 0?re:A,P=e.finishFun,T=P===void 0?function(){}:P,j=e.setMsg,z=j===void 0?function(F){return F.msg}:j,u=e.children,Z=u===void 0?(0,r.jsx)(ae.ZP,{children:"\u70B9\u51FB\u6211"}):u;return console.log(777888,p),(0,r.jsx)(me,{children:(0,r.jsx)(rr.Z,t()(t()({trigger:Z,layoutType:"ModalForm",onFinish:Q()(U()().mark(function F(){var $,m,L,f=arguments;return U()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return $=f.length>0&&f[0]!==void 0?f[0]:{},m=!1,L=t()(t()({},o),$),console.log($),E.next=6,D(h,L,function(I){ee.ZP.success(z(I)),T(),m=!0});case 6:return E.abrupt("return",m);case 7:case"end":return E.stop()}},F)}))},c==="ModalForm"?{modalProps:{destroyOnClose:!0}}:{drawerProps:{destroyOnClose:!0}}),{},{columns:[{title:"\u6807\u9898",dataIndex:"title",formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]},width:"md"}]},p))})},Fe=nr},42480:function(){},24654:function(){}}]);
