(self.webpackChunkdurians=self.webpackChunkdurians||[]).push([[625],{87391:function(_e,ne,n){"use strict";n.r(ne),n.d(ne,{FormPro:function(){return ce},LoginPro:function(){return Qe},ModalPro:function(){return ie},TablePro:function(){return Me}});var me=n(15009),O=n.n(me),ge=n(99289),K=n.n(ge),xe=n(97857),a=n.n(xe),Fe=n(19632),b=n.n(Fe),je=n(48689),Pe=n(24969),ye=n(79050),Ce=n(86738),w=n(45360),Se=n(96074),te=n(62120),ae=n(42075),Y=n(14726),N=n(67294),Te=n(64599),oe=n.n(Te),$e=n(11238),V=function(r,c,i){var d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,m="";return d&&(m="api"),$e.ZP.post(m+r,{data:c}).then(function(l){l.code==0?i(l):w.ZP.error(l.msg)}).catch(function(l){console.log(l)})},Ae=function(r,c){var i=oe()(r),d;try{var m=function(){var g=d.value,v=g.proConfig;(g.valueType==="select"||g.valueType==="treeSelect")&&(g.request=function(){var $=K()(O()().mark(function R(P,B){var y;return O()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return y=[],u.next=3,c(v.url,a()({},typeof v.params=="function"?v.params(P,B):v.params),function(s){console.log(2222,s),y=v.setData(s)});case 3:return u.abrupt("return",y);case 4:case"end":return u.stop()}},R)}));return function(R,P){return $.apply(this,arguments)}}())};for(i.s();!(d=i.n()).done;)m()}catch(l){i.e(l)}finally{i.f()}return r},le=n(89451),Ze=n(5574),k=n.n(Ze),Re=n(59847),Be=n(54673),e=n(85893),Ie=function(r){var c=r.ajax,i=c===void 0?V:c,d=r.fieldProps,m=d.fieldNames,l=d.params,g=l===void 0?function(s){return{}}:l,v=d.url,$=d.setData,R=(0,N.useState)([]),P=k()(R,2),B=P[0],y=P[1];(0,N.useEffect)(function(){u({},a()({},g({})))},[]);function S(s,x,D){var f=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"value",j=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"children",t=(0,Be.Z)(s),C=oe()(t),T;try{for(C.s();!(T=C.n()).done;){var I=T.value;I[f]===x?I.children=D:I.children&&(I.children=S(I.children,x,D,f,j))}}catch(z){C.e(z)}finally{C.f()}return t}var u=function(x){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return i(v,a()({},g(x)),function(f){var j=$(f);m&&(j=j.map(function(t){return t.label=t[m.label],t.value=t[m.value],t})),y(function(t){return x.value?S(t,x.value,j):j})})};return(0,e.jsx)(Re.Z,a()(a()({},r==null?void 0:r.fieldProps),{},{treeDataSimpleMode:!0,style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:"\u8BF7\u9009\u62E9",loadData:u,treeData:B}))},Oe=Ie,Le=function(r){var c=r.children,i=(0,N.useContext)(le.L_);return(0,e.jsx)(le.L_.Provider,{value:a()(a()({},i),{},{valueTypeMap:{treeSelectPro:{renderFormItem:function(m,l){return(0,e.jsx)(Oe,a()({},l))}}}}),children:c})},se=Le,De=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:"\u6807\u9898",dataIndex:"title",copyable:!0,ellipsis:!0,tooltip:"\u6807\u9898\u8FC7\u957F\u4F1A\u81EA\u52A8\u6536\u7F29",formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}}],Ee=function(r){var c=r.ajax,i=c===void 0?V:c,d=r.url,m=d===void 0?"https://proapi.azurewebsites.net/github/issues":d,l=r.addUrl,g=r.editUrl,v=r.deleteUrl,$=r.deleteField,R=$===void 0?"idList":$,P=r.addFormProFieldProps,B=P===void 0?{}:P,y=r.actionWidth,S=y===void 0?100:y,u=r.fieldProps,s=u===void 0?{search:{},columns:De}:u,x=r.setData,D=x===void 0?function(h){return h.data.records}:x,f=r.setTotal,j=f===void 0?function(h){return h.data.total}:f,t=r.setMsg,C=t===void 0?function(h){return h.msg}:t,T=r.actionBar,I=T===void 0?[]:T,z=r.paginationAlias,E=z===void 0?{pageIndex:"pageIndex",pageSize:"pageSize"}:z,G=r.tableAlertOptionRenderPro,fe=G===void 0?[]:G,J=(0,N.useRef)(),Q=s.rowKey||"id",X=[].concat(b()(v?[function(h){var o=h.record;return(0,e.jsx)(ve,{record:o,children:(0,e.jsx)("a",{children:"\u7F16\u8F91"})})}]:[]),b()(I),b()(v?[function(h){var o=h.record;return(0,e.jsx)(Ce.Z,{title:"\u5220\u9664",description:"\u786E\u5B9A\u5220\u9664\u8FD9\u6761\u6570\u636E\u5417\uFF1F",onConfirm:function(){he([o[Q]])},okText:"\u662F",cancelText:"\u5426",children:(0,e.jsx)("a",{style:{color:"red"},children:"\u5220\u9664"})})}]:[])),ve=function(o){var F=o.children,p=o.record;return(0,e.jsx)(ce,{fieldProps:a()({initialValues:p,columns:s.columns.map(function(A){return a()(a()({},A),{},{width:"md"})}),onFinish:function(){var A=K()(O()().mark(function L(pe){var M,H,ee;return O()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return M=!1,H=l,ee=pe,p!=null&&p[Q]&&g&&(ee[Q]=p==null?void 0:p[Q],H=g),W.next=6,i(H,ee,function(qe){var re;(re=J.current)===null||re===void 0||re.reload(),w.ZP.success(C(qe)),M=!0});case 6:return W.abrupt("return",M);case 7:case"end":return W.stop()}},L)}));function Z(L){return A.apply(this,arguments)}return Z}(),rowProps:{gutter:[16,16]},colProps:{span:12},grid:!0},B),children:F})},ke=function(o,F){return(0,e.jsx)("div",{className:"durians_table_pro_action",children:X.map(function(p,A){return(0,e.jsxs)(N.Fragment,{children:[(0,e.jsx)(p,{record:F}),X.length>1&&A<X.length-1?(0,e.jsx)(Se.Z,{type:"vertical"}):null]},A)})})},he=function(o){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},p={};p[R]=o,i(v,p,function(A){var Z;w.ZP.success(C(A)),(Z=J.current)===null||Z===void 0||Z.reload(),J.current.clearSelected(),F()})};return(0,e.jsx)(se,{children:(0,e.jsx)(ye.Z,a()(a()({defaultSize:"small",scroll:{x:"100%"},rowSelection:{selections:[te.Z.SELECTION_ALL,te.Z.SELECTION_INVERT]},tableAlertRender:function(o){var F=o.selectedRowKeys,p=o.selectedRows,A=o.onCleanSelected;return console.log(F,p),(0,e.jsx)(ae.Z,{size:24,children:(0,e.jsxs)("span",{children:["\u5DF2\u9009 ",F.length," \u9879",(0,e.jsx)("a",{style:{marginInlineStart:8},onClick:A,children:"\u53D6\u6D88\u9009\u62E9"})]})})},tableAlertOptionRender:function(o){var F=o.selectedRowKeys,p=o.selectedRows,A=o.onCleanSelected;return console.log(5555,fe),(0,e.jsxs)(ae.Z,{size:16,children:[v?(0,e.jsx)(ie,{title:"\u662F\u5426\u786E\u5B9A\u5220\u9664\uFF1F",Content:function(){return"\u786E\u5B9A\u5220\u9664\uFF1F"},handleOk:function(L){he(F,function(){L()})},children:(0,e.jsx)(Y.ZP,{size:"small",icon:(0,e.jsx)(je.Z,{}),danger:!0,children:"\u6279\u91CF\u5220\u9664"},"danger")}):null,fe.map(function(Z,L){return(0,e.jsx)(Z,{selectedRowKeys:F,selectedRows:p,onCleanSelected:A},L)})]})},actionRef:J,request:function(){var h=K()(O()().mark(function o(F,p,A){var Z,L;return O()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(Z=s.dataSource,L={},L[E.pageIndex]=F.current,L[E.pageSize]=F.pageSize,console.log(777,p,F,A,L),!m){M.next=8;break}return M.next=8,i(m,a()(a()({},L),F),function(H){console.log(H),Z=H});case 8:return M.abrupt("return",Promise.resolve({data:D(Z),success:!0,total:j(Z)}));case 9:case"end":return M.stop()}},o)}));return function(o,F,p){return h.apply(this,arguments)}}(),editable:{type:"multiple"},columnsState:{persistenceKey:"pro-table-singe-demos",persistenceType:"localStorage",defaultValue:{option:{fixed:"right",disable:!0}},onChange:function(o){console.log("value: ",o)}},rowKey:"id",options:{setting:{listsHeight:400}},form:{syncToUrl:!1},pagination:{pageSize:10,onChange:function(o){return console.log(o)}},dateFormatter:"string"},s),{},{columns:[].concat(b()(Ae(s.columns,i)),b()(X.length?[{title:"\u64CD\u4F5C",dataIndex:"actionTablePro",fixed:"right",actionWidth:S,render:ke}]:[])),search:s.search?a()({labelWidth:"auto",span:4,defaultCollapsed:!1},s.search||{}):{labelWidth:"auto"},toolBarRender:function(){return[].concat(b()(l?[(0,e.jsx)(ve,{children:(0,e.jsx)(Y.ZP,{icon:(0,e.jsx)(Pe.Z,{}),type:"primary",children:"\u65B0\u5EFA"},"button")})]:[]),b()(s.toolBarRender||[]))}}))})},Me=Ee,ze=n(85576),Ne=function(r){var c=r.title,i=c===void 0?"\u57FA\u7840":c,d=r.handleOk,m=d===void 0?function(f){f()}:d,l=r.Content,g=l===void 0?function(){return(0,e.jsx)("div",{children:"\u793A\u4F8B"})}:l,v=r.children,$=v===void 0?(0,e.jsx)("div",{children:"\u70B9\u51FB"}):v,R=r.fieldProps,P=R===void 0?{}:R,B=(0,N.useState)(!1),y=k()(B,2),S=y[0],u=y[1],s=function(){u(!0)},x=function(){m(function(){u(!1)})},D=function(){u(!1)};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{onClick:s,children:$}),(0,e.jsx)(ze.Z,a()(a()({title:i,open:S,onOk:x,onCancel:D},P),{},{children:(0,e.jsx)(g,{isModalOpen:S,setIsModalOpen:u})}))]})},ie=Ne,be=n(87547),ue=n(94149),Ue=n(24454),Ke=n(68262),q=n(5966),He=n(16434),we=n(63434),We=n(9361),_=n(56140),Ve=n(81354),de=n.n(Ve),Ge=n(62291),Je=function(r){var c=r.ajax,i=c===void 0?V:c,d=r.url,m=r.captchaUrl,l=r.loginFormFieldProps,g=r.hasSmsLogin,v=g===void 0?!1:g,$=r.hasAccountLogin,R=$===void 0?!0:$,P=r.phoneField,B=P===void 0?"mobile":P,y=We.Z.useToken(),S=y.token,u=(0,N.useState)("account"),s=k()(u,2),x=s[0],D=s[1],f=(0,N.useRef)();return(0,e.jsx)("div",{style:{backgroundColor:S.colorBgContainer},className:"crm_login_body",children:(0,e.jsxs)(Ke.U,a()(a()({formRef:f,title:"\u767B\u5F55",subTitle:"\u6B22\u8FCE\u767B\u5F55\u7CFB\u7EDF",initialValues:{username:"",password:""},onFinish:function(){var j=K()(O()().mark(function t(C){var T,I;return O()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,f.current.validateFields();case 2:return T=E.sent,T&&(I=a()({},C),I.password=de().SHA256(C.password).toString(de().enc.Base64),i(d,I,function(G){(0,Ge.ok)("token",G.data)},!1)),E.abrupt("return",!0);case 5:case"end":return E.stop()}},t)}));return function(t){return j.apply(this,arguments)}}()},l),{},{children:[(0,e.jsxs)(_.Z,{centered:!0,activeKey:x,onChange:function(t){return D(t)},children:[(0,e.jsx)(_.Z.TabPane,{tab:"\u8D26\u53F7\u5BC6\u7801\u767B\u5F55",disabled:!R},"account"),(0,e.jsx)(_.Z.TabPane,{tab:"\u624B\u673A\u53F7\u767B\u5F55",disabled:!v},"phone")]}),x==="account"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(q.Z,{name:"username",fieldProps:{size:"large",prefix:(0,e.jsx)(be.Z,{className:"prefixIcon"})},placeholder:"\u7528\u6237\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"}]}),(0,e.jsx)(q.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,e.jsx)(ue.Z,{className:"prefixIcon"}),strengthText:"\u5BC6\u7801\u5E94\u5305\u542B\u6570\u5B57\u3001\u5B57\u6BCD\u548C\u7279\u6B8A\u5B57\u7B26\uFF0C\u957F\u5EA6\u81F3\u5C11\u4E3A8\u4E2A\u5B57\u7B26",statusRender:function(t){var C=function(){return t&&t.length>12?"ok":t&&t.length>6?"pass":"poor"},T=C();return T==="pass"?(0,e.jsx)("div",{style:{color:S.colorWarning},children:"\u5F3A\u5EA6\uFF1A\u4E2D"}):T==="ok"?(0,e.jsx)("div",{style:{color:S.colorSuccess},children:"\u5F3A\u5EA6\uFF1A\u5F3A"}):(0,e.jsx)("div",{style:{color:S.colorError},children:"\u5F3A\u5EA6\uFF1A\u5F31"})}},placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"}]})]}),x==="phone"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(q.Z,{fieldProps:{size:"large",prefix:(0,e.jsx)(Ue.Z,{className:"prefixIcon"})},name:B,placeholder:"\u624B\u673A\u53F7",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\uFF01"},{pattern:/^1\d{10}$/,message:"\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF\uFF01"}]}),(0,e.jsx)(He.Z,{fieldProps:{size:"large",prefix:(0,e.jsx)(ue.Z,{className:"prefixIcon"})},captchaProps:{size:"large"},placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",captchaTextRender:function(t,C){return t?"".concat(C," ","\u83B7\u53D6\u9A8C\u8BC1\u7801"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"},phoneName:B,name:"captcha",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01"}],onGetCaptcha:function(){var j=K()(O()().mark(function t(C){var T;return O()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:T={},T[B]=C,i(m,a()({},T),function(E){w.ZP.success("\u9A8C\u8BC1\u7801\u5DF2\u53D1\u9001\uFF0C\u8BF7\u67E5\u770B\u624B\u673A\u77ED\u4FE1")});case 3:case"end":return z.stop()}},t)}));return function(t){return j.apply(this,arguments)}}()})]}),(0,e.jsxs)("div",{style:{marginBlockEnd:24},children:[(0,e.jsx)(we.Z,{noStyle:!0,name:"autoLogin",children:"\u81EA\u52A8\u767B\u5F55"}),(0,e.jsx)("a",{style:{float:"right"},children:"\u5FD8\u8BB0\u5BC6\u7801"})]})]}))})},Qe=Je,Xe=n(22530),Ye=function(r){var c=r.layoutType,i=c===void 0?"ModalForm":c,d=r.fieldProps,m=d===void 0?{}:d,l=r.url,g=r.ajax,v=g===void 0?V:g,$=r.finishFun,R=$===void 0?function(){}:$,P=r.setMsg,B=P===void 0?function(u){return u.msg}:P,y=r.children,S=y===void 0?(0,e.jsx)(Y.ZP,{children:"\u70B9\u51FB\u6211"}):y;return(0,e.jsx)(se,{children:(0,e.jsx)(Xe.Z,a()(a()({trigger:S,layoutType:"ModalForm",onFinish:function(){var u=K()(O()().mark(function s(x){return O()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return console.log(x),f.next=3,v(l,x,function(j){w.ZP.success(B(j)),R()});case 3:case"end":return f.stop()}},s)}));return function(s){return u.apply(this,arguments)}}()},i==="ModalForm"?{modalProps:{destroyOnClose:!0}}:{drawerProps:{destroyOnClose:!0}}),{},{columns:[{title:"\u6807\u9898",dataIndex:"title",formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]},width:"md"}]},m))})},ce=Ye},42480:function(){},24654:function(){}}]);
