(self.webpackChunkdurians=self.webpackChunkdurians||[]).push([[625],{87391:function(Ye,re,n){"use strict";n.r(re),n.d(re,{FormPro:function(){return de},LoginPro:function(){return Ge},ModalPro:function(){return se},TablePro:function(){return Le}});var he=n(15009),z=n.n(he),pe=n(99289),G=n.n(pe),me=n(97857),t=n.n(me),ge=n(19632),K=n.n(ge),xe=n(48689),Fe=n(24969),je=n(61534),Pe=n(86738),ye=n(96074),J=n(45360),ne=n(60940),te=n(42075),k=n(14726),U=n(67294),Se=n(64599),ae=n.n(Se),Ce=n(11238),Q=function(r,d,l){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,g="";return i&&(g="api"),Ce.ZP.post(g+r,{data:d}).then(function(a){a.code==0?l(a):J.ZP.error(a.msg)}).catch(function(a){console.log(a)})},Te=function(r,d){var l=ae()(r),i;try{var g=function(){var f=i.value,v=f.proConfig;f.request||(f.valueType==="select"||f.valueType==="treeSelect")&&(f.request=function(){var T=G()(z()().mark(function B(j,$){var P;return z()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return P=[],s.next=3,d(v.url,t()(t()({},j),typeof v.params=="function"?v.params(j,$):v.params),function(c){P=v.setData(c)});case 3:return s.abrupt("return",P);case 4:case"end":return s.stop()}},B)}));return function(B,j){return T.apply(this,arguments)}}())};for(l.s();!(i=l.n()).done;)g()}catch(a){l.e(a)}finally{l.f()}return r},oe=n(89451),$e=n(5574),q=n.n($e),Ae=n(59847),Re=n(54673),e=n(85893),Ze=function(r){var d=r.ajax,l=d===void 0?Q:d,i=r.fieldProps,g=i.fieldNames,a=i.params,f=a===void 0?function(c){return{}}:a,v=i.url,T=i.setData,B=(0,U.useState)([]),j=q()(B,2),$=j[0],P=j[1];(0,U.useEffect)(function(){s({},t()({},f({})))},[]);function O(c,y,S){var x=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"value",A=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"children",u=(0,Re.Z)(c),N=ae()(u),R;try{for(N.s();!(R=N.n()).done;){var C=R.value;C[x]===y?C.children=S:C.children&&(C.children=O(C.children,y,S,x,A))}}catch(h){N.e(h)}finally{N.f()}return u}var s=function(y){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return l(v,t()({},f(y)),function(x){var A=T(x);g&&(A=A.map(function(u){return u.label=u[g.label],u.value=u[g.value],u})),P(function(u){return y.value?O(u,y.value,A):A})})};return(0,e.jsx)(Ae.Z,t()(t()({},r==null?void 0:r.fieldProps),{},{treeDataSimpleMode:!0,style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:"\u8BF7\u9009\u62E9",loadData:s,treeData:$}))},Be=Ze,Ie=function(r){var d=r.children,l=(0,U.useContext)(oe.L_);return(0,e.jsx)(oe.L_.Provider,{value:t()(t()({},l),{},{valueTypeMap:{treeSelectPro:{renderFormItem:function(g,a){return(0,e.jsx)(Be,t()({},a))}}}}),children:d})},le=Ie,Oe=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:"\u6807\u9898",dataIndex:"title",copyable:!0,ellipsis:!0,tooltip:"\u6807\u9898\u8FC7\u957F\u4F1A\u81EA\u52A8\u6536\u7F29",formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}}],De=function(r){var d=r.ajax,l=d===void 0?Q:d,i=r.url,g=i===void 0?"https://proapi.azurewebsites.net/github/issues":i,a=r.addUrl,f=r.editUrl,v=r.deleteUrl,T=r.deleteField,B=T===void 0?"idList":T,j=r.addFormProFieldProps,$=j===void 0?{}:j,P=r.actionWidth,O=P===void 0?100:P,s=r.fieldProps,c=s===void 0?{search:{},columns:Oe}:s,y=r.setData,S=y===void 0?function(p){return p.data.records}:y,x=r.setTotal,A=x===void 0?function(p){return p.data.total}:x,u=r.setMsg,N=u===void 0?function(p){return p.msg}:u,R=r.actionBar,C=R===void 0?[]:R,h=r.paginationAlias,E=h===void 0?{pageIndex:"pageIndex",pageSize:"pageSize"}:h,D=r.tableAlertOptionRenderPro,W=D===void 0?[]:D,b=(0,U.useRef)(),L=c.rowKey||"id",w=[].concat(K()(v?[function(p){var o=p.record;return(0,e.jsx)(ce,{record:o,children:(0,e.jsx)("a",{children:"\u7F16\u8F91"})})}]:[]),K()(C),K()(v?[function(p){var o=p.record;return(0,e.jsx)(Pe.Z,{title:"\u5220\u9664",description:"\u786E\u5B9A\u5220\u9664\u8FD9\u6761\u6570\u636E\u5417\uFF1F",onConfirm:function(){fe([o[L]])},okText:"\u662F",cancelText:"\u5426",children:(0,e.jsx)("a",{style:{color:"red"},children:"\u5220\u9664"})})}]:[])),ce=function(o){var F=o.children,m=o.record,I=a,Z={};return m!=null&&m[L]&&f&&(Z[L]=m==null?void 0:m[L],I=f),(0,e.jsx)(de,t()(t()({ajax:l},$),{},{url:I,finishFun:function(){var Y;(Y=b.current)===null||Y===void 0||Y.reload()},fieldProps:t()({initialValues:m,columns:c.columns.map(function(M){return t()(t()({},M),{},{width:"md"})})},$.fieldProps),children:F}))},Xe=function(o,F){return(0,e.jsx)("div",{className:"durians_table_pro_action",children:w.map(function(m,I){return(0,e.jsxs)(U.Fragment,{children:[(0,e.jsx)(m,{record:F}),w.length>1&&I<w.length-1?(0,e.jsx)(ye.Z,{type:"vertical"}):null]},I)})})},fe=function(o){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},m={};m[B]=o,l(v,m,function(I){var Z;J.ZP.success(N(I)),(Z=b.current)===null||Z===void 0||Z.reload(),b.current.clearSelected(),F()})};return(0,e.jsx)(le,{children:(0,e.jsx)(je.Z,t()(t()({defaultSize:"small",scroll:{x:"100%"},rowSelection:{selections:[ne.Z.SELECTION_ALL,ne.Z.SELECTION_INVERT]},tableAlertRender:function(o){var F=o.selectedRowKeys,m=o.selectedRows,I=o.onCleanSelected;return console.log(F,m),(0,e.jsx)(te.Z,{size:24,children:(0,e.jsxs)("span",{children:["\u5DF2\u9009 ",F.length," \u9879",(0,e.jsx)("a",{style:{marginInlineStart:8},onClick:I,children:"\u53D6\u6D88\u9009\u62E9"})]})})},tableAlertOptionRender:function(o){var F=o.selectedRowKeys,m=o.selectedRows,I=o.onCleanSelected;return(0,e.jsxs)(te.Z,{size:16,children:[v?(0,e.jsx)(se,{title:"\u662F\u5426\u786E\u5B9A\u5220\u9664\uFF1F",Content:function(){return"\u786E\u5B9A\u5220\u9664\uFF1F"},handleOk:function(M){fe(F,function(){M()})},children:(0,e.jsx)(k.ZP,{size:"small",icon:(0,e.jsx)(xe.Z,{}),danger:!0,children:"\u6279\u91CF\u5220\u9664"},"danger")}):null,W.map(function(Z,M){return(0,e.jsx)(Z,{selectedRowKeys:F,selectedRows:m,onCleanSelected:I},M)})]})},actionRef:b,request:function(){var p=G()(z()().mark(function o(F,m,I){var Z,M;return z()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:if(Z=c.dataSource,M={},M[E.pageIndex]=F.current,M[E.pageSize]=F.pageSize,console.log(777,m,F,I,M),!g){V.next=8;break}return V.next=8,l(g,t()(t()({},M),F),function(ve){console.log(ve),Z=ve});case 8:return V.abrupt("return",Promise.resolve({data:S(Z),success:!0,total:A(Z)}));case 9:case"end":return V.stop()}},o)}));return function(o,F,m){return p.apply(this,arguments)}}(),editable:{type:"multiple"},columnsState:{persistenceKey:"pro-table-singe-demos",persistenceType:"localStorage",defaultValue:{option:{fixed:"right",disable:!0}},onChange:function(o){console.log("value: ",o)}},rowKey:"id",options:{setting:{listsHeight:400}},form:{syncToUrl:!1},pagination:{pageSize:10,onChange:function(o){return console.log(o)}},dateFormatter:"string"},c),{},{columns:[].concat(K()(Te(c.columns,l)),K()(w.length?[{title:"\u64CD\u4F5C",dataIndex:"actionTablePro",fixed:"right",hideInSearch:!0,actionWidth:O,render:Xe}]:[])),search:c.search?t()({labelWidth:"auto",span:4,defaultCollapsed:!1},c.search||{}):{labelWidth:"auto"},toolBarRender:function(){return[].concat(K()(a?[(0,e.jsx)(ce,{children:(0,e.jsx)(k.ZP,{icon:(0,e.jsx)(Fe.Z,{}),type:"primary",children:"\u65B0\u5EFA"},"button")})]:[]),K()(c.toolBarRender||[]))}}))})},Le=De,Me=n(85576),Ee=function(r){var d=r.title,l=d===void 0?"\u57FA\u7840":d,i=r.handleOk,g=i===void 0?function(x){x()}:i,a=r.Content,f=a===void 0?function(){return(0,e.jsx)("div",{children:"\u793A\u4F8B"})}:a,v=r.children,T=v===void 0?(0,e.jsx)("div",{children:"\u70B9\u51FB"}):v,B=r.fieldProps,j=B===void 0?{}:B,$=(0,U.useState)(!1),P=q()($,2),O=P[0],s=P[1],c=function(){s(!0)},y=function(){g(function(){s(!1)})},S=function(){s(!1)};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{onClick:c,children:T}),(0,e.jsx)(Me.Z,t()(t()({title:l,open:O,onOk:y,onCancel:S},j),{},{children:(0,e.jsx)(f,{isModalOpen:O,setIsModalOpen:s})}))]})},se=Ee,ze=n(87547),ie=n(94149),He=n(24454),Ne=n(68262),_=n(5966),be=n(16434),Ue=n(63434),Ke=n(9361),ee=n(56140),We=n(81354),X=n.n(We),ue=n(99191),we=(0,ue.df)([{id:"SHA256",fun:function(r){return X().SHA256(r).toString(X().enc.Base64)}},{id:"MD5",fun:function(r){return X().MD5(r).toString(X().enc.Hex)}}]),Ve=function(r){var d=r.ajax,l=d===void 0?Q:d,i=r.url,g=r.captchaUrl,a=r.loginFormFieldProps,f=r.hasSmsLogin,v=f===void 0?!1:f,T=r.hasAccountLogin,B=T===void 0?!0:T,j=r.phoneField,$=j===void 0?"mobile":j,P=r.encryption,O=P===void 0?"SHA256":P,s=r.extraPasswordText,c=s===void 0?"":s,y=Ke.Z.useToken(),S=y.token,x=(0,U.useState)("account"),A=q()(x,2),u=A[0],N=A[1],R=(0,U.useRef)();return(0,e.jsx)("div",{style:{backgroundColor:S.colorBgContainer},className:"crm_login_body",children:(0,e.jsxs)(Ne.U,t()(t()({formRef:R,title:"\u767B\u5F55",subTitle:"\u6B22\u8FCE\u767B\u5F55\u7CFB\u7EDF",initialValues:{username:"",password:""},onFinish:function(){var C=G()(z()().mark(function h(E){var D,W;return z()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,R.current.validateFields();case 2:return D=L.sent,D&&(W=t()({},E),W.password=we.get(O).fun(E.password+c),l(i,W,function(w){(0,ue.ok)("token",w.data)},!1)),L.abrupt("return",!0);case 5:case"end":return L.stop()}},h)}));return function(h){return C.apply(this,arguments)}}()},a),{},{children:[(0,e.jsxs)(ee.Z,{centered:!0,activeKey:u,onChange:function(h){return N(h)},children:[(0,e.jsx)(ee.Z.TabPane,{tab:"\u8D26\u53F7\u5BC6\u7801\u767B\u5F55",disabled:!B},"account"),(0,e.jsx)(ee.Z.TabPane,{tab:"\u624B\u673A\u53F7\u767B\u5F55",disabled:!v},"phone")]}),u==="account"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(_.Z,{name:"username",fieldProps:{size:"large",prefix:(0,e.jsx)(ze.Z,{className:"prefixIcon"})},placeholder:"\u7528\u6237\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"}]}),(0,e.jsx)(_.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,e.jsx)(ie.Z,{className:"prefixIcon"}),strengthText:"\u5BC6\u7801\u5E94\u5305\u542B\u6570\u5B57\u3001\u5B57\u6BCD\u548C\u7279\u6B8A\u5B57\u7B26\uFF0C\u957F\u5EA6\u81F3\u5C11\u4E3A8\u4E2A\u5B57\u7B26",statusRender:function(h){var E=function(){return h&&h.length>12?"ok":h&&h.length>6?"pass":"poor"},D=E();return D==="pass"?(0,e.jsx)("div",{style:{color:S.colorWarning},children:"\u5F3A\u5EA6\uFF1A\u4E2D"}):D==="ok"?(0,e.jsx)("div",{style:{color:S.colorSuccess},children:"\u5F3A\u5EA6\uFF1A\u5F3A"}):(0,e.jsx)("div",{style:{color:S.colorError},children:"\u5F3A\u5EA6\uFF1A\u5F31"})}},placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"}]})]}),u==="phone"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(_.Z,{fieldProps:{size:"large",prefix:(0,e.jsx)(He.Z,{className:"prefixIcon"})},name:$,placeholder:"\u624B\u673A\u53F7",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\uFF01"},{pattern:/^1\d{10}$/,message:"\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF\uFF01"}]}),(0,e.jsx)(be.Z,{fieldProps:{size:"large",prefix:(0,e.jsx)(ie.Z,{className:"prefixIcon"})},captchaProps:{size:"large"},placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",captchaTextRender:function(h,E){return h?"".concat(E," ","\u83B7\u53D6\u9A8C\u8BC1\u7801"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"},phoneName:$,name:"captcha",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01"}],onGetCaptcha:function(){var C=G()(z()().mark(function h(E){var D;return z()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:D={},D[$]=E,l(g,t()({},D),function(L){J.ZP.success("\u9A8C\u8BC1\u7801\u5DF2\u53D1\u9001\uFF0C\u8BF7\u67E5\u770B\u624B\u673A\u77ED\u4FE1")});case 3:case"end":return b.stop()}},h)}));return function(h){return C.apply(this,arguments)}}()})]}),(0,e.jsxs)("div",{style:{marginBlockEnd:24},children:[(0,e.jsx)(Ue.Z,{noStyle:!0,name:"autoLogin",children:"\u81EA\u52A8\u767B\u5F55"}),(0,e.jsx)("a",{style:{float:"right"},children:"\u5FD8\u8BB0\u5BC6\u7801"})]})]}))})},Ge=Ve,Je=n(77646),Qe=function(r){var d=r.params,l=d===void 0?{}:d,i=r.layoutType,g=i===void 0?"ModalForm":i,a=r.fieldProps,f=a===void 0?{}:a,v=r.url,T=r.ajax,B=T===void 0?Q:T,j=r.finishFun,$=j===void 0?function(){}:j,P=r.setMsg,O=P===void 0?function(y){return y.msg}:P,s=r.children,c=s===void 0?(0,e.jsx)(k.ZP,{children:"\u70B9\u51FB\u6211"}):s;return console.log(777888,f),(0,e.jsx)(le,{children:(0,e.jsx)(Je.Z,t()(t()({trigger:c,layoutType:"ModalForm",onFinish:G()(z()().mark(function y(){var S,x,A,u=arguments;return z()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return S=u.length>0&&u[0]!==void 0?u[0]:{},x=!1,A=t()(t()({},l),S),console.log(S),R.next=6,B(v,A,function(C){J.ZP.success(O(C)),$(),x=!0});case 6:return R.abrupt("return",x);case 7:case"end":return R.stop()}},y)}))},g==="ModalForm"?{modalProps:{destroyOnClose:!0}}:{drawerProps:{destroyOnClose:!0}}),{},{columns:[{title:"\u6807\u9898",dataIndex:"title",formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]},width:"md"}]},f))})},de=Qe},42480:function(){},24654:function(){}}]);
