(self.webpackChunkdurians=self.webpackChunkdurians||[]).push([[40],{95150:function(Ge,ne,r){"use strict";r.r(ne),r.d(ne,{FormPro:function(){return ie},LoginPro:function(){return Ke},ModalPro:function(){return oe},TablePro:function(){return Re}});var ve=r(15009),C=r.n(ve),he=r(99289),D=r.n(he),pe=r(97857),d=r.n(pe),me=r(19632),M=r.n(me),ge=r(48689),xe=r(24969),Fe=r(79050),je=r(86738),K=r(45360),Pe=r(96074),re=r(62120),te=r(42075),X=r(14726),H=r(67294),ye=r(64599),Ce=r.n(ye),Ae=r(11238),Y=function(n,h,a){var p=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,P="";return p&&(P="api"),Ae.ZP.post(P+n,{data:h}).then(function(u){u.code==0?a(u):K.ZP.error(u.msg)}).catch(function(u){console.log(u)})},Se=function(n,h){var a=Ce()(n),p;try{var P=function(){var x=p.value,c=x.proConfig;x.valueType==="select"&&(x.request=function(){var A=D()(C()().mark(function R(y,Z){var F;return C()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return F=[],o.next=3,h(c.url,d()({},typeof c.params=="function"?c.params(y,Z):c.params),function(s){console.log(2222,s),F=c.setData(s)});case 3:return o.abrupt("return",F);case 4:case"end":return o.stop()}},R)}));return function(R,y){return A.apply(this,arguments)}}())};for(a.s();!(p=a.n()).done;)P()}catch(u){a.e(u)}finally{a.f()}return n},e=r(85893),Te=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:"\u6807\u9898",dataIndex:"title",copyable:!0,ellipsis:!0,tooltip:"\u6807\u9898\u8FC7\u957F\u4F1A\u81EA\u52A8\u6536\u7F29",formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}}],$e=function(n){var h=n.ajax,a=h===void 0?Y:h,p=n.url,P=p===void 0?"https://proapi.azurewebsites.net/github/issues":p,u=n.addUrl,x=n.editUrl,c=n.deleteUrl,A=n.deleteField,R=A===void 0?"idList":A,y=n.addFormProFieldProps,Z=y===void 0?{}:y,F=n.actionWidth,S=F===void 0?100:F,o=n.fieldProps,s=o===void 0?{search:{},columns:Te}:o,B=n.setData,U=B===void 0?function(l){return l.data.records}:B,m=n.setTotal,I=m===void 0?function(l){return l.data.total}:m,f=n.setMsg,O=f===void 0?function(l){return l.msg}:f,T=n.actionBar,z=T===void 0?[]:T,b=n.paginationAlias,E=b===void 0?{pageIndex:"pageIndex",pageSize:"pageSize"}:b,V=n.tableAlertOptionRenderPro,ue=V===void 0?[]:V,G=(0,H.useRef)(),J=s.rowKey||"id",Q=[].concat(M()(c?[function(l){var t=l.record;return(0,e.jsx)(de,{record:t,children:(0,e.jsx)("a",{children:"\u7F16\u8F91"})})}]:[]),M()(z),M()(c?[function(l){var t=l.record;return(0,e.jsx)(je.Z,{title:"\u5220\u9664",description:"\u786E\u5B9A\u5220\u9664\u8FD9\u6761\u6570\u636E\u5417\uFF1F",onConfirm:function(){ce([t[J]])},okText:"\u662F",cancelText:"\u5426",children:(0,e.jsx)("a",{style:{color:"red"},children:"\u5220\u9664"})})}]:[])),de=function(t){var v=t.children,i=t.record;return(0,e.jsx)(ie,{fieldProps:d()({initialValues:i,columns:s.columns.map(function(j){return d()(d()({},j),{},{width:"md"})}),onFinish:function(){var j=D()(C()().mark(function $(fe){var L,N,_;return C()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return L=!1,N=u,_=fe,i!=null&&i[J]&&x&&(_[J]=i==null?void 0:i[J],N=x),W.next=6,a(N,_,function(Ve){var ee;(ee=G.current)===null||ee===void 0||ee.reload(),K.ZP.success(O(Ve)),L=!0});case 6:return W.abrupt("return",L);case 7:case"end":return W.stop()}},$)}));function g($){return j.apply(this,arguments)}return g}(),rowProps:{gutter:[16,16]},colProps:{span:12},grid:!0},Z)})},We=function(t,v){return(0,e.jsx)("div",{className:"durians_table_pro_action",children:Q.map(function(i,j){return(0,e.jsxs)(H.Fragment,{children:[(0,e.jsx)(i,{record:v}),Q.length>1&&j<Q.length-1?(0,e.jsx)(Pe.Z,{type:"vertical"}):null]},j)})})},ce=function(t){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},i={};i[R]=t,a(c,i,function(j){var g;K.ZP.success(O(j)),(g=G.current)===null||g===void 0||g.reload(),G.current.clearSelected(),v()})};return(0,e.jsx)(Fe.Z,d()(d()({defaultSize:"small",scroll:{x:"100%"},rowSelection:{selections:[re.Z.SELECTION_ALL,re.Z.SELECTION_INVERT]},tableAlertRender:function(t){var v=t.selectedRowKeys,i=t.selectedRows,j=t.onCleanSelected;return console.log(v,i),(0,e.jsx)(te.Z,{size:24,children:(0,e.jsxs)("span",{children:["\u5DF2\u9009 ",v.length," \u9879",(0,e.jsx)("a",{style:{marginInlineStart:8},onClick:j,children:"\u53D6\u6D88\u9009\u62E9"})]})})},tableAlertOptionRender:function(t){var v=t.selectedRowKeys,i=t.selectedRows,j=t.onCleanSelected;return console.log(5555,ue),(0,e.jsxs)(te.Z,{size:16,children:[c?(0,e.jsx)(oe,{title:"\u662F\u5426\u786E\u5B9A\u5220\u9664\uFF1F",Content:function(){return"\u786E\u5B9A\u5220\u9664\uFF1F"},handleOk:function($){ce(v,function(){$()})},children:(0,e.jsx)(X.ZP,{size:"small",icon:(0,e.jsx)(ge.Z,{}),danger:!0,children:"\u6279\u91CF\u5220\u9664"},"danger")}):null,ue.map(function(g,$){return console.log(222,g),(0,e.jsx)(g,{selectedRowKeys:v,selectedRows:i,onCleanSelected:j},$)})]})},actionRef:G,request:function(){var l=D()(C()().mark(function t(v,i,j){var g,$;return C()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(g=s.dataSource,$={},$[E.pageIndex]=v.current,$[E.pageSize]=v.pageSize,console.log(777,a,i,v,j,$),!P){L.next=8;break}return L.next=8,a(P,d()(d()({},$),v),function(N){console.log(N),g=N});case 8:return L.abrupt("return",Promise.resolve({data:U(g),success:!0,total:I(g)}));case 9:case"end":return L.stop()}},t)}));return function(t,v,i){return l.apply(this,arguments)}}(),editable:{type:"multiple"},columnsState:{persistenceKey:"pro-table-singe-demos",persistenceType:"localStorage",defaultValue:{option:{fixed:"right",disable:!0}},onChange:function(t){console.log("value: ",t)}},rowKey:"id",options:{setting:{listsHeight:400}},form:{syncToUrl:!1},pagination:{pageSize:10,onChange:function(t){return console.log(t)}},dateFormatter:"string"},s),{},{columns:[].concat(M()(Se(s.columns,a)),M()(Q.length?[{title:"\u64CD\u4F5C",dataIndex:"actionTablePro",fixed:"right",actionWidth:S,render:We}]:[])),search:s.search?d()({labelWidth:"auto",span:4,defaultCollapsed:!1},s.search||{}):{labelWidth:"auto"},toolBarRender:function(){return[].concat(M()(u?[(0,e.jsx)(de,{children:(0,e.jsx)(X.ZP,{icon:(0,e.jsx)(xe.Z,{}),type:"primary",children:"\u65B0\u5EFA"},"button")})]:[]),M()(s.toolBarRender||[]))}}))},Re=$e,Ze=r(5574),ae=r.n(Ze),Be=r(85576),Oe=function(n){var h=n.title,a=h===void 0?"\u57FA\u7840":h,p=n.handleOk,P=p===void 0?function(m){m()}:p,u=n.Content,x=u===void 0?function(){return(0,e.jsx)("div",{children:"\u793A\u4F8B"})}:u,c=n.children,A=c===void 0?(0,e.jsx)("div",{children:"\u70B9\u51FB"}):c,R=n.fieldProps,y=R===void 0?{}:R,Z=(0,H.useState)(!1),F=ae()(Z,2),S=F[0],o=F[1],s=function(){o(!0)},B=function(){P(function(){o(!1)})},U=function(){o(!1)};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{onClick:s,children:A}),(0,e.jsx)(Be.Z,d()(d()({title:a,open:S,onOk:B,onCancel:U},y),{},{children:(0,e.jsx)(x,{isModalOpen:S,setIsModalOpen:o})}))]})},oe=Oe,Ie=r(87547),se=r(94149),Ee=r(24454),Le=r(68262),k=r(5966),Me=r(16434),ze=r(63434),be=r(9361),q=r(56140),De=r(81354),le=r.n(De),Ue=r(62291),Ne=function(n){var h=n.ajax,a=h===void 0?Y:h,p=n.url,P=n.captchaUrl,u=n.loginFormFieldProps,x=n.hasSmsLogin,c=x===void 0?!1:x,A=n.hasAccountLogin,R=A===void 0?!0:A,y=n.phoneField,Z=y===void 0?"mobile":y,F=be.Z.useToken(),S=F.token,o=(0,H.useState)("account"),s=ae()(o,2),B=s[0],U=s[1],m=(0,H.useRef)();return(0,e.jsx)("div",{style:{backgroundColor:S.colorBgContainer},className:"crm_login_body",children:(0,e.jsxs)(Le.U,d()(d()({formRef:m,title:"\u767B\u5F55",subTitle:"\u6B22\u8FCE\u767B\u5F55\u7CFB\u7EDF",initialValues:{username:"",password:""},onFinish:function(){var I=D()(C()().mark(function f(O){var T,z;return C()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,m.current.validateFields();case 2:return T=E.sent,T&&(z=d()({},O),z.password=le().SHA256(O.password).toString(le().enc.Base64),a(p,z,function(V){(0,Ue.ok)("token",V.data)},!1)),E.abrupt("return",!0);case 5:case"end":return E.stop()}},f)}));return function(f){return I.apply(this,arguments)}}()},u),{},{children:[(0,e.jsxs)(q.Z,{centered:!0,activeKey:B,onChange:function(f){return U(f)},children:[(0,e.jsx)(q.Z.TabPane,{tab:"\u8D26\u53F7\u5BC6\u7801\u767B\u5F55",disabled:!R},"account"),(0,e.jsx)(q.Z.TabPane,{tab:"\u624B\u673A\u53F7\u767B\u5F55",disabled:!c},"phone")]}),B==="account"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(k.Z,{name:"username",fieldProps:{size:"large",prefix:(0,e.jsx)(Ie.Z,{className:"prefixIcon"})},placeholder:"\u7528\u6237\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"}]}),(0,e.jsx)(k.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,e.jsx)(se.Z,{className:"prefixIcon"}),strengthText:"\u5BC6\u7801\u5E94\u5305\u542B\u6570\u5B57\u3001\u5B57\u6BCD\u548C\u7279\u6B8A\u5B57\u7B26\uFF0C\u957F\u5EA6\u81F3\u5C11\u4E3A8\u4E2A\u5B57\u7B26",statusRender:function(f){var O=function(){return f&&f.length>12?"ok":f&&f.length>6?"pass":"poor"},T=O();return T==="pass"?(0,e.jsx)("div",{style:{color:S.colorWarning},children:"\u5F3A\u5EA6\uFF1A\u4E2D"}):T==="ok"?(0,e.jsx)("div",{style:{color:S.colorSuccess},children:"\u5F3A\u5EA6\uFF1A\u5F3A"}):(0,e.jsx)("div",{style:{color:S.colorError},children:"\u5F3A\u5EA6\uFF1A\u5F31"})}},placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"}]})]}),B==="phone"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(k.Z,{fieldProps:{size:"large",prefix:(0,e.jsx)(Ee.Z,{className:"prefixIcon"})},name:Z,placeholder:"\u624B\u673A\u53F7",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\uFF01"},{pattern:/^1\d{10}$/,message:"\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF\uFF01"}]}),(0,e.jsx)(Me.Z,{fieldProps:{size:"large",prefix:(0,e.jsx)(se.Z,{className:"prefixIcon"})},captchaProps:{size:"large"},placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",captchaTextRender:function(f,O){return f?"".concat(O," ","\u83B7\u53D6\u9A8C\u8BC1\u7801"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"},phoneName:Z,name:"captcha",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01"}],onGetCaptcha:function(){var I=D()(C()().mark(function f(O){var T;return C()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:T={},T[Z]=O,a(P,d()({},T),function(E){K.ZP.success("\u9A8C\u8BC1\u7801\u5DF2\u53D1\u9001\uFF0C\u8BF7\u67E5\u770B\u624B\u673A\u77ED\u4FE1")});case 3:case"end":return b.stop()}},f)}));return function(f){return I.apply(this,arguments)}}()})]}),(0,e.jsxs)("div",{style:{marginBlockEnd:24},children:[(0,e.jsx)(ze.Z,{noStyle:!0,name:"autoLogin",children:"\u81EA\u52A8\u767B\u5F55"}),(0,e.jsx)("a",{style:{float:"right"},children:"\u5FD8\u8BB0\u5BC6\u7801"})]})]}))})},Ke=Ne,He=r(22530),we=function(n){var h=n.layoutType,a=h===void 0?"ModalForm":h,p=n.fieldProps,P=p===void 0?{}:p,u=n.url,x=n.ajax,c=x===void 0?Y:x,A=n.finishFun,R=A===void 0?function(){}:A,y=n.setMsg,Z=y===void 0?function(o){return o.msg}:y,F=n.children,S=F===void 0?(0,e.jsx)(X.ZP,{children:"\u70B9\u51FB\u6211"}):F;return(0,e.jsx)(He.Z,d()(d()({trigger:S,layoutType:"ModalForm",onFinish:function(){var o=D()(C()().mark(function s(B){return C()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return console.log(B),m.next=3,c(u,B,function(I){K.ZP.success(Z(I)),R()});case 3:case"end":return m.stop()}},s)}));return function(s){return o.apply(this,arguments)}}()},a==="ModalForm"?{modalProps:{destroyOnClose:!0}}:{drawerProps:{destroyOnClose:!0}}),{},{columns:[{title:"\u6807\u9898",dataIndex:"title",formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]},width:"md"}]},P))},ie=we},42480:function(){},24654:function(){}}]);
