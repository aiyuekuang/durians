(self.webpackChunkdurians=self.webpackChunkdurians||[]).push([[387],{36274:function(hr,he,t){"use strict";t.r(he),t.d(he,{FormPro:function(){return fe},LoginPro:function(){return sr},ModalPro:function(){return $e},TablePro:function(){return Ye},TreePro:function(){return Ce}});var Ie=t(52677),Ze=t.n(Ie),De=t(15009),H=t.n(De),Be=t(99289),_=t.n(Be),Le=t(97857),n=t.n(Le),Ee=t(19632),k=t.n(Ee),Oe=t(48689),pe=t(24969),be=t(61534),Ne=t(86738),Me=t(96074),ae=t(45360),ge=t(60940),xe=t(42075),se=t(14726),U=t(67294),Ue=t(64599),Fe=t.n(Ue),ze=t(11238),Ke=t(81354),W=t.n(Ke),ee=function(e,l,o){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,c="";return s&&(c="api"),ze.ZP.post(c+e,{data:l}).then(function(a){a.code==0?o(a):ae.ZP.error(a.msg)}).catch(function(a){console.log(a)})},je=function(e,l){var o=Fe()(e),s;try{var c=function(){var f=s.value,d=f.proConfig;f.request||(f.valueType==="select"||f.valueType==="treeSelect")&&(f.request=function(){var F=_()(H()().mark(function C(P,I){var x;return H()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return x=[],m.next=3,l(d.url,n()(n()({},P),typeof d.params=="function"?d.params(P,I):d.params),function(Z){x=d.setData(Z)});case 3:return m.abrupt("return",x);case 4:case"end":return m.stop()}},C)}));return function(C,P){return F.apply(this,arguments)}}())};for(o.s();!(s=o.n()).done;)c()}catch(a){o.e(a)}finally{o.f()}return e},He=function(e,l,o){var s=W().enc.Utf8.parse(l),c=W().enc.Utf8.parse(o);return W().AES.encrypt(e,s,{mode:W().mode.ECB,padding:W().pad.Pkcs7}).toString()},pr=function(e,l,o){var s=CryptoJS.enc.Utf8.parse(l),c=CryptoJS.enc.Utf8.parse(o);return CryptoJS.AES.decrypt(e,s,{mode:CryptoJS.mode.ECB,padding:CryptoJS.pad.Pkcs7})},ye=t(89451),We=t(5574),oe=t.n(We),Je=t(59847),Ve=t(54673),r=t(85893);function ie(L,e,l){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"value",s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"children",c=(0,Ve.Z)(L),a=Fe()(c),f;try{for(a.s();!(f=a.n()).done;){var d=f.value;d[o]===e?d.children=l:d.children&&(d.children=ie(d.children,e,l,o,s))}}catch(F){a.e(F)}finally{a.f()}return c}var we=function(e){var l=e.ajax,o=l===void 0?ee:l,s=e.fieldProps,c=s.fieldNames,a=s.params,f=a===void 0?function(m){return{}}:a,d=s.url,F=s.setData,C=(0,U.useState)([]),P=oe()(C,2),I=P[0],x=P[1];(0,U.useEffect)(function(){O({},n()({},f({})))},[]);var O=function(Z){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return o(d,n()(n()({},f(Z)),T),function(E){var p=F(E);c&&(p=p.map(function(D){return D.label=D[c.label],D.value=D[c.value],D})),x(function(D){return Z.value?ie(D,Z.value,p):p})})};return(0,r.jsx)(Je.Z,n()(n()({},e==null?void 0:e.fieldProps),{},{treeDataSimpleMode:!0,style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:"\u8BF7\u9009\u62E9",loadData:O,treeData:I}))},Ge=we,ke=function(e){var l=e.children,o=(0,U.useContext)(ye.L_);return(0,r.jsx)(ye.L_.Provider,{value:n()(n()({},o),{},{valueTypeMap:{treeSelectPro:{renderFormItem:function(c,a){return(0,r.jsx)(Ge,n()({},a))}}}}),children:l})},Pe=ke,Qe=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:"\u6807\u9898",dataIndex:"title",copyable:!0,ellipsis:!0,tooltip:"\u6807\u9898\u8FC7\u957F\u4F1A\u81EA\u52A8\u6536\u7F29",formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}}],Xe=function(e){var l=e.ajax,o=l===void 0?ee:l,s=e.url,c=s===void 0?"https://proapi.azurewebsites.net/github/issues":s,a=e.addUrl,f=e.editUrl,d=e.deleteUrl,F=e.deleteFields,C=F===void 0?"idList":F,P=e.deleteField,I=P===void 0?null:P,x=e.deleteFieldIsArr,O=x===void 0?!1:x,m=e.deleteParams,Z=m===void 0?{}:m,T=e.addFormProFieldProps,E=T===void 0?{}:T,p=e.actionWidth,D=p===void 0?100:p,z=e.fieldProps,B=z===void 0?{search:{},columns:Qe,rowKey:"id"}:z,b=e.setData,K=b===void 0?function(j){return j.data.records}:b,w=e.setTotal,Y=w===void 0?function(j){return j.data.total}:w,J=e.setMsg,te=J===void 0?function(j){return j.msg}:J,G=e.actionBar,q=G===void 0?[]:G,A=e.paginationAlias,u=A===void 0?{pageIndex:"pageIndex",pageSize:"pageSize"}:A,h=e.tableAlertOptionRenderPro,$=h===void 0?[]:h,Q=e.treeFieldProps,S=Q===void 0?null:Q,N=(0,U.useRef)(),ve=(0,U.useRef)(),Te=B.rowKey||"id",le=[].concat(k()(d?[function(j){var i=j.record;return(0,r.jsx)(Ae,{title:"\u7F16\u8F91",id:Te,record:i,children:(0,r.jsx)("a",{children:"\u7F16\u8F91"})})}]:[]),k()(q),k()(d?[function(j){var i=j.record;return(0,r.jsx)(Ne.Z,{title:"\u5220\u9664",description:"\u786E\u5B9A\u5220\u9664\u8FD9\u6761\u6570\u636E\u5417\uFF1F",onConfirm:function(){Re([i[Te]],function(){},!1)},okText:"\u662F",cancelText:"\u5426",children:(0,r.jsx)("a",{style:{color:"red"},children:"\u5220\u9664"})})}]:[])),Ae=function(i){var g=i.children,v=i.record,y=i.id,R=i.title,M=R===void 0?"\u65B0\u589E":R;console.log(5555,v,y);var X=a,V={};return y&&v!==null&&v!==void 0&&v[y]&&(V[y]=v==null?void 0:v[y],f&&(X=f)),(0,r.jsx)(fe,n()(n()({ajax:o},E),{},{url:X,finishFun:function(){var me;(me=N.current)===null||me===void 0||me.reload()},params:n()(n()({},V),E.params),fieldProps:n()({initialValues:v,columns:B.columns.map(function(ne){return n()(n()({},ne),{},{width:null})}),title:M},E.fieldProps),children:g}))},mr=function(i,g){return(0,r.jsx)("div",{className:"durians_table_pro_action",children:le.map(function(v,y){return(0,r.jsxs)(U.Fragment,{children:[(0,r.jsx)(v,{record:g}),le.length>1&&y<le.length-1?(0,r.jsx)(Me.Z,{type:"vertical"}):null]},y)})})},Re=function(i){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,y=i;!O&&!v&&(y=i[0]);var R=n()({},Z);v?R[C]=y:I?R[I]=y:R[B.rowKey||"id"]=y,o(d,R,function(M){var X;ae.ZP.success(te(M)),(X=N.current)===null||X===void 0||X.reload(),N.current.clearSelected(),g()})};return(0,r.jsx)(Pe,{children:(0,r.jsxs)("div",{className:"durians_table_body",children:[S?(0,r.jsx)("div",{className:"durians_table_body_l",style:{width:300},children:(0,r.jsx)(Ce,n()({},S))}):null,(0,r.jsx)("div",{className:"durians_table_body_r",children:(0,r.jsx)(be.Z,n()(n()({formRef:ve,defaultSize:"small",scroll:{x:"100%"},rowSelection:{selections:[ge.Z.SELECTION_ALL,ge.Z.SELECTION_INVERT]},tableAlertRender:function(i){var g=i.selectedRowKeys,v=i.selectedRows,y=i.onCleanSelected;return console.log(g,v),(0,r.jsx)(xe.Z,{size:24,children:(0,r.jsxs)("span",{children:["\u5DF2\u9009 ",g.length," \u9879",(0,r.jsx)("a",{style:{marginInlineStart:8},onClick:y,children:"\u53D6\u6D88\u9009\u62E9"})]})})},tableAlertOptionRender:function(i){var g=i.selectedRowKeys,v=i.selectedRows,y=i.onCleanSelected;return(0,r.jsxs)(xe.Z,{size:16,children:[d?(0,r.jsx)($e,{title:"\u662F\u5426\u786E\u5B9A\u5220\u9664\uFF1F",Content:function(){return"\u786E\u5B9A\u5220\u9664\uFF1F"},handleOk:function(M){Re(g,function(){M()})},children:(0,r.jsx)(se.ZP,{size:"small",icon:(0,r.jsx)(Oe.Z,{}),danger:!0,children:"\u6279\u91CF\u5220\u9664"},"danger")}):null,$.map(function(R,M){return(0,r.jsx)(R,{selectedRowKeys:g,selectedRows:v,onCleanSelected:y,formRef:ve},M)})]})},actionRef:N,request:function(){var j=_()(H()().mark(function i(g,v,y){var R,M;return H()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:if(R=B.dataSource,M={},M[u.pageIndex]=g.current,M[u.pageSize]=g.pageSize,console.log(777,v,g,y,M),!c){V.next=8;break}return V.next=8,o(c,n()(n()({},M),g),function(ne){console.log(ne),R=ne});case 8:return V.abrupt("return",Promise.resolve({data:K(R),success:!0,total:Y(R)}));case 9:case"end":return V.stop()}},i)}));return function(i,g,v){return j.apply(this,arguments)}}(),editable:{type:"multiple"},columnsState:{persistenceKey:"pro-table-singe-demos",persistenceType:"localStorage",defaultValue:{option:{fixed:"right",disable:!0}},onChange:function(i){console.log("value: ",i)}},rowKey:"id",options:{setting:{listsHeight:400}},form:{syncToUrl:!1},pagination:{pageSize:10,onChange:function(i){return console.log(i)}},dateFormatter:"string"},B),{},{columns:[].concat(k()(je(B.columns,o)),k()(le.length?[{title:"\u64CD\u4F5C",dataIndex:"actionTablePro",fixed:"right",hideInSearch:!0,actionWidth:D,render:mr}]:[])),search:B.search?n()({labelWidth:"auto",span:4,defaultCollapsed:!1},B.search||{}):{labelWidth:"auto"},toolBarRender:function(i){var g;return console.log(6666,B.toolBarRender),[].concat(k()(a?[(0,r.jsx)(Ae,{children:(0,r.jsx)(se.ZP,{icon:(0,r.jsx)(pe.Z,{}),type:"primary",children:"\u65B0\u5EFA"},"button")})]:[]),k()(((g=B.toolBarRender)===null||g===void 0?void 0:g.map(function(v){return console.log(7656,Ze()(v)),typeof v=="function"?(0,r.jsx)(v,{action:i,formRef:ve}):v}))||[]))}}))})]})})},Ye=Xe,qe=t(85576),_e=function(e){var l=e.title,o=l===void 0?"\u57FA\u7840":l,s=e.handleOk,c=s===void 0?function(p){p()}:s,a=e.Content,f=a===void 0?function(){return(0,r.jsx)("div",{children:"\u793A\u4F8B"})}:a,d=e.children,F=d===void 0?(0,r.jsx)("div",{children:"\u70B9\u51FB"}):d,C=e.fieldProps,P=C===void 0?{}:C,I=(0,U.useState)(!1),x=oe()(I,2),O=x[0],m=x[1],Z=function(){m(!0)},T=function(){c(function(){m(!1)})},E=function(){m(!1)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{onClick:Z,children:F}),(0,r.jsx)(qe.Z,n()(n()({title:o,open:O,onOk:T,onCancel:E},P),{},{children:(0,r.jsx)(f,{isModalOpen:O,setIsModalOpen:m})}))]})},$e=_e,er=t(87547),Se=t(94149),rr=t(24454),tr=t(68262),de=t(5966),nr=t(16434),ar=t(63434),or=t(9361),ue=t(56140),re=t(99191),gr=(0,re.df)([{id:"SHA256",fun:function(e){return W().SHA256(e).toString(W().enc.Base64)}},{id:"MD5",fun:function(e){return W().MD5(e).toString(W().enc.Hex)}}]),ce="autoLogin",lr=function(e){var l=e.ajax,o=l===void 0?ee:l,s=e.url,c=e.captchaUrl,a=e.loginFormFieldProps,f=e.hasSmsLogin,d=f===void 0?!1:f,F=e.hasAccountLogin,C=F===void 0?!0:F,P=e.phoneField,I=P===void 0?"mobile":P,x=e.extraPasswordText,O=x===void 0?"":x,m=e.secretKey,Z=m===void 0?"":m,T=e.setData,E=T===void 0?function(A){return A.data}:T,p=e.tokenField,D=p===void 0?"token":p,z=e.callback,B=z===void 0?function(){}:z,b=or.Z.useToken(),K=b.token,w=(0,U.useState)("account"),Y=oe()(w,2),J=Y[0],te=Y[1],G=(0,U.useRef)();(0,U.useEffect)(function(){var A=(0,re.pv)(ce);A&&q((0,re.pv)(ce))},[]);var q=function(u){var h=n()({},u);h.password=He(h.password+O,Z,Z),o(s,h,function($){(0,re.KN)(D,E($.data)),u.autoLogin&&(0,re.ok)(ce,u),B($)},!1)};return(0,r.jsx)("div",{style:{backgroundColor:K.colorBgContainer},className:"crm_login_body",children:(0,r.jsxs)(tr.U,n()(n()({formRef:G,title:"\u767B\u5F55",subTitle:"\u6B22\u8FCE\u767B\u5F55\u7CFB\u7EDF",initialValues:{username:"",password:""},onFinish:function(){var A=_()(H()().mark(function u(h){var $;return H()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,G.current.validateFields();case 2:return $=S.sent,$&&q(h),S.abrupt("return",!0);case 5:case"end":return S.stop()}},u)}));return function(u){return A.apply(this,arguments)}}()},a),{},{children:[(0,r.jsxs)(ue.Z,{centered:!0,activeKey:J,onChange:function(u){return te(u)},children:[(0,r.jsx)(ue.Z.TabPane,{tab:"\u8D26\u53F7\u5BC6\u7801\u767B\u5F55",disabled:!C},"account"),(0,r.jsx)(ue.Z.TabPane,{tab:"\u624B\u673A\u53F7\u767B\u5F55",disabled:!d},"phone")]}),J==="account"&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(de.Z,{name:"username",fieldProps:{size:"large",prefix:(0,r.jsx)(er.Z,{className:"prefixIcon"})},placeholder:"\u7528\u6237\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"}]}),(0,r.jsx)(de.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,r.jsx)(Se.Z,{className:"prefixIcon"}),strengthText:"\u5BC6\u7801\u5E94\u5305\u542B\u6570\u5B57\u3001\u5B57\u6BCD\u548C\u7279\u6B8A\u5B57\u7B26\uFF0C\u957F\u5EA6\u81F3\u5C11\u4E3A8\u4E2A\u5B57\u7B26",statusRender:function(u){var h=function(){return u&&u.length>12?"ok":u&&u.length>6?"pass":"poor"},$=h();return $==="pass"?(0,r.jsx)("div",{style:{color:K.colorWarning},children:"\u5F3A\u5EA6\uFF1A\u4E2D"}):$==="ok"?(0,r.jsx)("div",{style:{color:K.colorSuccess},children:"\u5F3A\u5EA6\uFF1A\u5F3A"}):(0,r.jsx)("div",{style:{color:K.colorError},children:"\u5F3A\u5EA6\uFF1A\u5F31"})}},placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"}]})]}),J==="phone"&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(de.Z,{fieldProps:{size:"large",prefix:(0,r.jsx)(rr.Z,{className:"prefixIcon"})},name:I,placeholder:"\u624B\u673A\u53F7",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\uFF01"},{pattern:/^1\d{10}$/,message:"\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF\uFF01"}]}),(0,r.jsx)(nr.Z,{fieldProps:{size:"large",prefix:(0,r.jsx)(Se.Z,{className:"prefixIcon"})},captchaProps:{size:"large"},placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",captchaTextRender:function(u,h){return u?"".concat(h," ","\u83B7\u53D6\u9A8C\u8BC1\u7801"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"},phoneName:I,name:"captcha",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01"}],onGetCaptcha:function(){var A=_()(H()().mark(function u(h){var $;return H()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:$={},$[I]=h,o(c,n()({},$),function(N){ae.ZP.success("\u9A8C\u8BC1\u7801\u5DF2\u53D1\u9001\uFF0C\u8BF7\u67E5\u770B\u624B\u673A\u77ED\u4FE1")});case 3:case"end":return S.stop()}},u)}));return function(u){return A.apply(this,arguments)}}()})]}),(0,r.jsxs)("div",{style:{marginBlockEnd:24},children:[(0,r.jsx)(ar.Z,{noStyle:!0,name:"autoLogin",children:"\u81EA\u52A8\u767B\u5F55"}),(0,r.jsx)("a",{style:{float:"right"},children:"\u5FD8\u8BB0\u5BC6\u7801"})]})]}))})},sr=lr,ir=t(77646),dr=function(e){var l=e.params,o=l===void 0?{}:l,s=e.layoutType,c=s===void 0?"ModalForm":s,a=e.fieldProps,f=a===void 0?{}:a,d=e.url,F=e.ajax,C=F===void 0?ee:F,P=e.finishFun,I=P===void 0?function(){}:P,x=e.setMsg,O=x===void 0?function(T){return T.msg}:x,m=e.children,Z=m===void 0?(0,r.jsx)(se.ZP,{children:"\u70B9\u51FB\u6211"}):m;return(0,r.jsx)(Pe,{children:(0,r.jsx)(ir.Z,n()(n()(n()({trigger:Z,layoutType:"ModalForm",onFinish:_()(H()().mark(function T(){var E,p,D,z=arguments;return H()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return E=z.length>0&&z[0]!==void 0?z[0]:{},p=!1,D=n()(n()({},o),E),console.log(E),b.next=6,C(d,D,function(K){ae.ZP.success(O(K)),I(),p=!0});case 6:return b.abrupt("return",p);case 7:case"end":return b.stop()}},T)}))},c==="ModalForm"?{modalProps:{destroyOnClose:!0}}:{drawerProps:{destroyOnClose:!0}}),f),{},{columns:je(f.columns,C)}))})},fe=dr,ur=t(17960),cr=t(89705),fr=[{title:"Expand to load",key:"0"},{title:"Expand to load",key:"1"},{title:"Tree Node",key:"2",isLeaf:!0}],vr=function(e){var l=e.title,o=l===void 0?"\u9009\u62E9":l,s=e.ajax,c=s===void 0?ee:s,a=e.url,f=a===void 0?"https://proapi.azurewebsites.net/github/issues":a,d=e.params,F=d===void 0?{}:d,C=e.addUrl,P=e.editUrl,I=e.deleteUrl,x=e.deleteFields,O=x===void 0?"idList":x,m=e.deleteField,Z=m===void 0?null:m,T=e.deleteFieldIsArr,E=T===void 0?!1:T,p=e.deleteParams,D=p===void 0?{}:p,z=e.addFormProFieldProps,B=z===void 0?{}:z,b=e.setData,K=b===void 0?function(u){return u.data}:b,w=e.fieldNames,Y=(0,U.useState)(fr),J=oe()(Y,2),te=J[0],G=J[1];(0,U.useEffect)(function(){c(f,n()({},F),function(u){G(K(u))})},[]);var q=function(h){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return c(f,n()(n()({},F(h)),$),function(Q){var S=K(Q);w&&(S=S.map(function(N){return N.label=N[w.label],N.value=N[w.value],N})),G(function(N){return h.value?ie(N,h.value,S):S})})},A=function(h){var $=h.children;return(0,r.jsx)(fe,n()(n()({url:C},B),{},{fieldProps:{columns:[{title:"\u6807\u9898",dataIndex:"title",formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}}]},children:$}))};return(0,r.jsxs)("div",{className:"durians_tree_body",children:[(0,r.jsxs)("div",{className:"durians_tree_body_title",children:[(0,r.jsx)("div",{className:"durians_tree_body_title_l",children:o}),(0,r.jsx)("div",{className:"durians_tree_body_title_r",children:(0,r.jsx)(A,{children:(0,r.jsx)(pe.Z,{})})})]}),(0,r.jsx)(ur.Z,{loadData:q,treeData:te,titleRender:function(h){return console.log(8887,h),(0,r.jsxs)("div",{className:"durians_tree_body_title_node",children:[(0,r.jsx)("div",{className:"durians_tree_body_title_node_l",children:h.title}),(0,r.jsx)("div",{className:"durians_tree_body_title_node_r",children:(0,r.jsx)(cr.Z,{})})]})}})]})},Ce=vr},42480:function(){},24654:function(){}}]);
