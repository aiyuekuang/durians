(self.webpackChunkdurians=self.webpackChunkdurians||[]).push([[918],{65388:function(on,Je,o){"use strict";o.r(Je),o.d(Je,{FormPro:function(){return ze},LoginPro:function(){return Jr},ModalPro:function(){return Ke},TablePro:function(){return or},TreePro:function(){return ir}});var hr=o(9783),Ue=o.n(hr),mr=o(15009),W=o.n(mr),pr=o(99289),se=o.n(pr),gr=o(97857),r=o.n(gr),xr=o(19632),ue=o.n(xr),Fr=o(5574),_=o.n(Fr),Ge=o(48689),Qe=o(24969),Pr=o(82099),Xe=o(86738),yr=o(96074),ne=o(45360),Ye=o(60940),qe=o(42075),Fe=o(83622),B=o(67294),jr=o(64599),_e=o.n(jr),$r=o(11238),Sr=o(81354),te=o.n(Sr),pe=function(e,v,h){var u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:function(t){};if(e)return $r.ZP.post(e,{data:v}).then(function(t){t.code==0?h(t):(u(t),ne.ZP.error(t.msg))}).catch(function(t){u(t),console.log(t)});console.log("\u6CA1\u6709\u4F20\u9012URL")},er=function(e,v){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,u=_e()(e),t;try{var i=function(){var d=t.value,s=d==null?void 0:d.proConfig,p=r()({},d.fieldProps);s!=null&&s.isKeyword&&(d.hideInSearch=!0),d.editable===!1&&(h?p=r()(r()({},p),{},{disabled:!0}):p=r()(r()({},p),{},{disabled:!1})),!d.request&&s!==null&&s!==void 0&&s.url&&(d.valueType==="select"||d.valueType==="treeSelect")&&(p=r()(r()({},p),{},{maxTagCount:"responsive"},d.fieldProps),d.request=function(){var I=se()(W()().mark(function j(F,S){var y;return W()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return y=[],C.next=3,v(s.url,r()(r()({},F),typeof s.params=="function"?s.params(F,S):s.params||{}),function(D){y=s.setData(D)});case 3:return C.abrupt("return",y);case 4:case"end":return C.stop()}},j)}));return function(j,F){return I.apply(this,arguments)}}()),d.fieldProps=p};for(u.s();!(t=u.n()).done;)i()}catch(m){u.e(m)}finally{u.f()}return e},Cr=function(e,v,h){var u=te().enc.Utf8.parse(v),t=te().enc.Utf8.parse(h);return te().AES.encrypt(e,u,{mode:te().mode.ECB,padding:te().pad.Pkcs7}).toString()},ln=function(e,v,h){var u=CryptoJS.enc.Utf8.parse(v),t=CryptoJS.enc.Utf8.parse(h);return CryptoJS.AES.decrypt(e,u,{mode:CryptoJS.mode.ECB,padding:CryptoJS.pad.Pkcs7})},Tr=function(e){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return v.find(function(h){return e(h)})},rr=o(89451),nr=o(16434),Ir=o(59847),Ne=o(68652),n=o(85893);function we(H,e,v){var h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"value",u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"children",t=(0,Ne.Z)(H),i=_e()(t),m;try{for(i.s();!(m=i.n()).done;){var d=m.value;d[h]===e?d.children=v:d.children&&(d.children=we(d.children,e,v,h,u))}}catch(s){i.e(s)}finally{i.f()}return t}var Zr=function(e){var v=e.ajax,h=v===void 0?pe:v,u=e.rowKey,t=u===void 0?"value":u,i=e.fieldProps,m=i.fieldNames,d=i.params,s=d===void 0?function(C){return{}}:d,p=i.url,I=i.setData,j=(0,B.useState)([]),F=_()(j,2),S=F[0],y=F[1];(0,B.useEffect)(function(){P({},r()({},s({})))},[]);var P=function(D){var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return h(p,r()(r()({},s(D)),Z),function(V){var O=I(V);y(function(T){return D[t]?we(T,D[t],O,t):O})})};return(0,n.jsx)(Ir.Z,r()(r()({placeholder:"\u8BF7\u9009\u62E9",treeDataSimpleMode:!0,style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"}},e==null?void 0:e.fieldProps),{},{loadData:P,treeData:S}))},Ar=Zr,Rr=o(2058),Er=o(88484),Br=function(e){var v=e.title,h=v===void 0?"\u4E0A\u4F20":v,u=e.fieldPropsUpload,t=u===void 0?{}:u,i=e.url,m=i===void 0?"/upload":i,d=e.setData,s=d===void 0?function(){}:d,p=e.onChange,I=p===void 0?function(){}:p,j=e.value,F=j===void 0?[]:j,S=e.ajaxSuccess,y=S===void 0?function(E){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};(E==null?void 0:E.code)===0&&c()}:S,P=e.ajaxError,C=P===void 0?function(E){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};(E==null?void 0:E.code)!==0&&c()}:P,D=(0,B.useState)([]),Z=_()(D,2),V=Z[0],O=Z[1];(0,B.useEffect)(function(){O(T(F))},[]);var T=function(c){return c&&c.length?typeof c=="string"?JSON.parse(c):JSON.stringify(c):c};console.log(555,t,m,F);var U=r()({name:"file",action:m,fileList:V,onChange:function(c){console.log(77877,c),c.file.status!=="uploading"&&console.log(c.file,c.fileList),c.file.status==="done"?(y(c.file.response,function(a){I(T(c.fileList.map(function(w){return r()(r()({},w),{},{url:s(c.file.response)})}))),ne.ZP.success("".concat(c.file.name," \u4E0A\u4F20\u6210\u529F"))}),C(c.file.response,function(a){console.log(666,a),a&&ne.ZP.error(a.msg)})):c.file.status==="error"&&ne.ZP.error("".concat(c.file.name," \u4E0A\u4F20\u5931\u8D25")),O(c.fileList)}},t);return(0,n.jsx)(Rr.Z,r()(r()({},U),{},{children:(0,n.jsx)(Fe.ZP,{variant:"solid",icon:(0,n.jsx)(Er.Z,{}),children:h})}))},tr=Br,Dr=o(85576),Lr=function(e){var v=e.title,h=v===void 0?"\u57FA\u7840":v,u=e.handleOk,t=u===void 0?function(Z){Z()}:u,i=e.Content,m=i===void 0?function(){return(0,n.jsx)("div",{children:"\u793A\u4F8B"})}:i,d=e.children,s=d===void 0?(0,n.jsx)("div",{children:"\u70B9\u51FB"}):d,p=e.fieldProps,I=p===void 0?{}:p,j=(0,B.useState)(!1),F=_()(j,2),S=F[0],y=F[1],P=function(){y(!0)},C=function(){t(function(){y(!1)})},D=function(){y(!1)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{onClick:P,style:{width:"max-content"},children:s}),(0,n.jsx)(Dr.Z,r()(r()({title:h,open:S,onOk:C,onCancel:D},I),{},{children:typeof m=="function"?(0,n.jsx)(m,{isModalOpen:S,setIsModalOpen:y}):m}))]})},Ke=Lr,Or=function(e){var v=e.title,h=v===void 0?"\u9009\u62E9":v,u=e.tableFieldProps,t=u===void 0?{}:u,i=e.modalFieldProps,m=i===void 0?{}:i,d=e.value,s=d===void 0?[]:d,p=e.onChange,I=(0,B.useState)(s),j=_()(I,2),F=j[0],S=j[1];return(0,B.useEffect)(function(){S(s)},[s]),(0,n.jsx)(Ke,r()(r()({Content:(0,n.jsx)(or,r()(r()({},t),{},{value:F,onSelectChange:function(P){S(P)},fieldProps:r()({},t.fieldProps)}))},m),{},{handleOk:function(P){p(F),P()},children:(0,n.jsx)(Fe.ZP,{type:"link",variant:"link",children:s&&s.length?"\u5DF2\u9009\u62E9".concat(s.length,"\u4E2A"):h})}))},br=Or,Ur=o(98691),Nr=function(e){var v=e.children,h=(0,B.useContext)(rr.L_);return(0,n.jsx)(rr.L_.Provider,{value:r()(r()({},h),{},{valueTypeMap:{treeSelectPro:{renderFormItem:function(t,i){return console.log(7666,i),(0,n.jsx)(Ar,r()({},i))}},uploadPro:{render:function(t){return console.log(6566,t),(0,n.jsx)(tr,{value:t,fieldPropsUpload:{disabled:!0}})},renderFormItem:function(t,i){return console.log(67655,i),(0,n.jsx)(tr,r()({},i.fieldProps))}},tableSelect:{renderFormItem:function(t,i){return console.log(667555,i),(0,n.jsx)(br,r()(r()({},i),i.fieldProps))},render:function(t){return(0,n.jsxs)(n.Fragment,{children:["\u5DF2\u9009\u62E9",t.length,"\u9879"]})}},captcha:{renderFormItem:function(t,i){console.log(66766,i);var m=(i==null?void 0:i.fieldProps)||{},d=m.ajax,s=d===void 0?pe:d,p=m.url,I=p===void 0?"":p,j=m.phoneName,F=j===void 0?"phone":j,S=m.name,y=S===void 0?"captcha":S;return(0,n.jsx)(nr.Z,r()(r()({noStyle:!0,captchaProps:{},fieldProps:{prefix:(0,n.jsx)(Ur.Z,{})},phoneName:F,name:y,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"}],placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"},i),{},{onGetCaptcha:function(){var P=se()(W()().mark(function C(D){var Z;return W()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:Z={},Z[F]=D,s(I,Z,function(T){ne.ZP.success("\u624B\u673A\u53F7 ".concat(D," \u9A8C\u8BC1\u7801\u53D1\u9001\u6210\u529F!"))},function(){throw new Error("\u83B7\u53D6\u9A8C\u8BC1\u7801\u9519\u8BEF")});case 3:case"end":return O.stop()}},C)}));return function(C){return P.apply(this,arguments)}}()}))}}}}),children:v})},ar=Nr,wr=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:"\u6807\u9898",dataIndex:"title",copyable:!0,ellipsis:!0,tooltip:"\u6807\u9898\u8FC7\u957F\u4F1A\u81EA\u52A8\u6536\u7F29",formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}}],Kr=function(e){var v,h,u=e.ajax,t=u===void 0?pe:u,i=e.url,m=i===void 0?"https://proapi.azurewebsites.net/github/issues":i,d=e.addUrl,s=e.editUrl,p=e.deleteUrl,I=e.deleteFields,j=I===void 0?"idList":I,F=e.deleteField,S=F===void 0?null:F,y=e.deleteFieldIsArr,P=y===void 0?!1:y,C=e.deleteParams,D=C===void 0?{}:C,Z=e.deleteBatchHidden,V=Z===void 0?!1:Z,O=e.addFormProFieldProps,T=O===void 0?{}:O,U=e.actionWidth,E=U===void 0?100:U,c=e.fieldProps,a=c===void 0?{search:{},columns:wr,rowKey:"id"}:c,w=e.setData,z=w===void 0?function(f){var l;return f==null||(l=f.data)===null||l===void 0?void 0:l.records}:w,Y=e.setTotal,ge=Y===void 0?function(f){var l;return f==null||(l=f.data)===null||l===void 0?void 0:l.total}:Y,oe=e.setMsg,Ze=oe===void 0?function(f){return f==null?void 0:f.msg}:oe,ee=e.actionBar,ye=ee===void 0?[]:ee,le=e.paginationAlias,J=le===void 0?{pageIndex:"pageIndex",pageSize:"pageSize"}:le,ce=e.tableAlertOptionRenderPro,ve=ce===void 0?[]:ce,fe=e.treeFieldProps,b=fe===void 0?null:fe,A=e.paramsFun,N=A===void 0?function(f){return f}:A,K=e.treeParamsFun,he=K===void 0?function(f){return{treeId:f}}:K,M=e.treeWidth,je=M===void 0?200:M,me=e.value,xe=me===void 0?null:me,Ae=e.onSelectChange,$e=Ae===void 0?null:Ae,X=e.keywordField,R=X===void 0?null:X,q=e.keywordPlaceholder,ae=q===void 0?null:q,re=(0,B.useState)({}),L=_()(re,2),Re=L[0],Ee=L[1],Be=(0,B.useState)({}),De=_()(Be,2),Se=De[0],Ce=De[1],Le=function(l){console.log("selectedRowKeys changed: ",l),$e&&$e(l)},Ve=(0,B.useState)((a==null||(v=a.pagination)===null||v===void 0?void 0:v.pageSize)||10),dr=_()(Ve,2),nn=dr[0],tn=dr[1],ie=(0,B.useRef)(),de=(0,B.useRef)(),sr=a.rowKey||"id",Oe=[].concat(ue()(s?[function(f){var l=f.record;return(0,n.jsx)(ur,{title:"\u7F16\u8F91",id:sr,record:l,children:(0,n.jsx)("a",{children:"\u7F16\u8F91"})})}]:[]),ue()(ye),ue()(p?[function(f){var l=f.record;return(0,n.jsx)(Xe.Z,{title:"\u5220\u9664",description:"\u786E\u5B9A\u5220\u9664\u8FD9\u6761\u6570\u636E\u5417\uFF1F",onConfirm:function(){cr([l[sr]],function(){},!1)},okText:"\u662F",cancelText:"\u5426",children:(0,n.jsx)("a",{style:{color:"red"},children:"\u5220\u9664"})})}]:[]));(0,B.useEffect)(function(){de!=null&&de.current&&Ce(de.current.getFieldsValue())},[]);var ur=function(l){var g=l.children,x=l.record,$=l.id,k=l.title,G=k===void 0?"\u65B0\u589E":k,be=typeof a.columns=="function"?a.columns("add"):a.columns,Q=d,Ie={};return $&&x!==null&&x!==void 0&&x[$]&&(Ie[$]=x==null?void 0:x[$],s&&(Q=s)),(0,n.jsx)(ze,r()(r()({isEdit:$&&(x==null?void 0:x[$]),ajax:t},T),{},{url:Q,finishFun:function(){var We;(We=ie.current)===null||We===void 0||We.reload()},record:r()(r()(r()({},x),Re),Ie),fieldProps:r()({columns:be.map(function(fr){return r()(r()({},fr),{},{width:null})}),title:G},T.fieldProps),children:g}))},an=function(l,g){return(0,n.jsx)("div",{className:"durians_table_pro_action",children:Oe.map(function(x,$){return(0,n.jsxs)(B.Fragment,{children:[(0,n.jsx)(x,{record:g,formRef:de,action:ie.current}),Oe.length>1&&$<Oe.length-1?(0,n.jsx)(yr.Z,{type:"vertical"}):null]},$)})})},cr=function(l){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,$=l;!P&&!x&&($=l[0]);var k=r()({},D);if(x)k[j]=$;else if(S)k[S]=$;else{var G=typeof(a==null?void 0:a.rowKey)=="function"?a==null?void 0:a.rowKey({}):a==null?void 0:a.rowKey;k[G||"id"]=$}t(p,k,function(be){var Q;ne.ZP.success(Ze(be)),(Q=ie.current)===null||Q===void 0||Q.reload(),ie.current.clearSelected(),g()})},vr=typeof a.columns=="function"?a.columns("table"):a.columns||[],Te=Tr(function(f){var l;return f==null||(l=f.proConfig)===null||l===void 0?void 0:l.isKeyword},vr);return console.log(678,E),(0,n.jsx)(ar,{children:(0,n.jsxs)("div",{className:"durians_table_body",children:[b?(0,n.jsx)("div",{className:"durians_table_body_l",style:{width:je},children:(0,n.jsx)(ir,r()(r()({ajax:t},b),{},{fieldProps:r()({onSelect:function(l){var g;Ee(function(x){var $=(0,Ne.Z)(x);return r()(r()({},$),he(l))}),(g=ie.current)===null||g===void 0||g.reload()}},b.fieldProps)}))}):null,(0,n.jsx)("div",{className:"durians_table_body_r",style:r()({},b?{maxWidth:"calc(100% - ".concat(je+8,"px)")}:{}),children:(0,n.jsx)(Pr.Z,r()(r()({formRef:de,defaultSize:"small",scroll:{x:"max-content"},rowSelection:p&&!V||ve.length||$e?r()(r()({selections:[Ye.Z.SELECTION_ALL,Ye.Z.SELECTION_INVERT],preserveSelectedRowKeys:!0},xe?{selectedRowKeys:xe}:{}),{},{onChange:Le}):!1,tableAlertRender:function(l){var g=l.selectedRowKeys,x=l.selectedRows,$=l.onCleanSelected;return console.log(g,x),(0,n.jsx)(qe.Z,{size:24,children:(0,n.jsxs)("span",{children:["\u5DF2\u9009 ",g.length," \u9879",(0,n.jsx)("a",{style:{marginInlineStart:8},onClick:$,children:"\u53D6\u6D88\u9009\u62E9"})]})})},tableAlertOptionRender:function(l){var g=l.selectedRowKeys,x=l.selectedRows,$=l.onCleanSelected;return(0,n.jsxs)(qe.Z,{size:16,children:[p&&!V?(0,n.jsx)(Ke,{title:"\u662F\u5426\u786E\u5B9A\u5220\u9664\uFF1F",Content:function(){return"\u786E\u5B9A\u5220\u9664\uFF1F"},handleOk:function(G){cr(g,function(){G()})},children:(0,n.jsx)(Fe.ZP,{variant:"solid",size:"small",icon:(0,n.jsx)(Ge.Z,{}),danger:!0,children:"\u6279\u91CF\u5220\u9664"},"danger")}):null,ve.map(function(k,G){return(0,n.jsx)(k,{selectedRowKeys:g,selectedRows:x,onCleanSelected:$,formRef:de,actionRef:ie,searchValues:Se},G)})]})},actionRef:ie,request:function(){var f=se()(W()().mark(function l(g,x,$){var k,G;return W()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:if(k=a.dataSource,G=r()({},g),G[J.pageIndex]=g.current,G[J.pageSize]=g.pageSize,Ce(G),!m){Q.next=8;break}return Q.next=8,t(m,N(r()({},G)),function(Ie){console.log(Ie),k=Ie});case 8:return Q.abrupt("return",Promise.resolve({data:k?z(k):[],success:!0,total:k?ge(k):0}));case 9:case"end":return Q.stop()}},l)}));return function(l,g,x){return f.apply(this,arguments)}}(),rowKey:"id",form:{syncToUrl:!1},dateFormatter:"string"},a),{},{params:r()(r()({},Re),(a==null?void 0:a.params)||{}),pagination:r()(r()({},a==null?void 0:a.pagination),{},{pageSize:nn,onChange:function(l,g){var x;if(a!=null&&(x=a.pagination)!==null&&x!==void 0&&x.onChange){var $;a==null||($=a.pagination)===null||$===void 0||$.onChange(l,g)}tn(g)}}),options:r()(r()({},Te?{search:{name:Te.formItemProps?Te.formItemProps.name:Te.dataIndex,placeholder:"\u8BF7\u8F93\u5165".concat(Te.title),allowClear:!0}}:{}),{},{setting:{listsHeight:400}},a.options),columns:[].concat(ue()(er(vr,t)),ue()(Oe.length?[{title:"\u64CD\u4F5C",dataIndex:"actionTablePro",fixed:"right",hideInSearch:!0,actionWidth:E,render:an}]:[])),search:r()({labelWidth:"auto"},(a==null?void 0:a.search)||{}),toolBarRender:function(l){var g=a.toolBarRender;return g===!1?!1:[].concat(ue()(d?[(0,n.jsx)(ur,{children:(0,n.jsx)(Fe.ZP,{variant:"solid",icon:(0,n.jsx)(Qe.Z,{}),type:"primary",children:"\u65B0\u5EFA"},"button")})]:[]),ue()((g==null?void 0:g.map(function(x){return typeof x=="function"?(0,n.jsx)(x,{action:l,formRef:de,searchValues:Se}):x}))||[]))},toolbar:r()(r()({},a.toolbar),R?{search:r()({onSearch:function(l){var g;Ee(function(x){console.log(666,l);var $=(0,Ne.Z)(x);return r()(r()({},$),{},Ue()({},R,l))}),(g=ie.current)===null||g===void 0||g.reload()},placeholder:"\u8BF7\u8F93\u5165".concat(ae),allowClear:!0},(a==null||(h=a.toolbar)===null||h===void 0?void 0:h.search)||{})}:{})}))})]})})},or=Kr,Mr=o(87547),lr=o(94149),kr=o(24454),Hr=o(68262),Me=o(5966),zr=o(63434),Vr=o(9361),ke=o(56140),Pe=o(99191),dn=(0,Pe.df)([{id:"SHA256",fun:function(e){return te().SHA256(e).toString(te().enc.Base64)}},{id:"MD5",fun:function(e){return te().MD5(e).toString(te().enc.Hex)}}]),He="autoLogin",Wr=function(e){var v=e.ajax,h=v===void 0?pe:v,u=e.url,t=e.captchaUrl,i=e.loginFormFieldProps,m=e.hasSmsLogin,d=m===void 0?!1:m,s=e.hasAccountLogin,p=s===void 0?!0:s,I=e.phoneField,j=I===void 0?"mobile":I,F=e.usernameField,S=F===void 0?"username":F,y=e.passwordField,P=y===void 0?"password":y,C=e.captchaField,D=C===void 0?"captcha":C,Z=e.extraPasswordText,V=Z===void 0?"":Z,O=e.secretKey,T=O===void 0?null:O,U=e.setData,E=U===void 0?function(b){return b.data}:U,c=e.tokenField,a=c===void 0?"token":c,w=e.callback,z=w===void 0?function(){}:w,Y=e.BottomDom,ge=Y===void 0?function(b){return(0,n.jsx)(n.Fragment,{})}:Y,oe=e.encrypt,Ze=Vr.Z.useToken(),ee=Ze.token,ye=(0,B.useState)("account"),le=_()(ye,2),J=le[0],ce=le[1],ve=(0,B.useRef)();(0,B.useEffect)(function(){var b=(0,Pe.pv)(He);b&&fe((0,Pe.pv)(He))},[]);var fe=function(A){var N=r()({},A);N[P]=T?Cr(N[P]+V,T,T):N[P],oe&&(N[P]=oe(N[P])),h(u,N,function(K){(0,Pe.KN)(a,E(K)),A.autoLogin&&(0,Pe.ok)(He,A),z(K)},!1)};return(0,n.jsx)("div",{style:{backgroundColor:ee.colorBgContainer},className:"crm_login_body",children:(0,n.jsxs)(Hr.U,r()(r()({formRef:ve,title:"\u767B\u5F55",subTitle:"\u6B22\u8FCE\u767B\u5F55\u7CFB\u7EDF",initialValues:Ue()(Ue()({},S,""),P,""),onFinish:function(){var b=se()(W()().mark(function A(N){var K;return W()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,ve.current.validateFields();case 2:return K=M.sent,K&&fe(N),M.abrupt("return",!0);case 5:case"end":return M.stop()}},A)}));return function(A){return b.apply(this,arguments)}}()},i),{},{children:[(0,n.jsxs)(ke.Z,{centered:!0,activeKey:J,onChange:function(A){return ce(A)},children:[(0,n.jsx)(ke.Z.TabPane,{tab:"\u8D26\u53F7\u5BC6\u7801\u767B\u5F55",disabled:!p},"account"),(0,n.jsx)(ke.Z.TabPane,{tab:"\u624B\u673A\u53F7\u767B\u5F55",disabled:!d},"phone")]}),J==="account"&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Me.Z,{name:S,fieldProps:{size:"large",prefix:(0,n.jsx)(Mr.Z,{className:"prefixIcon"})},placeholder:"\u7528\u6237\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"}]}),(0,n.jsx)(Me.Z.Password,{name:P,fieldProps:{size:"large",prefix:(0,n.jsx)(lr.Z,{className:"prefixIcon"}),strengthText:"\u5BC6\u7801\u5E94\u5305\u542B\u6570\u5B57\u3001\u5B57\u6BCD\u548C\u7279\u6B8A\u5B57\u7B26\uFF0C\u957F\u5EA6\u81F3\u5C11\u4E3A8\u4E2A\u5B57\u7B26",statusRender:function(A){var N=function(){return A&&A.length>12?"ok":A&&A.length>6?"pass":"poor"},K=N();return K==="pass"?(0,n.jsx)("div",{style:{color:ee.colorWarning},children:"\u5F3A\u5EA6\uFF1A\u4E2D"}):K==="ok"?(0,n.jsx)("div",{style:{color:ee.colorSuccess},children:"\u5F3A\u5EA6\uFF1A\u5F3A"}):(0,n.jsx)("div",{style:{color:ee.colorError},children:"\u5F3A\u5EA6\uFF1A\u5F31"})}},placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"}]})]}),J==="phone"&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Me.Z,{fieldProps:{size:"large",prefix:(0,n.jsx)(kr.Z,{className:"prefixIcon"})},name:j,placeholder:"\u624B\u673A\u53F7",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\uFF01"},{pattern:/^1\d{10}$/,message:"\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF\uFF01"}]}),(0,n.jsx)(nr.Z,{fieldProps:{size:"large",prefix:(0,n.jsx)(lr.Z,{className:"prefixIcon"})},captchaProps:{size:"large"},placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",captchaTextRender:function(A,N){return A?"".concat(N," ","\u83B7\u53D6\u9A8C\u8BC1\u7801"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"},phoneName:j,name:D,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01"}],onGetCaptcha:function(){var b=se()(W()().mark(function A(N){var K;return W()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:K={},K[j]=N,h(t,r()({},K),function(je){ne.ZP.success("\u9A8C\u8BC1\u7801\u5DF2\u53D1\u9001\uFF0C\u8BF7\u67E5\u770B\u624B\u673A\u77ED\u4FE1")});case 3:case"end":return M.stop()}},A)}));return function(A){return b.apply(this,arguments)}}()})]}),(0,n.jsxs)("div",{style:{marginBlockEnd:24},children:[(0,n.jsx)(zr.Z,{noStyle:!0,name:"autoLogin",children:"\u81EA\u52A8\u767B\u5F55"}),(0,n.jsx)("a",{style:{float:"right"},children:"\u5FD8\u8BB0\u5BC6\u7801"})]}),(0,n.jsx)(ge,{})]}))})},Jr=Wr,Gr=o(77646),Qr=function(e){var v=e.layoutType,h=v===void 0?"ModalForm":v,u=e.fieldProps,t=u===void 0?{}:u,i=e.url,m=e.ajax,d=m===void 0?pe:m,s=e.finishFun,p=s===void 0?function(){}:s,I=e.setMsg,j=I===void 0?function(T){return T.msg}:I,F=e.children,S=F===void 0?(0,n.jsx)(Fe.ZP,{children:"\u70B9\u51FB\u6211"}):F,y=e.detailUrl,P=e.detailSetData,C=e.isEdit,D=C===void 0?!1:C,Z=e.record,V=Z===void 0?{}:Z,O=B.useRef();return(0,n.jsx)(ar,{children:(0,n.jsx)(Gr.Z,r()(r()(r()({formRef:O,layoutType:h,request:function(){var T=se()(W()().mark(function U(E){var c;return W()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(c=E,!(y&&D)){w.next=4;break}return w.next=4,d(y,r()({},E),function(z){c=P(z)});case 4:return w.abrupt("return",c||{});case 5:case"end":return w.stop()}},U)}));return function(U){return T.apply(this,arguments)}}(),onFinish:se()(W()().mark(function T(){var U,E,c,a=arguments;return W()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return U=a.length>0&&a[0]!==void 0?a[0]:{},E=!1,c=r()(r()({},V),U),console.log(U),z.next=6,d(i,c,function(Y){ne.ZP.success(j(Y)),p(Y,c),E=!0});case 6:return z.abrupt("return",E);case 7:case"end":return z.stop()}},T)}))},t),h==="ModalForm"?{modalProps:{getContainer:document.getElementById("root")},onOpenChange:function(U){t!=null&&t.onOpenChange&&t.onOpenChange(U)}}:{drawerProps:{destroyOnClose:!0}}),{},{params:r()(r()({},V),(t==null?void 0:t.params)||{}),trigger:S,columns:er((t==null?void 0:t.columns)||[],d,D)}))})},ze=Qr,Xr=o(85418),Yr=o(57381),qr=o(17960),_r=o(16664),en=o(86548),rn=function(e){var v=e.title,h=v===void 0?"\u9009\u62E9":v,u=e.ajax,t=u===void 0?pe:u,i=e.url,m=i===void 0?null:i,d=e.params,s=d===void 0?function(X){return{}}:d,p=e.addUrl,I=e.editUrl,j=e.deleteUrl,F=e.deleteFields,S=F===void 0?"idList":F,y=e.deleteField,P=y===void 0?"id":y,C=e.deleteFieldIsArr,D=C===void 0?!1:C,Z=e.deleteParams,V=Z===void 0?{}:Z,O=e.addFormProFieldProps,T=O===void 0?{}:O,U=e.setData,E=U===void 0?function(X){return X.data}:U,c=e.setMsg,a=c===void 0?function(X){return X.msg}:c,w=e.editField,z=w===void 0?"id":w,Y=e.fieldProps,ge=Y===void 0?{fieldNames:{title:"title",key:"key",children:"children"}}:Y,oe=e.isSelect,Ze=oe===void 0?!1:oe,ee=e.detail,ye=ee===void 0?!0:ee,le=e.rowKey,J=le===void 0?"id":le,ce=e.isLoadData,ve=ce===void 0?!1:ce,fe=(0,B.useState)("loading"),b=_()(fe,2),A=b[0],N=b[1],K=ge.fieldNames,he=K===void 0?{title:"title",key:"key",children:"children"}:K,M={ajax:t,addUrl:p,editUrl:I,deleteUrl:j,deleteFields:S,deleteField:P,editField:z,deleteFieldIsArr:D,deleteParams:V,addFormProFieldProps:T};(0,B.useEffect)(function(){m?me({},r()({},s({}))):N([])},[]);var je=function(R){var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,ae=R;!D&&!q&&(ae=R[0]);var re=r()({},V);q?re[S]=ae:re[P]=ae,t(j,re,function(L){ne.ZP.success(a(L)),me({},r()({},s({})))})},me=function(R){var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t(m,r()(r()({},s(R)),q),function(ae){var re=E(ae);N(function(L){return R.key?we(L,R.key,re,he.key):re})})},xe=function(R){var q=R.children,ae=R.ajax,re=R.addUrl,L=R.record,Re=R.fieldProps,Ee=(0,B.useState)(z&&(L==null?void 0:L[J])),Be=_()(Ee,2),De=Be[0],Se=Be[1],Ce=re,Le={};return z&&L!==null&&L!==void 0&&L[J]&&(Le[z]=L==null?void 0:L[J],I&&(Ce=I)),(0,n.jsx)(ze,r()(r()({isEdit:De,finishFun:function(){me({},r()({},s({})))},ajax:ae,url:Ce},T),{},{fieldProps:r()(r()(r()({},T.fieldProps),Re),{},{onOpenChange:function(){Se(L?z&&(L==null?void 0:L[J]):!1)}}),record:r()(r()(r()({},L),Le),(T==null?void 0:T.record)||{}),children:q}))},Ae=function(R){return[{key:"1",label:(0,n.jsx)(xe,r()(r()({},M),{},{addUrl:p,record:r()(r()({},R),{},{id:R[J]}),fieldProps:{readonly:!0},children:(0,n.jsx)("a",{children:"\u8BE6\u60C5"})})),icon:(0,n.jsx)(_r.Z,{}),disabled:!ye},{key:"2",label:(0,n.jsx)(xe,r()(r()({},M),{},{addUrl:p,record:r()(r()({},R),{},{id:R[J]}),children:(0,n.jsx)("a",{children:"\u7F16\u8F91"})})),icon:(0,n.jsx)(en.Z,{}),disabled:!I},{key:"3",label:(0,n.jsx)(Xe.Z,{title:"\u5220\u9664",description:"\u786E\u5B9A\u5220\u9664\u8FD9\u6761\u6570\u636E\u5417\uFF1F",onConfirm:function(){je([R[J]])},okText:"\u662F",cancelText:"\u5426",children:(0,n.jsx)("a",{style:{color:"red"},children:"\u5220\u9664"})}),icon:(0,n.jsx)(Ge.Z,{}),disabled:!j}]},$e=function(R){return(0,n.jsx)(Xr.Z,{menu:{items:Ae(R)},getPopupContainer:function(){return document.body},trigger:["contextMenu"],children:(0,n.jsx)("span",{children:R[he.title]})})};return console.log("treeProps",M),(0,n.jsxs)("div",{className:"durians_tree_body",children:[(0,n.jsxs)("div",{className:"durians_tree_body_title",children:[(0,n.jsx)("div",{className:"durians_tree_body_title_l",children:h}),(0,n.jsx)("div",{className:"durians_tree_body_title_r",children:(0,n.jsx)(xe,r()(r()({},M),{},{children:(0,n.jsx)(Qe.Z,{})}))})]}),(0,n.jsx)("div",{className:"durians_tree_body_tree",children:A==="loading"&&m?(0,n.jsx)(Yr.Z,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:200}}):(0,n.jsx)(qr.Z,r()(r()({},ve?{loadData:me}:{}),{},{treeData:A,titleRender:$e},ge))})]})},ir=rn},42480:function(){},24654:function(){}}]);
