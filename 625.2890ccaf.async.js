(self.webpackChunkdurians=self.webpackChunkdurians||[]).push([[625],{87391:function(Ye,ae,n){"use strict";n.r(ae),n.d(ae,{FormPro:function(){return ve},LoginPro:function(){return Ge},ModalPro:function(){return de},TablePro:function(){return ze}});var he=n(15009),U=n.n(he),me=n(99289),Q=n.n(me),ge=n(97857),a=n.n(ge),xe=n(19632),W=n.n(xe),Fe=n(48689),ye=n(24969),je=n(61534),Pe=n(86738),Se=n(96074),Y=n(45360),oe=n(60940),se=n(42075),_=n(14726),N=n(67294),Ce=n(64599),le=n.n(Ce),$e=n(11238),Te=n(81354),b=n.n(Te),k=function(e,l,o){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,v="";return s&&(v="api"),$e.ZP.post(v+e,{data:l}).then(function(i){i.code==0?o(i):Y.ZP.error(i.msg)}).catch(function(i){console.log(i)})},Ae=function(e,l){var o=le()(e),s;try{var v=function(){var h=s.value,m=h.proConfig;h.request||(h.valueType==="select"||h.valueType==="treeSelect")&&(h.request=function(){var S=Q()(U()().mark(function A(j,C){var P;return U()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return P=[],d.next=3,l(m.url,a()(a()({},j),typeof m.params=="function"?m.params(j,C):m.params),function(c){P=m.setData(c)});case 3:return d.abrupt("return",P);case 4:case"end":return d.stop()}},A)}));return function(A,j){return S.apply(this,arguments)}}())};for(o.s();!(s=o.n()).done;)v()}catch(i){o.e(i)}finally{o.f()}return e},Re=function(e,l,o){var s=b().enc.Utf8.parse(l),v=b().enc.Utf8.parse(o);return b().AES.encrypt(e,s,{mode:b().mode.ECB,padding:b().pad.Pkcs7}).toString()},ke=function(e,l,o){var s=CryptoJS.enc.Utf8.parse(l),v=CryptoJS.enc.Utf8.parse(o);return CryptoJS.AES.decrypt(e,s,{mode:CryptoJS.mode.ECB,padding:CryptoJS.pad.Pkcs7})},ie=n(89451),Ze=n(5574),ee=n.n(Ze),Be=n(59847),Ie=n(54673),r=n(85893),Oe=function(e){var l=e.ajax,o=l===void 0?k:l,s=e.fieldProps,v=s.fieldNames,i=s.params,h=i===void 0?function(c){return{}}:i,m=s.url,S=s.setData,A=(0,N.useState)([]),j=ee()(A,2),C=j[0],P=j[1];(0,N.useEffect)(function(){d({},a()({},h({})))},[]);function D(c,y,R){var g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"value",Z=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"children",p=(0,Ie.Z)(c),K=le()(p),B;try{for(K.s();!(B=K.n()).done;){var $=B.value;$[g]===y?$.children=R:$.children&&($.children=D($.children,y,R,g,Z))}}catch(J){K.e(J)}finally{K.f()}return p}var d=function(y){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return o(m,a()({},h(y)),function(g){var Z=S(g);v&&(Z=Z.map(function(p){return p.label=p[v.label],p.value=p[v.value],p})),P(function(p){return y.value?D(p,y.value,Z):Z})})};return(0,r.jsx)(Be.Z,a()(a()({},e==null?void 0:e.fieldProps),{},{treeDataSimpleMode:!0,style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:"\u8BF7\u9009\u62E9",loadData:d,treeData:C}))},De=Oe,Ee=function(e){var l=e.children,o=(0,N.useContext)(ie.L_);return(0,r.jsx)(ie.L_.Provider,{value:a()(a()({},o),{},{valueTypeMap:{treeSelectPro:{renderFormItem:function(v,i){return(0,r.jsx)(De,a()({},i))}}}}),children:l})},ue=Ee,Le=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:"\u6807\u9898",dataIndex:"title",copyable:!0,ellipsis:!0,tooltip:"\u6807\u9898\u8FC7\u957F\u4F1A\u81EA\u52A8\u6536\u7F29",formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}}],Me=function(e){var l=e.ajax,o=l===void 0?k:l,s=e.url,v=s===void 0?"https://proapi.azurewebsites.net/github/issues":s,i=e.addUrl,h=e.editUrl,m=e.deleteUrl,S=e.deleteField,A=S===void 0?"idList":S,j=e.addFormProFieldProps,C=j===void 0?{}:j,P=e.actionWidth,D=P===void 0?100:P,d=e.fieldProps,c=d===void 0?{search:{},columns:Le}:d,y=e.setData,R=y===void 0?function(u){return u.data.records}:y,g=e.setTotal,Z=g===void 0?function(u){return u.data.total}:g,p=e.setMsg,K=p===void 0?function(u){return u.msg}:p,B=e.actionBar,$=B===void 0?[]:B,J=e.paginationAlias,X=J===void 0?{pageIndex:"pageIndex",pageSize:"pageSize"}:J,V=e.tableAlertOptionRenderPro,te=V===void 0?[]:V,w=(0,N.useRef)(),I=c.rowKey||"id",x=[].concat(W()(m?[function(u){var t=u.record;return(0,r.jsx)(M,{record:t,children:(0,r.jsx)("a",{children:"\u7F16\u8F91"})})}]:[]),W()($),W()(m?[function(u){var t=u.record;return(0,r.jsx)(Pe.Z,{title:"\u5220\u9664",description:"\u786E\u5B9A\u5220\u9664\u8FD9\u6761\u6570\u636E\u5417\uFF1F",onConfirm:function(){H([t[I]])},okText:"\u662F",cancelText:"\u5426",children:(0,r.jsx)("a",{style:{color:"red"},children:"\u5220\u9664"})})}]:[])),M=function(t){var f=t.children,F=t.record,O=i,T={};return F!=null&&F[I]&&h&&(T[I]=F==null?void 0:F[I],O=h),(0,r.jsx)(ve,a()(a()({ajax:o},C),{},{url:O,finishFun:function(){var q;(q=w.current)===null||q===void 0||q.reload()},fieldProps:a()({initialValues:F,columns:c.columns.map(function(E){return a()(a()({},E),{},{width:"md"})})},C.fieldProps),children:f}))},z=function(t,f){return(0,r.jsx)("div",{className:"durians_table_pro_action",children:x.map(function(F,O){return(0,r.jsxs)(N.Fragment,{children:[(0,r.jsx)(F,{record:f}),x.length>1&&O<x.length-1?(0,r.jsx)(Se.Z,{type:"vertical"}):null]},O)})})},H=function(t){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},F={};F[A]=t,o(m,F,function(O){var T;Y.ZP.success(K(O)),(T=w.current)===null||T===void 0||T.reload(),w.current.clearSelected(),f()})};return(0,r.jsx)(ue,{children:(0,r.jsx)(je.Z,a()(a()({defaultSize:"small",scroll:{x:"100%"},rowSelection:{selections:[oe.Z.SELECTION_ALL,oe.Z.SELECTION_INVERT]},tableAlertRender:function(t){var f=t.selectedRowKeys,F=t.selectedRows,O=t.onCleanSelected;return console.log(f,F),(0,r.jsx)(se.Z,{size:24,children:(0,r.jsxs)("span",{children:["\u5DF2\u9009 ",f.length," \u9879",(0,r.jsx)("a",{style:{marginInlineStart:8},onClick:O,children:"\u53D6\u6D88\u9009\u62E9"})]})})},tableAlertOptionRender:function(t){var f=t.selectedRowKeys,F=t.selectedRows,O=t.onCleanSelected;return(0,r.jsxs)(se.Z,{size:16,children:[m?(0,r.jsx)(de,{title:"\u662F\u5426\u786E\u5B9A\u5220\u9664\uFF1F",Content:function(){return"\u786E\u5B9A\u5220\u9664\uFF1F"},handleOk:function(E){H(f,function(){E()})},children:(0,r.jsx)(_.ZP,{size:"small",icon:(0,r.jsx)(Fe.Z,{}),danger:!0,children:"\u6279\u91CF\u5220\u9664"},"danger")}):null,te.map(function(T,E){return(0,r.jsx)(T,{selectedRowKeys:f,selectedRows:F,onCleanSelected:O},E)})]})},actionRef:w,request:function(){var u=Q()(U()().mark(function t(f,F,O){var T,E;return U()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:if(T=c.dataSource,E={},E[X.pageIndex]=f.current,E[X.pageSize]=f.pageSize,console.log(777,F,f,O,E),!v){G.next=8;break}return G.next=8,o(v,a()(a()({},E),f),function(pe){console.log(pe),T=pe});case 8:return G.abrupt("return",Promise.resolve({data:R(T),success:!0,total:Z(T)}));case 9:case"end":return G.stop()}},t)}));return function(t,f,F){return u.apply(this,arguments)}}(),editable:{type:"multiple"},columnsState:{persistenceKey:"pro-table-singe-demos",persistenceType:"localStorage",defaultValue:{option:{fixed:"right",disable:!0}},onChange:function(t){console.log("value: ",t)}},rowKey:"id",options:{setting:{listsHeight:400}},form:{syncToUrl:!1},pagination:{pageSize:10,onChange:function(t){return console.log(t)}},dateFormatter:"string"},c),{},{columns:[].concat(W()(Ae(c.columns,o)),W()(x.length?[{title:"\u64CD\u4F5C",dataIndex:"actionTablePro",fixed:"right",hideInSearch:!0,actionWidth:D,render:z}]:[])),search:c.search?a()({labelWidth:"auto",span:4,defaultCollapsed:!1},c.search||{}):{labelWidth:"auto"},toolBarRender:function(){return[].concat(W()(i?[(0,r.jsx)(M,{children:(0,r.jsx)(_.ZP,{icon:(0,r.jsx)(ye.Z,{}),type:"primary",children:"\u65B0\u5EFA"},"button")})]:[]),W()(c.toolBarRender||[]))}}))})},ze=Me,Ue=n(85576),be=function(e){var l=e.title,o=l===void 0?"\u57FA\u7840":l,s=e.handleOk,v=s===void 0?function(g){g()}:s,i=e.Content,h=i===void 0?function(){return(0,r.jsx)("div",{children:"\u793A\u4F8B"})}:i,m=e.children,S=m===void 0?(0,r.jsx)("div",{children:"\u70B9\u51FB"}):m,A=e.fieldProps,j=A===void 0?{}:A,C=(0,N.useState)(!1),P=ee()(C,2),D=P[0],d=P[1],c=function(){d(!0)},y=function(){v(function(){d(!1)})},R=function(){d(!1)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{onClick:c,children:S}),(0,r.jsx)(Ue.Z,a()(a()({title:o,open:D,onOk:y,onCancel:R},j),{},{children:(0,r.jsx)(h,{isModalOpen:D,setIsModalOpen:d})}))]})},de=be,Ke=n(87547),ce=n(94149),Ne=n(24454),He=n(68262),re=n(5966),We=n(16434),we=n(63434),Je=n(9361),ne=n(56140),fe=n(99191),qe=(0,fe.df)([{id:"SHA256",fun:function(e){return b().SHA256(e).toString(b().enc.Base64)}},{id:"MD5",fun:function(e){return b().MD5(e).toString(b().enc.Hex)}}]),Ve=function(e){var l=e.ajax,o=l===void 0?k:l,s=e.url,v=e.captchaUrl,i=e.loginFormFieldProps,h=e.hasSmsLogin,m=h===void 0?!1:h,S=e.hasAccountLogin,A=S===void 0?!0:S,j=e.phoneField,C=j===void 0?"mobile":j,P=e.extraPasswordText,D=P===void 0?"":P,d=e.secretKey,c=d===void 0?"":d,y=e.setData,R=y===void 0?function(I){return I.data}:y,g=e.tokenField,Z=g===void 0?"token":g,p=e.callback,K=p===void 0?function(){}:p,B=Je.Z.useToken(),$=B.token,J=(0,N.useState)("account"),X=ee()(J,2),V=X[0],te=X[1],w=(0,N.useRef)();return(0,r.jsx)("div",{style:{backgroundColor:$.colorBgContainer},className:"crm_login_body",children:(0,r.jsxs)(He.U,a()(a()({formRef:w,title:"\u767B\u5F55",subTitle:"\u6B22\u8FCE\u767B\u5F55\u7CFB\u7EDF",initialValues:{username:"",password:""},onFinish:function(){var I=Q()(U()().mark(function x(M){var z,H;return U()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.current.validateFields();case 2:return z=t.sent,z&&(H=a()({},M),H.password=Re(M.password+D,c,c),o(s,H,function(f){(0,fe.KN)(Z,R(f.data)),K(f)},!1)),t.abrupt("return",!0);case 5:case"end":return t.stop()}},x)}));return function(x){return I.apply(this,arguments)}}()},i),{},{children:[(0,r.jsxs)(ne.Z,{centered:!0,activeKey:V,onChange:function(x){return te(x)},children:[(0,r.jsx)(ne.Z.TabPane,{tab:"\u8D26\u53F7\u5BC6\u7801\u767B\u5F55",disabled:!A},"account"),(0,r.jsx)(ne.Z.TabPane,{tab:"\u624B\u673A\u53F7\u767B\u5F55",disabled:!m},"phone")]}),V==="account"&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(re.Z,{name:"username",fieldProps:{size:"large",prefix:(0,r.jsx)(Ke.Z,{className:"prefixIcon"})},placeholder:"\u7528\u6237\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"}]}),(0,r.jsx)(re.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,r.jsx)(ce.Z,{className:"prefixIcon"}),strengthText:"\u5BC6\u7801\u5E94\u5305\u542B\u6570\u5B57\u3001\u5B57\u6BCD\u548C\u7279\u6B8A\u5B57\u7B26\uFF0C\u957F\u5EA6\u81F3\u5C11\u4E3A8\u4E2A\u5B57\u7B26",statusRender:function(x){var M=function(){return x&&x.length>12?"ok":x&&x.length>6?"pass":"poor"},z=M();return z==="pass"?(0,r.jsx)("div",{style:{color:$.colorWarning},children:"\u5F3A\u5EA6\uFF1A\u4E2D"}):z==="ok"?(0,r.jsx)("div",{style:{color:$.colorSuccess},children:"\u5F3A\u5EA6\uFF1A\u5F3A"}):(0,r.jsx)("div",{style:{color:$.colorError},children:"\u5F3A\u5EA6\uFF1A\u5F31"})}},placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"}]})]}),V==="phone"&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(re.Z,{fieldProps:{size:"large",prefix:(0,r.jsx)(Ne.Z,{className:"prefixIcon"})},name:C,placeholder:"\u624B\u673A\u53F7",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\uFF01"},{pattern:/^1\d{10}$/,message:"\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF\uFF01"}]}),(0,r.jsx)(We.Z,{fieldProps:{size:"large",prefix:(0,r.jsx)(ce.Z,{className:"prefixIcon"})},captchaProps:{size:"large"},placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",captchaTextRender:function(x,M){return x?"".concat(M," ","\u83B7\u53D6\u9A8C\u8BC1\u7801"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"},phoneName:C,name:"captcha",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01"}],onGetCaptcha:function(){var I=Q()(U()().mark(function x(M){var z;return U()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:z={},z[C]=M,o(v,a()({},z),function(t){Y.ZP.success("\u9A8C\u8BC1\u7801\u5DF2\u53D1\u9001\uFF0C\u8BF7\u67E5\u770B\u624B\u673A\u77ED\u4FE1")});case 3:case"end":return u.stop()}},x)}));return function(x){return I.apply(this,arguments)}}()})]}),(0,r.jsxs)("div",{style:{marginBlockEnd:24},children:[(0,r.jsx)(we.Z,{noStyle:!0,name:"autoLogin",children:"\u81EA\u52A8\u767B\u5F55"}),(0,r.jsx)("a",{style:{float:"right"},children:"\u5FD8\u8BB0\u5BC6\u7801"})]})]}))})},Ge=Ve,Qe=n(77646),Xe=function(e){var l=e.params,o=l===void 0?{}:l,s=e.layoutType,v=s===void 0?"ModalForm":s,i=e.fieldProps,h=i===void 0?{}:i,m=e.url,S=e.ajax,A=S===void 0?k:S,j=e.finishFun,C=j===void 0?function(){}:j,P=e.setMsg,D=P===void 0?function(y){return y.msg}:P,d=e.children,c=d===void 0?(0,r.jsx)(_.ZP,{children:"\u70B9\u51FB\u6211"}):d;return console.log(777888,h),(0,r.jsx)(ue,{children:(0,r.jsx)(Qe.Z,a()(a()({trigger:c,layoutType:"ModalForm",onFinish:Q()(U()().mark(function y(){var R,g,Z,p=arguments;return U()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return R=p.length>0&&p[0]!==void 0?p[0]:{},g=!1,Z=a()(a()({},o),R),console.log(R),B.next=6,A(m,Z,function($){Y.ZP.success(D($)),C(),g=!0});case 6:return B.abrupt("return",g);case 7:case"end":return B.stop()}},y)}))},v==="ModalForm"?{modalProps:{destroyOnClose:!0}}:{drawerProps:{destroyOnClose:!0}}),{},{columns:[{title:"\u6807\u9898",dataIndex:"title",formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]},width:"md"}]},h))})},ve=Xe},42480:function(){},24654:function(){}}]);
