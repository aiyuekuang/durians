(self.webpackChunkdurians=self.webpackChunkdurians||[]).push([[40],{95150:function(We,ne,n){"use strict";n.r(ne),n.d(ne,{FormPro:function(){return Ue},LoginPro:function(){return be},ModalPro:function(){return se},TablePro:function(){return Ae}});var fe=n(15009),S=n.n(fe),he=n(99289),N=n.n(he),ve=n(97857),i=n.n(ve),pe=n(19632),M=n.n(pe),ge=n(48689),me=n(24969),re=n(22530),xe=n(79050),Fe=n(86738),K=n(45360),je=n(96074),te=n(62120),ae=n(42075),Y=n(14726),W=n(67294),ye=n(11238),k=function(r,h,v){var g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,j="";return g&&(j="api"),ye.ZP.post(j+r,{data:h}).then(function(d){d.code==0?v(d):K.ZP.error(d.msg)}).catch(function(d){console.log(d)})},e=n(85893),Pe=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:"\u6807\u9898",dataIndex:"title",copyable:!0,ellipsis:!0,tooltip:"\u6807\u9898\u8FC7\u957F\u4F1A\u81EA\u52A8\u6536\u7F29",formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}}],Ce=function(r){var h=r.ajax,v=h===void 0?k:h,g=r.url,j=g===void 0?"https://proapi.azurewebsites.net/github/issues":g,d=r.addUrl,T=r.editUrl,y=r.deleteUrl,$=r.deleteField,E=$===void 0?"idList":$,R=r.addFieldProps,I=R===void 0?{}:R,P=r.actionWidth,m=P===void 0?100:P,x=r.fieldProps,c=x===void 0?{search:{},columns:Pe}:x,p=r.setData,z=p===void 0?function(a){return a.data.records}:p,Z=r.setTotal,L=Z===void 0?function(a){return a.data.total}:Z,l=r.setMsg,C=l===void 0?function(a){return a.msg}:l,F=r.actionBar,b=F===void 0?[]:F,D=r.paginationAlias,B=D===void 0?{pageIndex:"pageIndex",pageSize:"pageSize"}:D,V=r.tableAlertOptionRenderPro,ue=V===void 0?[]:V,G=(0,W.useRef)(),J=c.rowKey||"id",Q=[].concat(M()(y?[function(a){var t=a.record;return(0,e.jsx)(de,{record:t,children:(0,e.jsx)("a",{children:"\u7F16\u8F91"})})}]:[]),M()(b),M()(y?[function(a){var t=a.record;return(0,e.jsx)(Fe.Z,{title:"\u5220\u9664",description:"\u786E\u5B9A\u5220\u9664\u8FD9\u6761\u6570\u636E\u5417\uFF1F",onConfirm:function(){ce([t[J]])},okText:"\u662F",cancelText:"\u5426",children:(0,e.jsx)("a",{style:{color:"red"},children:"\u5220\u9664"})})}]:[])),de=function(t){var s=t.children,o=t.record;return(0,e.jsx)(re.Z,i()({initialValues:o,columns:c.columns.map(function(f){return i()(i()({},f),{},{width:"md"})}),trigger:s,onFinish:function(){var f=N()(S()().mark(function u(A){var X,O,U;return S()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return X=!1,O=d,U=A,o!=null&&o[J]&&T&&(U[J]=o==null?void 0:o[J],O=T),w.next=6,v(O,U,function(Ke){var ee;(ee=G.current)===null||ee===void 0||ee.reload(),K.ZP.success(C(Ke)),X=!0});case 6:return w.abrupt("return",X);case 7:case"end":return w.stop()}},u)}));return function(u){return f.apply(this,arguments)}}(),layoutType:"ModalForm",rowProps:{gutter:[16,16]},colProps:{span:12},grid:!0},I))},Ne=function(t,s){return(0,e.jsx)("div",{className:"durians_table_pro_action",children:Q.map(function(o,f){return(0,e.jsxs)(W.Fragment,{children:[(0,e.jsx)(o,{record:s}),Q.length>1&&f<Q.length-1?(0,e.jsx)(je.Z,{type:"vertical"}):null]},f)})})},ce=function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},o={};o[E]=t,v(y,o,function(f){var u;K.ZP.success(C(f)),(u=G.current)===null||u===void 0||u.reload(),G.current.clearSelected(),s()})};return(0,e.jsx)(xe.Z,i()(i()({defaultSize:"small",scroll:{x:"100%"},rowSelection:{selections:[te.Z.SELECTION_ALL,te.Z.SELECTION_INVERT]},tableAlertRender:function(t){var s=t.selectedRowKeys,o=t.selectedRows,f=t.onCleanSelected;return console.log(s,o),(0,e.jsx)(ae.Z,{size:24,children:(0,e.jsxs)("span",{children:["\u5DF2\u9009 ",s.length," \u9879",(0,e.jsx)("a",{style:{marginInlineStart:8},onClick:f,children:"\u53D6\u6D88\u9009\u62E9"})]})})},tableAlertOptionRender:function(t){var s=t.selectedRowKeys,o=t.selectedRows,f=t.onCleanSelected;return console.log(5555,ue),(0,e.jsxs)(ae.Z,{size:16,children:[y?(0,e.jsx)(se,{title:"\u662F\u5426\u786E\u5B9A\u5220\u9664\uFF1F",Content:function(){return"\u786E\u5B9A\u5220\u9664\uFF1F"},handleOk:function(A){ce(s,function(){A()})},children:(0,e.jsx)(Y.ZP,{size:"small",icon:(0,e.jsx)(ge.Z,{}),danger:!0,children:"\u6279\u91CF\u5220\u9664"},"danger")}):null,ue.map(function(u,A){return console.log(222,u),(0,e.jsx)(u,{selectedRowKeys:s,selectedRows:o,onCleanSelected:f},A)})]})},actionRef:G,request:function(){var a=N()(S()().mark(function t(s,o,f){var u,A;return S()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(u=c.dataSource,A={},A[B.pageIndex]=s.current,A[B.pageSize]=s.pageSize,console.log(777,v,o,s,f,A),!j){O.next=8;break}return O.next=8,v(j,i()(i()({},A),s),function(U){console.log(U),u=U});case 8:return O.abrupt("return",Promise.resolve({data:z(u),success:!0,total:L(u)}));case 9:case"end":return O.stop()}},t)}));return function(t,s,o){return a.apply(this,arguments)}}(),editable:{type:"multiple"},columnsState:{persistenceKey:"pro-table-singe-demos",persistenceType:"localStorage",defaultValue:{option:{fixed:"right",disable:!0}},onChange:function(t){console.log("value: ",t)}},rowKey:"id",options:{setting:{listsHeight:400}},form:{syncToUrl:!1},pagination:{pageSize:10,onChange:function(t){return console.log(t)}},dateFormatter:"string"},c),{},{columns:[].concat(M()(c.columns),M()(Q.length?[{title:"\u64CD\u4F5C",dataIndex:"actionTablePro",fixed:"right",actionWidth:m,render:Ne}]:[])),search:c.search?i()({labelWidth:"auto",span:4,defaultCollapsed:!1},c.search||{}):{labelWidth:"auto"},toolBarRender:function(){return[].concat(M()(d?[(0,e.jsx)(de,{children:(0,e.jsx)(Y.ZP,{icon:(0,e.jsx)(me.Z,{}),type:"primary",children:"\u65B0\u5EFA"},"button")})]:[]),M()(c.toolBarRender||[]))}}))},Ae=Ce,Se=n(5574),oe=n.n(Se),Te=n(85576),$e=function(r){var h=r.title,v=h===void 0?"\u57FA\u7840":h,g=r.handleOk,j=g===void 0?function(Z){Z()}:g,d=r.Content,T=d===void 0?function(){return(0,e.jsx)("div",{children:"\u793A\u4F8B"})}:d,y=r.children,$=y===void 0?(0,e.jsx)("div",{children:"\u70B9\u51FB"}):y,E=r.fieldProps,R=E===void 0?{}:E,I=(0,W.useState)(!1),P=oe()(I,2),m=P[0],x=P[1],c=function(){x(!0)},p=function(){j(function(){x(!1)})},z=function(){x(!1)};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{onClick:c,children:$}),(0,e.jsx)(Te.Z,i()(i()({title:v,open:m,onOk:p,onCancel:z},R),{},{children:(0,e.jsx)(T,{isModalOpen:m,setIsModalOpen:x})}))]})},se=$e,Re=n(87547),le=n(94149),Ze=n(24454),Be=n(68262),q=n(5966),Oe=n(16434),Ie=n(63434),Ee=n(9361),_=n(56140),Le=n(81354),ie=n.n(Le),Me=n(62291),ze=function(r){var h=r.ajax,v=h===void 0?k:h,g=r.url,j=r.captchaUrl,d=r.loginFormFieldProps,T=r.hasSmsLogin,y=T===void 0?!1:T,$=r.hasAccountLogin,E=$===void 0?!0:$,R=r.phoneField,I=R===void 0?"mobile":R,P=Ee.Z.useToken(),m=P.token,x=(0,W.useState)("account"),c=oe()(x,2),p=c[0],z=c[1],Z=(0,W.useRef)();return(0,e.jsx)("div",{style:{backgroundColor:m.colorBgContainer},className:"crm_login_body",children:(0,e.jsxs)(Be.U,i()(i()({formRef:Z,title:"\u767B\u5F55",subTitle:"\u6B22\u8FCE\u767B\u5F55\u7CFB\u7EDF",initialValues:{username:"",password:""},onFinish:function(){var L=N()(S()().mark(function l(C){var F,b;return S()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,Z.current.validateFields();case 2:return F=B.sent,F&&(b=i()({},C),b.password=ie().SHA256(C.password).toString(ie().enc.Base64),v(g,b,function(V){(0,Me.ok)("token",V.data)},!1)),B.abrupt("return",!0);case 5:case"end":return B.stop()}},l)}));return function(l){return L.apply(this,arguments)}}()},d),{},{children:[(0,e.jsxs)(_.Z,{centered:!0,activeKey:p,onChange:function(l){return z(l)},children:[(0,e.jsx)(_.Z.TabPane,{tab:"\u8D26\u53F7\u5BC6\u7801\u767B\u5F55",disabled:!E},"account"),(0,e.jsx)(_.Z.TabPane,{tab:"\u624B\u673A\u53F7\u767B\u5F55",disabled:!y},"phone")]}),p==="account"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(q.Z,{name:"username",fieldProps:{size:"large",prefix:(0,e.jsx)(Re.Z,{className:"prefixIcon"})},placeholder:"\u7528\u6237\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"}]}),(0,e.jsx)(q.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,e.jsx)(le.Z,{className:"prefixIcon"}),strengthText:"\u5BC6\u7801\u5E94\u5305\u542B\u6570\u5B57\u3001\u5B57\u6BCD\u548C\u7279\u6B8A\u5B57\u7B26\uFF0C\u957F\u5EA6\u81F3\u5C11\u4E3A8\u4E2A\u5B57\u7B26",statusRender:function(l){var C=function(){return l&&l.length>12?"ok":l&&l.length>6?"pass":"poor"},F=C();return F==="pass"?(0,e.jsx)("div",{style:{color:m.colorWarning},children:"\u5F3A\u5EA6\uFF1A\u4E2D"}):F==="ok"?(0,e.jsx)("div",{style:{color:m.colorSuccess},children:"\u5F3A\u5EA6\uFF1A\u5F3A"}):(0,e.jsx)("div",{style:{color:m.colorError},children:"\u5F3A\u5EA6\uFF1A\u5F31"})}},placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"}]})]}),p==="phone"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(q.Z,{fieldProps:{size:"large",prefix:(0,e.jsx)(Ze.Z,{className:"prefixIcon"})},name:I,placeholder:"\u624B\u673A\u53F7",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\uFF01"},{pattern:/^1\d{10}$/,message:"\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF\uFF01"}]}),(0,e.jsx)(Oe.Z,{fieldProps:{size:"large",prefix:(0,e.jsx)(le.Z,{className:"prefixIcon"})},captchaProps:{size:"large"},placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",captchaTextRender:function(l,C){return l?"".concat(C," ","\u83B7\u53D6\u9A8C\u8BC1\u7801"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"},phoneName:I,name:"captcha",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01"}],onGetCaptcha:function(){var L=N()(S()().mark(function l(C){var F;return S()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:F={},F[I]=C,v(j,i()({},F),function(B){K.ZP.success("\u9A8C\u8BC1\u7801\u5DF2\u53D1\u9001\uFF0C\u8BF7\u67E5\u770B\u624B\u673A\u77ED\u4FE1")});case 3:case"end":return D.stop()}},l)}));return function(l){return L.apply(this,arguments)}}()})]}),(0,e.jsxs)("div",{style:{marginBlockEnd:24},children:[(0,e.jsx)(Ie.Z,{noStyle:!0,name:"autoLogin",children:"\u81EA\u52A8\u767B\u5F55"}),(0,e.jsx)("a",{style:{float:"right"},children:"\u5FD8\u8BB0\u5BC6\u7801"})]})]}))})},be=ze,De=function(r){var h=r.layoutType,v=h===void 0?"ModalForm":h,g=r.fieldProps,j=g===void 0?{}:g,d=r.url,T=r.ajax,y=T===void 0?k:T,$=r.finishFun,E=$===void 0?function(){}:$,R=r.setMsg,I=R===void 0?function(P){return P.msg}:R;return(0,e.jsx)(re.Z,i()(i()({trigger:(0,e.jsx)(Y.ZP,{children:"\u70B9\u51FB\u6211"}),layoutType:"ModalForm",onFinish:function(){var P=N()(S()().mark(function m(x){return S()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return console.log(x),p.next=3,y(d,x,function(z){K.ZP.success(I(z)),E()});case 3:case"end":return p.stop()}},m)}));return function(m){return P.apply(this,arguments)}}()},v==="ModalForm"?{modalProps:{destroyOnClose:!0}}:{drawerProps:{destroyOnClose:!0}}),{},{columns:[{title:"\u6807\u9898",dataIndex:"title",formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]},width:"md"}]},j))},Ue=De},42480:function(){},24654:function(){}}]);
