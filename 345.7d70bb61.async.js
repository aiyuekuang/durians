(self.webpackChunkdurians=self.webpackChunkdurians||[]).push([[345],{51660:function(Ne,_,n){"use strict";n.r(_),n.d(_,{LoginPro:function(){return be},ModalPro:function(){return oe},TablePro:function(){return Ce}});var de=n(15009),T=n.n(de),ce=n(99289),W=n.n(ce),fe=n(97857),u=n.n(fe),he=n(19632),$=n.n(he),ve=n(48689),pe=n(24969),ge=n(22530),me=n(79050),xe=n(86738),H=n(45360),je=n(96074),ee=n(62120),ne=n(42075),te=n(14726),U=n(67294),Fe=n(11238),re=function(t,g,v){var P=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,y="";return P&&(y="api"),Fe.ZP.post(y+t,{data:g}).then(function(c){c.code==0?v(c):H.ZP.error(c.msg)}).catch(function(c){console.log(c)})},e=n(85893),Pe=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:"\u6807\u9898",dataIndex:"title",copyable:!0,ellipsis:!0,tooltip:"\u6807\u9898\u8FC7\u957F\u4F1A\u81EA\u52A8\u6536\u7F29",formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}}],ye=function(t){var g=t.ajax,v=g===void 0?re:g,P=t.url,y=P===void 0?"https://proapi.azurewebsites.net/github/issues":P,c=t.addUrl,B=t.editUrl,C=t.deleteUrl,O=t.deleteField,M=O===void 0?"idList":O,E=t.addFieldProps,L=E===void 0?{}:E,I=t.actionWidth,A=I===void 0?100:I,S=t.fieldProps,f=S===void 0?{search:{},columns:Pe}:S,R=t.setData,N=R===void 0?function(a){return a.data.records}:R,m=t.setTotal,Z=m===void 0?function(a){return a.data.total}:m,l=t.setMsg,p=l===void 0?function(a){return a.msg}:l,h=t.actionBar,z=h===void 0?[]:h,b=t.paginationAlias,x=b===void 0?{pageIndex:"pageIndex",pageSize:"pageSize"}:b,V=t.tableAlertOptionRenderPro,Me=V===void 0?[]:V,G=(0,U.useRef)(),J=f.rowKey||"id",Q=[].concat($()(C?[function(a){var r=a.record;return(0,e.jsx)(ie,{record:r,children:(0,e.jsx)("a",{children:"\u7F16\u8F91"})})}]:[]),$()(z),$()(C?[function(a){var r=a.record;return(0,e.jsx)(xe.Z,{title:"\u5220\u9664",description:"\u786E\u5B9A\u5220\u9664\u8FD9\u6761\u6570\u636E\u5417\uFF1F",onConfirm:function(){ue([r[J]])},okText:"\u662F",cancelText:"\u5426",children:(0,e.jsx)("a",{style:{color:"red"},children:"\u5220\u9664"})})}]:[])),ie=function(r){var s=r.children,o=r.record;return(0,e.jsx)(ge.Z,u()({initialValues:o,columns:f.columns.map(function(d){return u()(u()({},d),{},{width:"md"})}),trigger:s,onFinish:function(){var d=W()(T()().mark(function i(j){var X,F,D;return T()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return X=!1,F=c,D=j,o!=null&&o[J]&&B&&(D[J]=o==null?void 0:o[J],F=B),K.next=6,v(F,D,function(Ue){var q;(q=G.current)===null||q===void 0||q.reload(),H.ZP.success(p(Ue)),X=!0});case 6:return K.abrupt("return",X);case 7:case"end":return K.stop()}},i)}));return function(i){return d.apply(this,arguments)}}(),layoutType:"ModalForm",rowProps:{gutter:[16,16]},colProps:{span:12},grid:!0},L))},De=function(r,s){return(0,e.jsx)("div",{className:"durians_table_pro_action",children:Q.map(function(o,d){return(0,e.jsxs)(U.Fragment,{children:[(0,e.jsx)(o,{record:s}),Q.length>1&&d<Q.length-1?(0,e.jsx)(je.Z,{type:"vertical"}):null]},d)})})},ue=function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},o={};o[M]=r,v(C,o,function(d){var i;H.ZP.success(p(d)),(i=G.current)===null||i===void 0||i.reload(),G.current.clearSelected(),s()})};return(0,e.jsx)(me.Z,u()(u()({defaultSize:"small",scroll:{x:"100%"},rowSelection:{selections:[ee.Z.SELECTION_ALL,ee.Z.SELECTION_INVERT]},tableAlertRender:function(r){var s=r.selectedRowKeys,o=r.selectedRows,d=r.onCleanSelected;return console.log(s,o),(0,e.jsx)(ne.Z,{size:24,children:(0,e.jsxs)("span",{children:["\u5DF2\u9009 ",s.length," \u9879",(0,e.jsx)("a",{style:{marginInlineStart:8},onClick:d,children:"\u53D6\u6D88\u9009\u62E9"})]})})},tableAlertOptionRender:function(r){var s=r.selectedRowKeys,o=r.selectedRows,d=r.onCleanSelected;return(0,e.jsxs)(ne.Z,{size:16,children:[C?(0,e.jsx)(oe,{title:"\u662F\u5426\u786E\u5B9A\u5220\u9664\uFF1F",Content:function(){return"\u786E\u5B9A\u5220\u9664\uFF1F"},handleOk:function(j){ue(s,function(){j()})},children:(0,e.jsx)(te.ZP,{size:"small",icon:(0,e.jsx)(ve.Z,{}),danger:!0,children:"\u6279\u91CF\u5220\u9664"},"danger")}):null,Me.map(function(i,j){return i(s,o,d)})]})},actionRef:G,request:function(){var a=W()(T()().mark(function r(s,o,d){var i,j;return T()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(i=f.dataSource,j={},j[x.pageIndex]=s.current,j[x.pageSize]=s.pageSize,console.log(777,v,o,s,d,j),!y){F.next=8;break}return F.next=8,v(y,u()(u()({},j),s),function(D){console.log(D),i=D});case 8:return F.abrupt("return",Promise.resolve({data:N(i),success:!0,total:Z(i)}));case 9:case"end":return F.stop()}},r)}));return function(r,s,o){return a.apply(this,arguments)}}(),editable:{type:"multiple"},columnsState:{persistenceKey:"pro-table-singe-demos",persistenceType:"localStorage",defaultValue:{option:{fixed:"right",disable:!0}},onChange:function(r){console.log("value: ",r)}},rowKey:"id",options:{setting:{listsHeight:400}},form:{syncToUrl:!1},pagination:{pageSize:10,onChange:function(r){return console.log(r)}},dateFormatter:"string"},f),{},{columns:[].concat($()(f.columns),$()(Q.length?[{title:"\u64CD\u4F5C",dataIndex:"actionTablePro",fixed:"right",actionWidth:A,render:De}]:[])),search:f.search?u()({labelWidth:"auto",span:4,defaultCollapsed:!1},f.search||{}):{labelWidth:"auto"},toolBarRender:function(){return[].concat($()(c?[(0,e.jsx)(ie,{children:(0,e.jsx)(te.ZP,{icon:(0,e.jsx)(pe.Z,{}),type:"primary",children:"\u65B0\u5EFA"},"button")})]:[]),$()(f.toolBarRender||[]))}}))},Ce=ye,Ae=n(5574),ae=n.n(Ae),Se=n(85576),Te=function(t){var g=t.title,v=g===void 0?"\u57FA\u7840":g,P=t.handleOk,y=P===void 0?function(m){m()}:P,c=t.Content,B=c===void 0?function(){return(0,e.jsx)("div",{children:"\u793A\u4F8B"})}:c,C=t.children,O=C===void 0?(0,e.jsx)("div",{children:"\u70B9\u51FB"}):C,M=t.fieldProps,E=M===void 0?{}:M,L=(0,U.useState)(!1),I=ae()(L,2),A=I[0],S=I[1],f=function(){S(!0)},R=function(){y(function(){S(!1)})},N=function(){S(!1)};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{onClick:f,children:O}),(0,e.jsx)(Se.Z,u()(u()({title:v,open:A,onOk:R,onCancel:N},E),{},{children:(0,e.jsx)(B,{isModalOpen:A,setIsModalOpen:S})}))]})},oe=Te,Re=n(87547),se=n(94149),Ze=n(24454),$e=n(68262),Y=n(5966),Be=n(16434),Oe=n(63434),Ee=n(9361),w=n(56140),Le=n(81354),le=n.n(Le),Ie=n(62291),ze=function(t){var g=t.ajax,v=g===void 0?re:g,P=t.url,y=t.captchaUrl,c=t.loginFormFieldProps,B=t.hasSmsLogin,C=B===void 0?!1:B,O=t.hasAccountLogin,M=O===void 0?!0:O,E=t.phoneField,L=E===void 0?"mobile":E,I=Ee.Z.useToken(),A=I.token,S=(0,U.useState)("account"),f=ae()(S,2),R=f[0],N=f[1],m=(0,U.useRef)();return(0,e.jsx)("div",{style:{backgroundColor:A.colorBgContainer},className:"crm_login_body",children:(0,e.jsxs)($e.U,u()(u()({formRef:m,title:"\u767B\u5F55",subTitle:"\u6B22\u8FCE\u767B\u5F55\u7CFB\u7EDF",initialValues:{username:"",password:""},onFinish:function(){var Z=W()(T()().mark(function l(p){var h,z;return T()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,m.current.validateFields();case 2:return h=x.sent,h&&(z=u()({},p),z.password=le().SHA256(p.password).toString(le().enc.Base64),v(P,z,function(V){(0,Ie.ok)("token",V.data)},!1)),x.abrupt("return",!0);case 5:case"end":return x.stop()}},l)}));return function(l){return Z.apply(this,arguments)}}()},c),{},{children:[(0,e.jsxs)(w.Z,{centered:!0,activeKey:R,onChange:function(l){return N(l)},children:[(0,e.jsx)(w.Z.TabPane,{tab:"\u8D26\u53F7\u5BC6\u7801\u767B\u5F55",disabled:!M},"account"),(0,e.jsx)(w.Z.TabPane,{tab:"\u624B\u673A\u53F7\u767B\u5F55",disabled:!C},"phone")]}),R==="account"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Y.Z,{name:"username",fieldProps:{size:"large",prefix:(0,e.jsx)(Re.Z,{className:"prefixIcon"})},placeholder:"\u7528\u6237\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"}]}),(0,e.jsx)(Y.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,e.jsx)(se.Z,{className:"prefixIcon"}),strengthText:"\u5BC6\u7801\u5E94\u5305\u542B\u6570\u5B57\u3001\u5B57\u6BCD\u548C\u7279\u6B8A\u5B57\u7B26\uFF0C\u957F\u5EA6\u81F3\u5C11\u4E3A8\u4E2A\u5B57\u7B26",statusRender:function(l){var p=function(){return l&&l.length>12?"ok":l&&l.length>6?"pass":"poor"},h=p();return h==="pass"?(0,e.jsx)("div",{style:{color:A.colorWarning},children:"\u5F3A\u5EA6\uFF1A\u4E2D"}):h==="ok"?(0,e.jsx)("div",{style:{color:A.colorSuccess},children:"\u5F3A\u5EA6\uFF1A\u5F3A"}):(0,e.jsx)("div",{style:{color:A.colorError},children:"\u5F3A\u5EA6\uFF1A\u5F31"})}},placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"}]})]}),R==="phone"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Y.Z,{fieldProps:{size:"large",prefix:(0,e.jsx)(Ze.Z,{className:"prefixIcon"})},name:L,placeholder:"\u624B\u673A\u53F7",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\uFF01"},{pattern:/^1\d{10}$/,message:"\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF\uFF01"}]}),(0,e.jsx)(Be.Z,{fieldProps:{size:"large",prefix:(0,e.jsx)(se.Z,{className:"prefixIcon"})},captchaProps:{size:"large"},placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",captchaTextRender:function(l,p){return l?"".concat(p," ","\u83B7\u53D6\u9A8C\u8BC1\u7801"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"},phoneName:L,name:"captcha",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01"}],onGetCaptcha:function(){var Z=W()(T()().mark(function l(p){var h;return T()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:h={},h[L]=p,v(y,u()({},h),function(x){H.ZP.success("\u9A8C\u8BC1\u7801\u5DF2\u53D1\u9001\uFF0C\u8BF7\u67E5\u770B\u624B\u673A\u77ED\u4FE1")});case 3:case"end":return b.stop()}},l)}));return function(l){return Z.apply(this,arguments)}}()})]}),(0,e.jsxs)("div",{style:{marginBlockEnd:24},children:[(0,e.jsx)(Oe.Z,{noStyle:!0,name:"autoLogin",children:"\u81EA\u52A8\u767B\u5F55"}),(0,e.jsx)("a",{style:{float:"right"},children:"\u5FD8\u8BB0\u5BC6\u7801"})]})]}))})},be=ze},42480:function(){},24654:function(){}}]);
