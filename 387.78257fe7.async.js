(self.webpackChunkdurians=self.webpackChunkdurians||[]).push([[387],{36274:function(gr,pe,n){"use strict";n.r(pe),n.d(pe,{FormPro:function(){return ve},LoginPro:function(){return dr},ModalPro:function(){return Se},TablePro:function(){return _e},TreePro:function(){return Te}});var Ze=n(52677),Be=n.n(Ze),Le=n(15009),K=n.n(Le),Ee=n(99289),_=n.n(Ee),Ne=n(97857),t=n.n(Ne),Oe=n(19632),k=n.n(Oe),be=n(48689),ge=n(24969),Me=n(61534),Ue=n(86738),ze=n(96074),oe=n(45360),xe=n(60940),Fe=n(42075),ie=n(14726),b=n(67294),Ke=n(64599),je=n.n(Ke),He=n(11238),We=n(81354),W=n.n(We),ee=function(e,l,a){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,c="";return s&&(c="api"),He.ZP.post(c+e,{data:l}).then(function(o){o.code==0?a(o):oe.ZP.error(o.msg)}).catch(function(o){console.log(o)})},ye=function(e,l){var a=je()(e),s;try{var c=function(){var f=s.value,i=f.proConfig;f.request||(f.valueType==="select"||f.valueType==="treeSelect")&&(f.request=function(){var j=_()(K()().mark(function T(y,D){var x;return K()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return console.log(22122,y,i.params),x=[],v.next=4,l(i.url,t()(t()({},y),typeof i.params=="function"?i.params(y,D):i.params||{}),function(Z){x=i.setData(Z)});case 4:return v.abrupt("return",x);case 5:case"end":return v.stop()}},T)}));return function(T,y){return j.apply(this,arguments)}}())};for(a.s();!(s=a.n()).done;)c()}catch(o){a.e(o)}finally{a.f()}return e},Je=function(e,l,a){var s=W().enc.Utf8.parse(l),c=W().enc.Utf8.parse(a);return W().AES.encrypt(e,s,{mode:W().mode.ECB,padding:W().pad.Pkcs7}).toString()},xr=function(e,l,a){var s=CryptoJS.enc.Utf8.parse(l),c=CryptoJS.enc.Utf8.parse(a);return CryptoJS.AES.decrypt(e,s,{mode:CryptoJS.mode.ECB,padding:CryptoJS.pad.Pkcs7})},Pe=n(89451),we=n(5574),le=n.n(we),Ve=n(59847),Ge=n(54673),r=n(85893);function de(L,e,l){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"value",s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"children",c=(0,Ge.Z)(L),o=je()(c),f;try{for(o.s();!(f=o.n()).done;){var i=f.value;i[a]===e?i.children=l:i.children&&(i.children=de(i.children,e,l,a,s))}}catch(j){o.e(j)}finally{o.f()}return c}var ke=function(e){var l=e.ajax,a=l===void 0?ee:l,s=e.fieldProps,c=s.fieldNames,o=s.params,f=o===void 0?function(v){return{}}:o,i=s.url,j=s.setData,T=(0,b.useState)([]),y=le()(T,2),D=y[0],x=y[1];(0,b.useEffect)(function(){N({},t()({},f({})))},[]);var N=function(Z){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return a(i,t()(t()({},f(Z)),A),function(E){var h=j(E);c&&(h=h.map(function(B){return B.label=B[c.label],B.value=B[c.value],B})),x(function(B){return Z.value?de(B,Z.value,h):h})})};return(0,r.jsx)(Ve.Z,t()(t()({},e==null?void 0:e.fieldProps),{},{treeDataSimpleMode:!0,style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:"\u8BF7\u9009\u62E9",loadData:N,treeData:D}))},Qe=ke,Xe=function(e){var l=e.children,a=(0,b.useContext)(Pe.L_);return(0,r.jsx)(Pe.L_.Provider,{value:t()(t()({},a),{},{valueTypeMap:{treeSelectPro:{renderFormItem:function(c,o){return(0,r.jsx)(Qe,t()({},o))}}}}),children:l})},$e=Xe,Ye=[{dataIndex:"index",valueType:"indexBorder",width:48},{title:"\u6807\u9898",dataIndex:"title",copyable:!0,ellipsis:!0,tooltip:"\u6807\u9898\u8FC7\u957F\u4F1A\u81EA\u52A8\u6536\u7F29",formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}}],qe=function(e){var l=e.ajax,a=l===void 0?ee:l,s=e.url,c=s===void 0?"https://proapi.azurewebsites.net/github/issues":s,o=e.addUrl,f=e.editUrl,i=e.deleteUrl,j=e.deleteFields,T=j===void 0?"idList":j,y=e.deleteField,D=y===void 0?null:y,x=e.deleteFieldIsArr,N=x===void 0?!1:x,v=e.deleteParams,Z=v===void 0?{}:v,A=e.addFormProFieldProps,E=A===void 0?{}:A,h=e.actionWidth,B=h===void 0?100:h,M=e.fieldProps,P=M===void 0?{search:{},columns:Ye,rowKey:"id"}:M,O=e.setData,H=O===void 0?function(F){return F.data.records}:O,G=e.setTotal,Y=G===void 0?function(F){return F.data.total}:G,J=e.setMsg,ne=J===void 0?function(F){return F.msg}:J,Q=e.actionBar,X=Q===void 0?[]:Q,R=e.paginationAlias,d=R===void 0?{pageIndex:"pageIndex",pageSize:"pageSize"}:R,p=e.tableAlertOptionRenderPro,$=p===void 0?[]:p,w=e.treeFieldProps,S=w===void 0?null:w,z=e.paramsFun,hr=z===void 0?function(F){return F}:z,te=(0,b.useRef)(),me=(0,b.useRef)(),Ae=P.rowKey||"id",se=[].concat(k()(f?[function(F){var u=F.record;return(0,r.jsx)(Re,{title:"\u7F16\u8F91",id:Ae,record:u,children:(0,r.jsx)("a",{children:"\u7F16\u8F91"})})}]:[]),k()(X),k()(i?[function(F){var u=F.record;return(0,r.jsx)(Ue.Z,{title:"\u5220\u9664",description:"\u786E\u5B9A\u5220\u9664\u8FD9\u6761\u6570\u636E\u5417\uFF1F",onConfirm:function(){Ie([u[Ae]],function(){},!1)},okText:"\u662F",cancelText:"\u5426",children:(0,r.jsx)("a",{style:{color:"red"},children:"\u5220\u9664"})})}]:[])),Re=function(u){var g=u.children,m=u.record,C=u.id,I=u.title,U=I===void 0?"\u65B0\u589E":I,q=typeof P.columns=="function"?P.columns("add"):P.columns;console.log(5555,m,C);var V=o,ae={};return C&&m!==null&&m!==void 0&&m[C]&&(ae[C]=m==null?void 0:m[C],f&&(V=f)),(0,r.jsx)(ve,t()(t()({ajax:a},E),{},{url:V,finishFun:function(){var he;(he=te.current)===null||he===void 0||he.reload()},params:t()(t()({},ae),E.params),fieldProps:t()({initialValues:m,columns:q.map(function(De){return t()(t()({},De),{},{width:null})}),title:U},E.fieldProps),children:g}))},pr=function(u,g){return(0,r.jsx)("div",{className:"durians_table_pro_action",children:se.map(function(m,C){return(0,r.jsxs)(b.Fragment,{children:[(0,r.jsx)(m,{record:g}),se.length>1&&C<se.length-1?(0,r.jsx)(ze.Z,{type:"vertical"}):null]},C)})})},Ie=function(u){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,C=u;!N&&!m&&(C=u[0]);var I=t()({},Z);m?I[T]=C:D?I[D]=C:I[P.rowKey||"id"]=C,a(i,I,function(U){var q;oe.ZP.success(ne(U)),(q=te.current)===null||q===void 0||q.reload(),te.current.clearSelected(),g()})};return(0,r.jsx)($e,{children:(0,r.jsxs)("div",{className:"durians_table_body",children:[S?(0,r.jsx)("div",{className:"durians_table_body_l",style:{width:300},children:(0,r.jsx)(Te,t()({ajax:a},S))}):null,(0,r.jsx)("div",{className:"durians_table_body_r",children:(0,r.jsx)(Me.Z,t()(t()({formRef:me,defaultSize:"small",scroll:{x:"100%"},rowSelection:{selections:[xe.Z.SELECTION_ALL,xe.Z.SELECTION_INVERT]},tableAlertRender:function(u){var g=u.selectedRowKeys,m=u.selectedRows,C=u.onCleanSelected;return console.log(g,m),(0,r.jsx)(Fe.Z,{size:24,children:(0,r.jsxs)("span",{children:["\u5DF2\u9009 ",g.length," \u9879",(0,r.jsx)("a",{style:{marginInlineStart:8},onClick:C,children:"\u53D6\u6D88\u9009\u62E9"})]})})},tableAlertOptionRender:function(u){var g=u.selectedRowKeys,m=u.selectedRows,C=u.onCleanSelected;return(0,r.jsxs)(Fe.Z,{size:16,children:[i?(0,r.jsx)(Se,{title:"\u662F\u5426\u786E\u5B9A\u5220\u9664\uFF1F",Content:function(){return"\u786E\u5B9A\u5220\u9664\uFF1F"},handleOk:function(U){Ie(g,function(){U()})},children:(0,r.jsx)(ie.ZP,{size:"small",icon:(0,r.jsx)(be.Z,{}),danger:!0,children:"\u6279\u91CF\u5220\u9664"},"danger")}):null,$.map(function(I,U){return(0,r.jsx)(I,{selectedRowKeys:g,selectedRows:m,onCleanSelected:C,formRef:me,actionRef:te},U)})]})},actionRef:te,request:function(){var F=_()(K()().mark(function u(g,m,C){var I,U;return K()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:if(I=P.dataSource,U={},console.log(22122,g),U[d.pageIndex]=g.current,U[d.pageSize]=g.pageSize,!c){V.next=8;break}return V.next=8,a(c,hr(t()(t()({},U),g)),function(ae){console.log(ae),I=ae});case 8:return V.abrupt("return",Promise.resolve({data:H(I),success:!0,total:Y(I)}));case 9:case"end":return V.stop()}},u)}));return function(u,g,m){return F.apply(this,arguments)}}(),rowKey:"id",options:{setting:{listsHeight:400}},form:{syncToUrl:!1},pagination:{pageSize:10,onChange:function(u){return console.log(u)}},dateFormatter:"string"},P),{},{columns:[].concat(k()(ye(typeof P.columns=="function"?P.columns("table"):P.columns,a)),k()(se.length?[{title:"\u64CD\u4F5C",dataIndex:"actionTablePro",fixed:"right",hideInSearch:!0,actionWidth:B,render:pr}]:[])),search:P.search?t()({labelWidth:"auto",span:4,defaultCollapsed:!1},P.search||{}):{labelWidth:"auto"},toolBarRender:function(u){var g;return console.log(6666,P.toolBarRender),[].concat(k()(o?[(0,r.jsx)(Re,{children:(0,r.jsx)(ie.ZP,{icon:(0,r.jsx)(ge.Z,{}),type:"primary",children:"\u65B0\u5EFA"},"button")})]:[]),k()(((g=P.toolBarRender)===null||g===void 0?void 0:g.map(function(m){return console.log(7656,Be()(m)),typeof m=="function"?(0,r.jsx)(m,{action:u,formRef:me}):m}))||[]))}}))})]})})},_e=qe,er=n(85576),rr=function(e){var l=e.title,a=l===void 0?"\u57FA\u7840":l,s=e.handleOk,c=s===void 0?function(h){h()}:s,o=e.Content,f=o===void 0?function(){return(0,r.jsx)("div",{children:"\u793A\u4F8B"})}:o,i=e.children,j=i===void 0?(0,r.jsx)("div",{children:"\u70B9\u51FB"}):i,T=e.fieldProps,y=T===void 0?{}:T,D=(0,b.useState)(!1),x=le()(D,2),N=x[0],v=x[1],Z=function(){v(!0)},A=function(){c(function(){v(!1)})},E=function(){v(!1)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{onClick:Z,children:j}),(0,r.jsx)(er.Z,t()(t()({title:a,open:N,onOk:A,onCancel:E},y),{},{children:(0,r.jsx)(f,{isModalOpen:N,setIsModalOpen:v})}))]})},Se=rr,nr=n(87547),Ce=n(94149),tr=n(24454),ar=n(68262),ue=n(5966),or=n(16434),lr=n(63434),sr=n(9361),ce=n(56140),re=n(99191),Fr=(0,re.df)([{id:"SHA256",fun:function(e){return W().SHA256(e).toString(W().enc.Base64)}},{id:"MD5",fun:function(e){return W().MD5(e).toString(W().enc.Hex)}}]),fe="autoLogin",ir=function(e){var l=e.ajax,a=l===void 0?ee:l,s=e.url,c=e.captchaUrl,o=e.loginFormFieldProps,f=e.hasSmsLogin,i=f===void 0?!1:f,j=e.hasAccountLogin,T=j===void 0?!0:j,y=e.phoneField,D=y===void 0?"mobile":y,x=e.extraPasswordText,N=x===void 0?"":x,v=e.secretKey,Z=v===void 0?"":v,A=e.setData,E=A===void 0?function(R){return R.data}:A,h=e.tokenField,B=h===void 0?"token":h,M=e.callback,P=M===void 0?function(){}:M,O=sr.Z.useToken(),H=O.token,G=(0,b.useState)("account"),Y=le()(G,2),J=Y[0],ne=Y[1],Q=(0,b.useRef)();(0,b.useEffect)(function(){var R=(0,re.pv)(fe);R&&X((0,re.pv)(fe))},[]);var X=function(d){var p=t()({},d);p.password=Je(p.password+N,Z,Z),a(s,p,function($){(0,re.KN)(B,E($.data)),d.autoLogin&&(0,re.ok)(fe,d),P($)},!1)};return(0,r.jsx)("div",{style:{backgroundColor:H.colorBgContainer},className:"crm_login_body",children:(0,r.jsxs)(ar.U,t()(t()({formRef:Q,title:"\u767B\u5F55",subTitle:"\u6B22\u8FCE\u767B\u5F55\u7CFB\u7EDF",initialValues:{username:"",password:""},onFinish:function(){var R=_()(K()().mark(function d(p){var $;return K()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,Q.current.validateFields();case 2:return $=S.sent,$&&X(p),S.abrupt("return",!0);case 5:case"end":return S.stop()}},d)}));return function(d){return R.apply(this,arguments)}}()},o),{},{children:[(0,r.jsxs)(ce.Z,{centered:!0,activeKey:J,onChange:function(d){return ne(d)},children:[(0,r.jsx)(ce.Z.TabPane,{tab:"\u8D26\u53F7\u5BC6\u7801\u767B\u5F55",disabled:!T},"account"),(0,r.jsx)(ce.Z.TabPane,{tab:"\u624B\u673A\u53F7\u767B\u5F55",disabled:!i},"phone")]}),J==="account"&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ue.Z,{name:"username",fieldProps:{size:"large",prefix:(0,r.jsx)(nr.Z,{className:"prefixIcon"})},placeholder:"\u7528\u6237\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"}]}),(0,r.jsx)(ue.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,r.jsx)(Ce.Z,{className:"prefixIcon"}),strengthText:"\u5BC6\u7801\u5E94\u5305\u542B\u6570\u5B57\u3001\u5B57\u6BCD\u548C\u7279\u6B8A\u5B57\u7B26\uFF0C\u957F\u5EA6\u81F3\u5C11\u4E3A8\u4E2A\u5B57\u7B26",statusRender:function(d){var p=function(){return d&&d.length>12?"ok":d&&d.length>6?"pass":"poor"},$=p();return $==="pass"?(0,r.jsx)("div",{style:{color:H.colorWarning},children:"\u5F3A\u5EA6\uFF1A\u4E2D"}):$==="ok"?(0,r.jsx)("div",{style:{color:H.colorSuccess},children:"\u5F3A\u5EA6\uFF1A\u5F3A"}):(0,r.jsx)("div",{style:{color:H.colorError},children:"\u5F3A\u5EA6\uFF1A\u5F31"})}},placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"}]})]}),J==="phone"&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ue.Z,{fieldProps:{size:"large",prefix:(0,r.jsx)(tr.Z,{className:"prefixIcon"})},name:D,placeholder:"\u624B\u673A\u53F7",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\uFF01"},{pattern:/^1\d{10}$/,message:"\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF\uFF01"}]}),(0,r.jsx)(or.Z,{fieldProps:{size:"large",prefix:(0,r.jsx)(Ce.Z,{className:"prefixIcon"})},captchaProps:{size:"large"},placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",captchaTextRender:function(d,p){return d?"".concat(p," ","\u83B7\u53D6\u9A8C\u8BC1\u7801"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"},phoneName:D,name:"captcha",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01"}],onGetCaptcha:function(){var R=_()(K()().mark(function d(p){var $;return K()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:$={},$[D]=p,a(c,t()({},$),function(z){oe.ZP.success("\u9A8C\u8BC1\u7801\u5DF2\u53D1\u9001\uFF0C\u8BF7\u67E5\u770B\u624B\u673A\u77ED\u4FE1")});case 3:case"end":return S.stop()}},d)}));return function(d){return R.apply(this,arguments)}}()})]}),(0,r.jsxs)("div",{style:{marginBlockEnd:24},children:[(0,r.jsx)(lr.Z,{noStyle:!0,name:"autoLogin",children:"\u81EA\u52A8\u767B\u5F55"}),(0,r.jsx)("a",{style:{float:"right"},children:"\u5FD8\u8BB0\u5BC6\u7801"})]})]}))})},dr=ir,ur=n(77646),cr=function(e){var l=e.params,a=l===void 0?{}:l,s=e.layoutType,c=s===void 0?"ModalForm":s,o=e.fieldProps,f=o===void 0?{}:o,i=e.url,j=e.ajax,T=j===void 0?ee:j,y=e.finishFun,D=y===void 0?function(){}:y,x=e.setMsg,N=x===void 0?function(A){return A.msg}:x,v=e.children,Z=v===void 0?(0,r.jsx)(ie.ZP,{children:"\u70B9\u51FB\u6211"}):v;return(0,r.jsx)($e,{children:(0,r.jsx)(ur.Z,t()(t()(t()({trigger:Z,layoutType:"ModalForm",onFinish:_()(K()().mark(function A(){var E,h,B,M=arguments;return K()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return E=M.length>0&&M[0]!==void 0?M[0]:{},h=!1,B=t()(t()({},a),E),console.log(E),O.next=6,T(i,B,function(H){oe.ZP.success(N(H)),D(),h=!0});case 6:return O.abrupt("return",h);case 7:case"end":return O.stop()}},A)}))},c==="ModalForm"?{modalProps:{destroyOnClose:!0}}:{drawerProps:{destroyOnClose:!0}}),f),{},{columns:ye(f.columns,T)}))})},ve=cr,fr=n(17960),vr=n(89705),jr=[{title:"Expand to load",key:"0"},{title:"Expand to load",key:"1"},{title:"Tree Node",key:"2",isLeaf:!0}],mr=function(e){var l=e.title,a=l===void 0?"\u9009\u62E9":l,s=e.ajax,c=s===void 0?ee:s,o=e.url,f=o===void 0?"https://proapi.azurewebsites.net/github/issues":o,i=e.params,j=i===void 0?function(d){return{}}:i,T=e.addUrl,y=e.editUrl,D=e.deleteUrl,x=e.deleteFields,N=x===void 0?"idList":x,v=e.deleteField,Z=v===void 0?null:v,A=e.deleteFieldIsArr,E=A===void 0?!1:A,h=e.deleteParams,B=h===void 0?{}:h,M=e.addFormProFieldProps,P=M===void 0?{}:M,O=e.setData,H=O===void 0?function(d){return d.data}:O,G=e.fieldNames,Y=(0,b.useState)([]),J=le()(Y,2),ne=J[0],Q=J[1];(0,b.useEffect)(function(){X({},t()({},j({})))},[]);var X=function(p){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return c(f,t()(t()({},j(p)),$),function(w){var S=H(w);G&&(S=S.map(function(z){return z.label=z[G.label],z.value=z[G.value],z})),Q(function(z){return p.value?de(z,p.value,S):S})})},R=function(p){var $=p.children;return(0,r.jsx)(ve,t()(t()({url:T},P),{},{fieldProps:{columns:[{title:"\u6807\u9898",dataIndex:"title",formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}}]},children:$}))};return(0,r.jsxs)("div",{className:"durians_tree_body",children:[(0,r.jsxs)("div",{className:"durians_tree_body_title",children:[(0,r.jsx)("div",{className:"durians_tree_body_title_l",children:a}),(0,r.jsx)("div",{className:"durians_tree_body_title_r",children:(0,r.jsx)(R,{children:(0,r.jsx)(ge.Z,{})})})]}),(0,r.jsx)("div",{className:"durians_tree_body_tree",children:(0,r.jsx)(fr.Z,{loadData:X,treeData:ne,titleRender:function(p){return(0,r.jsxs)("div",{className:"durians_tree_body_title_node",children:[(0,r.jsx)("div",{className:"durians_tree_body_title_node_l",children:p.title}),(0,r.jsx)("div",{className:"durians_tree_body_title_node_r",onClick:function(w){w.stopPropagation(),console.log(2222)},children:(0,r.jsx)(vr.Z,{})})]})}})})]})},Te=mr},42480:function(){},24654:function(){}}]);
